{"version":3,"file":"ng-zorro-antd-rate.js","sources":["../../components/rate/rate.component.ts","../../components/rate/rate-item.component.ts","../../components/rate/rate.module.ts","../../components/rate/public-api.ts","../../components/rate/ng-zorro-antd-rate.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Direction, Directionality } from '@angular/cdk/bidi';\nimport { LEFT_ARROW, RIGHT_ARROW } from '@angular/cdk/keycodes';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { NzConfigKey, NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { BooleanInput, NgClassType, NumberInput } from 'ng-zorro-antd/core/types';\nimport { InputBoolean, InputNumber } from 'ng-zorro-antd/core/util';\n\nconst NZ_CONFIG_MODULE_NAME: NzConfigKey = 'rate';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  selector: 'nz-rate',\n  exportAs: 'nzRate',\n  preserveWhitespaces: false,\n  template: `\n    <ul\n      #ulElement\n      class=\"ant-rate\"\n      [class.ant-rate-disabled]=\"nzDisabled\"\n      [class.ant-rate-rtl]=\"dir === 'rtl'\"\n      [ngClass]=\"classMap\"\n      (blur)=\"onBlur($event)\"\n      (focus)=\"onFocus($event)\"\n      (keydown)=\"onKeyDown($event); $event.preventDefault()\"\n      (mouseleave)=\"onRateLeave(); $event.stopPropagation()\"\n      [tabindex]=\"nzDisabled ? -1 : 1\"\n    >\n      <li\n        *ngFor=\"let star of starArray; let i = index\"\n        class=\"ant-rate-star\"\n        [ngClass]=\"starStyleArray[i] || ''\"\n        nz-tooltip\n        [nzTooltipTitle]=\"nzTooltips[i]\"\n      >\n        <div\n          nz-rate-item\n          [allowHalf]=\"nzAllowHalf\"\n          [character]=\"nzCharacter\"\n          [index]=\"i\"\n          (itemHover)=\"onItemHover(i, $event)\"\n          (itemClick)=\"onItemClick(i, $event)\"\n        ></div>\n      </li>\n    </ul>\n  `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NzRateComponent),\n      multi: true\n    }\n  ]\n})\nexport class NzRateComponent implements OnInit, OnDestroy, ControlValueAccessor, OnChanges {\n  readonly _nzModuleName: NzConfigKey = NZ_CONFIG_MODULE_NAME;\n\n  static ngAcceptInputType_nzAllowClear: BooleanInput;\n  static ngAcceptInputType_nzAllowHalf: BooleanInput;\n  static ngAcceptInputType_nzDisabled: BooleanInput;\n  static ngAcceptInputType_nzAutoFocus: BooleanInput;\n  static ngAcceptInputType_nzCount: NumberInput;\n\n  @ViewChild('ulElement', { static: false }) private ulElement?: ElementRef;\n\n  @Input() @WithConfig() @InputBoolean() nzAllowClear: boolean = true;\n  @Input() @WithConfig() @InputBoolean() nzAllowHalf: boolean = false;\n  @Input() @InputBoolean() nzDisabled: boolean = false;\n  @Input() @InputBoolean() nzAutoFocus: boolean = false;\n  @Input() nzCharacter!: TemplateRef<void>;\n  @Input() @InputNumber() nzCount: number = 5;\n  @Input() nzTooltips: string[] = [];\n  @Output() readonly nzOnBlur = new EventEmitter<FocusEvent>();\n  @Output() readonly nzOnFocus = new EventEmitter<FocusEvent>();\n  @Output() readonly nzOnHoverChange = new EventEmitter<number>();\n  @Output() readonly nzOnKeyDown = new EventEmitter<KeyboardEvent>();\n\n  classMap: NgClassType = {};\n  starArray: number[] = [];\n  starStyleArray: NgClassType[] = [];\n  dir: Direction = 'ltr';\n\n  private readonly destroy$ = new Subject<void>();\n  private hasHalf = false;\n  private hoverValue = 0;\n  private isFocused = false;\n  private _value = 0;\n\n  get nzValue(): number {\n    return this._value;\n  }\n\n  set nzValue(input: number) {\n    if (this._value === input) {\n      return;\n    }\n\n    this._value = input;\n    this.hasHalf = !Number.isInteger(input);\n    this.hoverValue = Math.ceil(input);\n  }\n\n  constructor(\n    public nzConfigService: NzConfigService,\n    private renderer: Renderer2,\n    private cdr: ChangeDetectorRef,\n    @Optional() private directionality: Directionality\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { nzAutoFocus, nzCount, nzValue } = changes;\n\n    if (nzAutoFocus && !nzAutoFocus.isFirstChange()) {\n      const el = this.ulElement!.nativeElement;\n      if (this.nzAutoFocus && !this.nzDisabled) {\n        this.renderer.setAttribute(el, 'autofocus', 'autofocus');\n      } else {\n        this.renderer.removeAttribute(el, 'autofocus');\n      }\n    }\n\n    if (nzCount) {\n      this.updateStarArray();\n    }\n\n    if (nzValue) {\n      this.updateStarStyle();\n    }\n  }\n\n  ngOnInit(): void {\n    this.nzConfigService\n      .getConfigChangeEventForComponent(NZ_CONFIG_MODULE_NAME)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.cdr.markForCheck());\n\n    this.directionality.change?.pipe(takeUntil(this.destroy$)).subscribe((direction: Direction) => {\n      this.dir = direction;\n      this.cdr.detectChanges();\n    });\n\n    this.dir = this.directionality.value;\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  onItemClick(index: number, isHalf: boolean): void {\n    if (this.nzDisabled) {\n      return;\n    }\n\n    this.hoverValue = index + 1;\n\n    const actualValue = isHalf ? index + 0.5 : index + 1;\n\n    if (this.nzValue === actualValue) {\n      if (this.nzAllowClear) {\n        this.nzValue = 0;\n        this.onChange(this.nzValue);\n      }\n    } else {\n      this.nzValue = actualValue;\n      this.onChange(this.nzValue);\n    }\n\n    this.updateStarStyle();\n  }\n\n  onItemHover(index: number, isHalf: boolean): void {\n    if (this.nzDisabled || (this.hoverValue === index + 1 && isHalf === this.hasHalf)) {\n      return;\n    }\n\n    this.hoverValue = index + 1;\n    this.hasHalf = isHalf;\n    this.nzOnHoverChange.emit(this.hoverValue);\n\n    this.updateStarStyle();\n  }\n\n  onRateLeave(): void {\n    this.hasHalf = !Number.isInteger(this.nzValue);\n    this.hoverValue = Math.ceil(this.nzValue);\n\n    this.updateStarStyle();\n  }\n\n  onFocus(e: FocusEvent): void {\n    this.isFocused = true;\n    this.nzOnFocus.emit(e);\n  }\n\n  onBlur(e: FocusEvent): void {\n    this.isFocused = false;\n    this.nzOnBlur.emit(e);\n  }\n\n  focus(): void {\n    this.ulElement!.nativeElement.focus();\n  }\n\n  blur(): void {\n    this.ulElement!.nativeElement.blur();\n  }\n\n  onKeyDown(e: KeyboardEvent): void {\n    const oldVal = this.nzValue;\n\n    if (e.keyCode === RIGHT_ARROW && this.nzValue < this.nzCount) {\n      this.nzValue += this.nzAllowHalf ? 0.5 : 1;\n    } else if (e.keyCode === LEFT_ARROW && this.nzValue > 0) {\n      this.nzValue -= this.nzAllowHalf ? 0.5 : 1;\n    }\n\n    if (oldVal !== this.nzValue) {\n      this.onChange(this.nzValue);\n      this.nzOnKeyDown.emit(e);\n      this.updateStarStyle();\n      this.cdr.markForCheck();\n    }\n  }\n\n  private updateStarArray(): void {\n    this.starArray = Array(this.nzCount)\n      .fill(0)\n      .map((_, i) => i);\n\n    this.updateStarStyle();\n  }\n\n  private updateStarStyle(): void {\n    this.starStyleArray = this.starArray.map(i => {\n      const prefix = 'ant-rate-star';\n      const value = i + 1;\n      return {\n        [`${prefix}-full`]: value < this.hoverValue || (!this.hasHalf && value === this.hoverValue),\n        [`${prefix}-half`]: this.hasHalf && value === this.hoverValue,\n        [`${prefix}-active`]: this.hasHalf && value === this.hoverValue,\n        [`${prefix}-zero`]: value > this.hoverValue,\n        [`${prefix}-focused`]: this.hasHalf && value === this.hoverValue && this.isFocused\n      };\n    });\n  }\n\n  writeValue(value: number | null): void {\n    this.nzValue = value || 0;\n    this.updateStarArray();\n    this.cdr.markForCheck();\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.nzDisabled = isDisabled;\n  }\n\n  registerOnChange(fn: (_: number) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  onChange: (value: number) => void = () => null;\n  onTouched: () => void = () => null;\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport { BooleanInput } from 'ng-zorro-antd/core/types';\nimport { InputBoolean } from 'ng-zorro-antd/core/util';\n\n@Component({\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  selector: '[nz-rate-item]',\n  exportAs: 'nzRateItem',\n  template: `\n    <div\n      class=\"ant-rate-star-second\"\n      (mouseover)=\"hoverRate(false); $event.stopPropagation()\"\n      (click)=\"clickRate(false)\"\n    >\n      <ng-template\n        [ngTemplateOutlet]=\"character || defaultCharacter\"\n        [ngTemplateOutletContext]=\"{ $implicit: index }\"\n      ></ng-template>\n    </div>\n    <div class=\"ant-rate-star-first\" (mouseover)=\"hoverRate(true); $event.stopPropagation()\" (click)=\"clickRate(true)\">\n      <ng-template\n        [ngTemplateOutlet]=\"character || defaultCharacter\"\n        [ngTemplateOutletContext]=\"{ $implicit: index }\"\n      ></ng-template>\n    </div>\n\n    <ng-template #defaultCharacter>\n      <i nz-icon nzType=\"star\" nzTheme=\"fill\"></i>\n    </ng-template>\n  `\n})\nexport class NzRateItemComponent {\n  static ngAcceptInputType_allowHalf: BooleanInput;\n\n  @Input() character!: TemplateRef<void>;\n  @Input() index = 0;\n  @Input() @InputBoolean() allowHalf: boolean = false;\n  @Output() readonly itemHover = new EventEmitter<boolean>();\n  @Output() readonly itemClick = new EventEmitter<boolean>();\n\n  hoverRate(isHalf: boolean): void {\n    this.itemHover.next(isHalf && this.allowHalf);\n  }\n\n  clickRate(isHalf: boolean): void {\n    this.itemClick.next(isHalf && this.allowHalf);\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\n\nimport { NzRateItemComponent } from './rate-item.component';\nimport { NzRateComponent } from './rate.component';\n\n@NgModule({\n  exports: [NzRateComponent],\n  declarations: [NzRateComponent, NzRateItemComponent],\n  imports: [BidiModule, CommonModule, NzIconModule, NzToolTipModule]\n})\nexport class NzRateModule {}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nexport * from './rate.component';\nexport * from './rate.module';\nexport * from './rate-item.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}