import { __rest, __decorate } from 'tslib';
import { Platform } from '@angular/cdk/platform';
import { Injectable, Inject, NgZone, ComponentFactoryResolver, EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, ChangeDetectorRef, Optional, Input, Output, ViewChild, ViewContainerRef, Directive, ElementRef, Renderer2, TemplateRef, Injector, HostBinding, NgModule } from '@angular/core';
import { DomSanitizer } from '@angular/platform-browser';
import { of, BehaviorSubject, Observable, combineLatest, Subject, merge } from 'rxjs';
import { map, distinctUntilChanged, takeUntil, filter, debounceTime, startWith, mergeMap, tap, switchMap, catchError } from 'rxjs/operators';
import { ACLService } from '@delon/acl';
import { DelonLocaleService, ALAIN_I18N_TOKEN, DelonLocaleModule } from '@delon/theme';
import { AlainConfigService } from '@delon/util/config';
import { toBoolean, InputBoolean, InputNumber } from '@delon/util/decorator';
import { deepCopy, deepGet } from '@delon/util/other';
import Ajv from 'ajv';
import addFormats from 'ajv-formats';
import { REGEX } from '@delon/util/format';
import { helpMotion } from 'ng-zorro-antd/core/animation';
import { CommonModule } from '@angular/common';
import { NgModel, FormsModule } from '@angular/forms';
import { NzAutocompleteModule } from 'ng-zorro-antd/auto-complete';
import { NzButtonModule } from 'ng-zorro-antd/button';
import { NzCardModule } from 'ng-zorro-antd/card';
import { NzCascaderModule } from 'ng-zorro-antd/cascader';
import { NzCheckboxModule } from 'ng-zorro-antd/checkbox';
import { NzDatePickerModule } from 'ng-zorro-antd/date-picker';
import { NzFormModule } from 'ng-zorro-antd/form';
import { NzGridModule } from 'ng-zorro-antd/grid';
import { NzIconModule } from 'ng-zorro-antd/icon';
import { NzInputModule } from 'ng-zorro-antd/input';
import { NzInputNumberModule } from 'ng-zorro-antd/input-number';
import { NzMentionModule } from 'ng-zorro-antd/mention';
import { NzModalService, NzModalModule } from 'ng-zorro-antd/modal';
import { NzRadioModule } from 'ng-zorro-antd/radio';
import { NzRateModule } from 'ng-zorro-antd/rate';
import { NzSelectModule } from 'ng-zorro-antd/select';
import { NzSliderModule } from 'ng-zorro-antd/slider';
import { NzSwitchModule } from 'ng-zorro-antd/switch';
import { NzTagModule } from 'ng-zorro-antd/tag';
import { NzTimePickerModule } from 'ng-zorro-antd/time-picker';
import { NzToolTipModule } from 'ng-zorro-antd/tooltip';
import { NzTransferModule } from 'ng-zorro-antd/transfer';
import { NzTreeSelectModule } from 'ng-zorro-antd/tree-select';
import { NzUploadModule } from 'ng-zorro-antd/upload';
import { format } from 'date-fns';
import { toDate } from '@delon/util/date-time';
import { ArrayService } from '@delon/util/array';

import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@delon/util/config';
import * as ɵngcc2 from '@angular/platform-browser';
import * as ɵngcc3 from '@delon/theme';
import * as ɵngcc4 from '@delon/acl';
import * as ɵngcc5 from '@angular/cdk/platform';
import * as ɵngcc6 from '@angular/forms';
import * as ɵngcc7 from 'ng-zorro-antd/form';
import * as ɵngcc8 from '@angular/common';
import * as ɵngcc9 from 'ng-zorro-antd/grid';
import * as ɵngcc10 from 'ng-zorro-antd/button';
import * as ɵngcc11 from 'ng-zorro-antd/core/wave';
import * as ɵngcc12 from 'ng-zorro-antd/core/transition-patch';
import * as ɵngcc13 from 'ng-zorro-antd/icon';
import * as ɵngcc14 from 'ng-zorro-antd/tooltip';
import * as ɵngcc15 from 'ng-zorro-antd/card';
import * as ɵngcc16 from 'ng-zorro-antd/input';
import * as ɵngcc17 from 'ng-zorro-antd/auto-complete';
import * as ɵngcc18 from 'ng-zorro-antd/switch';
import * as ɵngcc19 from 'ng-zorro-antd/cascader';
import * as ɵngcc20 from 'ng-zorro-antd/checkbox';
import * as ɵngcc21 from 'ng-zorro-antd/date-picker';
import * as ɵngcc22 from 'ng-zorro-antd/mention';
import * as ɵngcc23 from 'ng-zorro-antd/input-number';
import * as ɵngcc24 from 'ng-zorro-antd/radio';
import * as ɵngcc25 from 'ng-zorro-antd/rate';
import * as ɵngcc26 from 'ng-zorro-antd/select';
import * as ɵngcc27 from 'ng-zorro-antd/slider';
import * as ɵngcc28 from 'ng-zorro-antd/tag';
import * as ɵngcc29 from 'ng-zorro-antd/time-picker';
import * as ɵngcc30 from 'ng-zorro-antd/transfer';
import * as ɵngcc31 from 'ng-zorro-antd/tree-select';
import * as ɵngcc32 from 'ng-zorro-antd/upload';

function SFComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0);
} }
function SFComponent_sf_item_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "sf-item", 4);
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("formProperty", ctx_r2.rootProperty);
} }
function SFComponent_ng_container_4_nz_form_item_1_ng_container_4_i_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 13);
} if (rf & 2) {
    const ctx_r6 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵproperty("nzType", ctx_r6._btn.submit_icon.type)("nzTheme", ctx_r6._btn.submit_icon.theme)("nzTwotoneColor", ctx_r6._btn.submit_icon.twoToneColor)("nzIconfont", ctx_r6._btn.submit_icon.iconfont);
} }
function SFComponent_ng_container_4_nz_form_item_1_ng_container_4_button_4_i_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 13);
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(5);
    ɵngcc0.ɵɵproperty("nzType", ctx_r8._btn.reset_icon.type)("nzTheme", ctx_r8._btn.reset_icon.theme)("nzTwotoneColor", ctx_r8._btn.reset_icon.twoToneColor)("nzIconfont", ctx_r8._btn.reset_icon.iconfont);
} }
function SFComponent_ng_container_4_nz_form_item_1_ng_container_4_button_4_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 14);
    ɵngcc0.ɵɵlistener("click", function SFComponent_ng_container_4_nz_form_item_1_ng_container_4_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(4); return ctx_r9.reset(true); });
    ɵngcc0.ɵɵtemplate(1, SFComponent_ng_container_4_nz_form_item_1_ng_container_4_button_4_i_1_Template, 1, 4, "i", 11);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r7 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵproperty("nzType", ctx_r7._btn.reset_type)("nzSize", ctx_r7._btn.render.size)("disabled", ctx_r7.loading);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r7._btn.reset_icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r7._btn.reset, " ");
} }
function SFComponent_ng_container_4_nz_form_item_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "button", 10);
    ɵngcc0.ɵɵtemplate(2, SFComponent_ng_container_4_nz_form_item_1_ng_container_4_i_2_Template, 1, 4, "i", 11);
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(4, SFComponent_ng_container_4_nz_form_item_1_ng_container_4_button_4_Template, 3, 5, "button", 12);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzType", ctx_r5._btn.submit_type)("nzSize", ctx_r5._btn.render.size)("nzLoading", ctx_r5.loading)("disabled", ctx_r5.liveValidate && !ctx_r5.valid);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5._btn.submit_icon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r5._btn.submit, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r5._btn.reset);
} }
function SFComponent_ng_container_4_nz_form_item_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nz-form-item", 6);
    ɵngcc0.ɵɵelementStart(1, "div", 7);
    ɵngcc0.ɵɵelementStart(2, "div", 8);
    ɵngcc0.ɵɵelementStart(3, "div", 9);
    ɵngcc0.ɵɵtemplate(4, SFComponent_ng_container_4_nz_form_item_1_ng_container_4_Template, 5, 7, "ng-container", 3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    const _r0 = ɵngcc0.ɵɵreference(1);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r4._btn.render.class)("fixed-label", ctx_r4._btn.render.spanLabelFixed);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r4.btnGrid.span)("nzOffset", ctx_r4.btnGrid.offset)("nzXs", ctx_r4.btnGrid.xs)("nzSm", ctx_r4.btnGrid.sm)("nzMd", ctx_r4.btnGrid.md)("nzLg", ctx_r4.btnGrid.lg)("nzXl", ctx_r4.btnGrid.xl)("nzXXl", ctx_r4.btnGrid.xxl);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.button)("ngIfElse", _r0);
} }
function SFComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, SFComponent_ng_container_4_nz_form_item_1_Template, 5, 12, "nz-form-item", 5);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3._btn.render);
} }
const _c0 = ["*"];
const _c1 = ["target"];
function SFItemComponent_ng_template_0_Template(rf, ctx) { }
function SFItemWrapComponent_div_1_label_1_span_3_i_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 12);
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(4);
    ɵngcc0.ɵɵproperty("nzTooltipTitle", ctx_r5.oh.text)("nzTooltipPlacement", ctx_r5.oh.placement)("nzTooltipTrigger", ctx_r5.oh.trigger)("nzTooltipColor", ctx_r5.oh.bgColor)("nzTooltipOverlayClassName", ctx_r5.oh.overlayClassName)("nzTooltipOverlayStyle", ctx_r5.oh.overlayStyle)("nzTooltipMouseEnterDelay", ctx_r5.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay", ctx_r5.oh.mouseLeaveDelay)("nzType", ctx_r5.oh.icon);
} }
function SFItemWrapComponent_div_1_label_1_span_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 10);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵtemplate(2, SFItemWrapComponent_div_1_label_1_span_3_i_2_Template, 1, 9, "i", 11);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r4.ui.optional, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r4.oh);
} }
function SFItemWrapComponent_div_1_label_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "label");
    ɵngcc0.ɵɵelementStart(1, "span", 8);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(3, SFItemWrapComponent_div_1_label_1_span_3_Template, 3, 2, "span", 9);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵclassProp("ant-form-item-required", ctx_r3.ui._required);
    ɵngcc0.ɵɵattribute("for", ctx_r3.id);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r3.t);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.ui.optional || ctx_r3.oh);
} }
function SFItemWrapComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 6);
    ɵngcc0.ɵɵtemplate(1, SFItemWrapComponent_div_1_label_1_Template, 4, 5, "label", 7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r0.ui.spanLabel);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.t);
} }
function SFItemWrapComponent_div_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 13);
    ɵngcc0.ɵɵelementStart(1, "div");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("@helpMotion", undefined);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r1.error);
} }
function SFItemWrapComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 14);
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r2.ui._description, ɵngcc0.ɵɵsanitizeHtml);
} }
function ArrayWidget_div_1_i_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 12);
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("nzTooltipTitle", ctx_r4.oh.text)("nzTooltipPlacement", ctx_r4.oh.placement)("nzTooltipTrigger", ctx_r4.oh.trigger)("nzTooltipOverlayClassName", ctx_r4.oh.overlayClassName)("nzTooltipOverlayStyle", ctx_r4.oh.overlayStyle)("nzTooltipMouseEnterDelay", ctx_r4.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay", ctx_r4.oh.mouseLeaveDelay)("nzType", ctx_r4.oh.icon);
} }
function ArrayWidget_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r6 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 7);
    ɵngcc0.ɵɵelementStart(1, "label");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementStart(3, "span", 8);
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵtemplate(5, ArrayWidget_div_1_i_5_Template, 1, 8, "i", 9);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(6, "div", 10);
    ɵngcc0.ɵɵelementStart(7, "button", 11);
    ɵngcc0.ɵɵlistener("click", function ArrayWidget_div_1_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.addItem(); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r0.ui.spanLabel);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r0.schema.title, " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r0.ui.optional, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.oh);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("nzType", ctx_r0.addType)("disabled", ctx_r0.addDisabled)("innerHTML", ctx_r0.addTitle, ɵngcc0.ɵɵsanitizeHtml);
} }
function ArrayWidget_ng_container_5_div_1_span_3_Template(rf, ctx) { if (rf & 1) {
    const _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "span", 17);
    ɵngcc0.ɵɵlistener("click", function ArrayWidget_ng_container_5_div_1_span_3_Template_span_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const idx_r8 = ɵngcc0.ɵɵnextContext(2).index; const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.removeItem(idx_r8); });
    ɵngcc0.ɵɵelement(1, "i", 18);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r10 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵattribute("title", ctx_r10.removeTitle);
} }
function ArrayWidget_ng_container_5_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 14);
    ɵngcc0.ɵɵelementStart(1, "nz-card");
    ɵngcc0.ɵɵelement(2, "sf-item", 15);
    ɵngcc0.ɵɵtemplate(3, ArrayWidget_ng_container_5_div_1_span_3_Template, 2, 1, "span", 16);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r14 = ɵngcc0.ɵɵnextContext();
    const idx_r8 = ctx_r14.index;
    const i_r7 = ctx_r14.$implicit;
    const ctx_r9 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r9.arraySpan);
    ɵngcc0.ɵɵattribute("data-index", idx_r8);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("formProperty", i_r7);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r9.showRemove);
} }
function ArrayWidget_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ArrayWidget_ng_container_5_div_1_Template, 4, 4, "div", 13);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r7 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", i_r7.visible && !i_r7.ui.hidden);
} }
function ArrayWidget_div_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 19);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.error);
} }
function ArrayWidget_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 20);
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r3.ui._description, ɵngcc0.ɵɵsanitizeHtml);
} }
function AutoCompleteWidget_nz_auto_option_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nz-auto-option", 5);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r2 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("nzValue", i_r2)("nzLabel", i_r2.label);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", i_r2.label, " ");
} }
function CheckboxWidget_ng_template_0_label_0_Template(rf, ctx) { if (rf & 1) {
    const _r6 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "label", 4);
    ɵngcc0.ɵɵlistener("ngModelChange", function CheckboxWidget_ng_template_0_label_0_Template_label_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.allChecked = $event; })("ngModelChange", function CheckboxWidget_ng_template_0_label_0_Template_label_ngModelChange_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.onAllChecked(); });
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngModel", ctx_r4.allChecked)("nzIndeterminate", ctx_r4.indeterminate);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r4.ui.checkAllText || ctx_r4.l.checkAllText);
} }
function CheckboxWidget_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, CheckboxWidget_ng_template_0_label_0_Template, 2, 3, "label", 3);
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.ui.checkAll);
} }
function CheckboxWidget_ng_container_3_i_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 8);
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("nzTooltipTitle", ctx_r8.oh.text)("nzTooltipPlacement", ctx_r8.oh.placement)("nzTooltipTrigger", ctx_r8.oh.trigger)("nzTooltipOverlayClassName", ctx_r8.oh.overlayClassName)("nzTooltipOverlayStyle", ctx_r8.oh.overlayStyle)("nzTooltipMouseEnterDelay", ctx_r8.oh.mouseEnterDelay)("nzTooltipMouseLeaveDelay", ctx_r8.oh.mouseLeaveDelay)("nzType", ctx_r8.oh.icon);
} }
function CheckboxWidget_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "label", 5);
    ɵngcc0.ɵɵlistener("ngModelChange", function CheckboxWidget_ng_container_3_Template_label_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9._setValue($event); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementStart(3, "span", 6);
    ɵngcc0.ɵɵtext(4);
    ɵngcc0.ɵɵtemplate(5, CheckboxWidget_ng_container_3_i_5_Template, 1, 8, "i", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzDisabled", ctx_r2.disabled)("ngModel", ctx_r2.value);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r2.schema.title, " ");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r2.ui.optional, " ");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r2.oh);
} }
function CheckboxWidget_ng_container_4_ng_container_1_ng_template_1_Template(rf, ctx) { }
function CheckboxWidget_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r15 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, CheckboxWidget_ng_container_4_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 9);
    ɵngcc0.ɵɵelementStart(2, "nz-checkbox-group", 10);
    ɵngcc0.ɵɵlistener("ngModelChange", function CheckboxWidget_ng_container_4_ng_container_1_Template_nz_checkbox_group_ngModelChange_2_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.notifySet(); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);
    const _r0 = ɵngcc0.ɵɵreference(1);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngModel", ctx_r11.data);
} }
function CheckboxWidget_ng_container_4_ng_container_2_div_3_ng_template_1_Template(rf, ctx) { }
function CheckboxWidget_ng_container_4_ng_container_2_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 15);
    ɵngcc0.ɵɵtemplate(1, CheckboxWidget_ng_container_4_ng_container_2_div_3_ng_template_1_Template, 0, 0, "ng-template", 9);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);
    const _r0 = ɵngcc0.ɵɵreference(1);
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r16.grid_span);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0);
} }
function CheckboxWidget_ng_container_4_ng_container_2_div_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 15);
    ɵngcc0.ɵɵelementStart(1, "label", 16);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r19 = ctx.$implicit;
    const ctx_r17 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵproperty("nzSpan", ctx_r17.grid_span);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzValue", i_r19.value)("ngModel", i_r19.checked)("nzDisabled", i_r19.disabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(i_r19.label);
} }
function CheckboxWidget_ng_container_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    const _r21 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "nz-checkbox-wrapper", 11);
    ɵngcc0.ɵɵlistener("nzOnChange", function CheckboxWidget_ng_container_4_ng_container_2_Template_nz_checkbox_wrapper_nzOnChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r20 = ɵngcc0.ɵɵnextContext(2); return ctx_r20.groupInGridChange($event); });
    ɵngcc0.ɵɵelementStart(2, "div", 12);
    ɵngcc0.ɵɵtemplate(3, CheckboxWidget_ng_container_4_ng_container_2_div_3_Template, 2, 2, "div", 13);
    ɵngcc0.ɵɵtemplate(4, CheckboxWidget_ng_container_4_ng_container_2_div_4_Template, 3, 5, "div", 14);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r12.ui.checkAll);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r12.data);
} }
function CheckboxWidget_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, CheckboxWidget_ng_container_4_ng_container_1_Template, 3, 2, "ng-container", 2);
    ɵngcc0.ɵɵtemplate(2, CheckboxWidget_ng_container_4_ng_container_2_Template, 5, 2, "ng-container", 2);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.grid_span === 0);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r3.grid_span !== 0);
} }
function CustomWidget_ng_template_1_Template(rf, ctx) { }
const _c2 = function (a0, a1, a2) { return { $implicit: a0, schema: a1, ui: a2 }; };
function DateWidget_nz_year_picker_2_Template(rf, ctx) { if (rf & 1) {
    const _r6 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-year-picker", 6);
    ɵngcc0.ɵɵlistener("ngModelChange", function DateWidget_nz_year_picker_2_Template_nz_year_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.displayValue = $event; })("ngModelChange", function DateWidget_nz_year_picker_2_Template_nz_year_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7._change($event); })("nzOnOpenChange", function DateWidget_nz_year_picker_2_Template_nz_year_picker_nzOnOpenChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8._openChange($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzId", ctx_r0.id)("nzDisabled", ctx_r0.disabled)("nzSize", ctx_r0.ui.size)("nzFormat", ctx_r0.displayFormat)("ngModel", ctx_r0.displayValue)("nzAllowClear", ctx_r0.i.allowClear)("ngClass", ctx_r0.ui.className)("nzDisabledDate", ctx_r0.ui.disabledDate)("nzLocale", ctx_r0.ui.locale)("nzPlaceHolder", ctx_r0.ui.placeholder)("nzPopupStyle", ctx_r0.ui.popupStyle)("nzDropdownClassName", ctx_r0.ui.dropdownClassName)("nzRenderExtraFooter", ctx_r0.ui.renderExtraFooter)("nzInputReadOnly", ctx_r0.ui.inputReadOnly)("nzInline", ctx_r0.ui.inline);
} }
function DateWidget_nz_month_picker_3_Template(rf, ctx) { if (rf & 1) {
    const _r10 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-month-picker", 6);
    ɵngcc0.ɵɵlistener("ngModelChange", function DateWidget_nz_month_picker_3_Template_nz_month_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.displayValue = $event; })("ngModelChange", function DateWidget_nz_month_picker_3_Template_nz_month_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11._change($event); })("nzOnOpenChange", function DateWidget_nz_month_picker_3_Template_nz_month_picker_nzOnOpenChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12._openChange($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzId", ctx_r1.id)("nzDisabled", ctx_r1.disabled)("nzSize", ctx_r1.ui.size)("nzFormat", ctx_r1.displayFormat)("ngModel", ctx_r1.displayValue)("nzAllowClear", ctx_r1.i.allowClear)("ngClass", ctx_r1.ui.className)("nzDisabledDate", ctx_r1.ui.disabledDate)("nzLocale", ctx_r1.ui.locale)("nzPlaceHolder", ctx_r1.ui.placeholder)("nzPopupStyle", ctx_r1.ui.popupStyle)("nzDropdownClassName", ctx_r1.ui.dropdownClassName)("nzRenderExtraFooter", ctx_r1.ui.renderExtraFooter)("nzInputReadOnly", ctx_r1.ui.inputReadOnly)("nzInline", ctx_r1.ui.inline);
} }
function DateWidget_nz_week_picker_4_Template(rf, ctx) { if (rf & 1) {
    const _r14 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-week-picker", 7);
    ɵngcc0.ɵɵlistener("ngModelChange", function DateWidget_nz_week_picker_4_Template_nz_week_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.displayValue = $event; })("ngModelChange", function DateWidget_nz_week_picker_4_Template_nz_week_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15._change($event); })("nzOnOpenChange", function DateWidget_nz_week_picker_4_Template_nz_week_picker_nzOnOpenChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16._openChange($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzId", ctx_r2.id)("nzDisabled", ctx_r2.disabled)("nzSize", ctx_r2.ui.size)("nzFormat", ctx_r2.displayFormat)("ngModel", ctx_r2.displayValue)("nzAllowClear", ctx_r2.i.allowClear)("ngClass", ctx_r2.ui.className)("nzDisabledDate", ctx_r2.ui.disabledDate)("nzLocale", ctx_r2.ui.locale)("nzPlaceHolder", ctx_r2.ui.placeholder)("nzPopupStyle", ctx_r2.ui.popupStyle)("nzDropdownClassName", ctx_r2.ui.dropdownClassName)("nzInputReadOnly", ctx_r2.ui.inputReadOnly)("nzInline", ctx_r2.ui.inline);
} }
function DateWidget_nz_range_picker_5_Template(rf, ctx) { if (rf & 1) {
    const _r18 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-range-picker", 8);
    ɵngcc0.ɵɵlistener("ngModelChange", function DateWidget_nz_range_picker_5_Template_nz_range_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.displayValue = $event; })("ngModelChange", function DateWidget_nz_range_picker_5_Template_nz_range_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19._change($event); })("nzOnOpenChange", function DateWidget_nz_range_picker_5_Template_nz_range_picker_nzOnOpenChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20._openChange($event); })("nzOnOk", function DateWidget_nz_range_picker_5_Template_nz_range_picker_nzOnOk_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21._ok($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzId", ctx_r3.id)("nzDisabled", ctx_r3.disabled)("nzSize", ctx_r3.ui.size)("nzFormat", ctx_r3.displayFormat)("ngModel", ctx_r3.displayValue)("nzAllowClear", ctx_r3.i.allowClear)("ngClass", ctx_r3.ui.className)("nzDisabledDate", ctx_r3.ui.disabledDate)("nzLocale", ctx_r3.ui.locale)("nzPlaceHolder", ctx_r3.ui.placeholder)("nzPopupStyle", ctx_r3.ui.popupStyle)("nzDropdownClassName", ctx_r3.ui.dropdownClassName)("nzDisabledTime", ctx_r3.ui.disabledTime)("nzRenderExtraFooter", ctx_r3.ui.renderExtraFooter)("nzRanges", ctx_r3.ui.ranges)("nzShowTime", ctx_r3.ui.showTime)("nzMode", ctx_r3.ui.rangeMode)("nzInputReadOnly", ctx_r3.ui.inputReadOnly)("nzInline", ctx_r3.ui.inline);
} }
function DateWidget_nz_date_picker_6_Template(rf, ctx) { if (rf & 1) {
    const _r23 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-date-picker", 9);
    ɵngcc0.ɵɵlistener("ngModelChange", function DateWidget_nz_date_picker_6_Template_nz_date_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r22 = ɵngcc0.ɵɵnextContext(); return ctx_r22.displayValue = $event; })("ngModelChange", function DateWidget_nz_date_picker_6_Template_nz_date_picker_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24._change($event); })("nzOnOpenChange", function DateWidget_nz_date_picker_6_Template_nz_date_picker_nzOnOpenChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25._openChange($event); })("nzOnOk", function DateWidget_nz_date_picker_6_Template_nz_date_picker_nzOnOk_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26._ok($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzId", ctx_r4.id)("nzDisabled", ctx_r4.disabled)("nzSize", ctx_r4.ui.size)("nzFormat", ctx_r4.displayFormat)("ngModel", ctx_r4.displayValue)("nzAllowClear", ctx_r4.i.allowClear)("ngClass", ctx_r4.ui.className)("nzDisabledDate", ctx_r4.ui.disabledDate)("nzLocale", ctx_r4.ui.locale)("nzPlaceHolder", ctx_r4.ui.placeholder)("nzPopupStyle", ctx_r4.ui.popupStyle)("nzDropdownClassName", ctx_r4.ui.dropdownClassName)("nzDisabledTime", ctx_r4.ui.disabledTime)("nzRenderExtraFooter", ctx_r4.ui.renderExtraFooter)("nzShowTime", ctx_r4.ui.showTime)("nzShowToday", ctx_r4.i.showToday)("nzInputReadOnly", ctx_r4.ui.inputReadOnly)("nzInline", ctx_r4.ui.inline);
} }
const _c3 = ["mentions"];
function MentionWidget_input_3_Template(rf, ctx) { if (rf & 1) {
    const _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "input", 5);
    ɵngcc0.ɵɵlistener("ngModelChange", function MentionWidget_input_3_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.setValue($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("disabled", ctx_r1.disabled)("nzSize", ctx_r1.ui.size)("ngModel", ctx_r1.value);
    ɵngcc0.ɵɵattribute("id", ctx_r1.id)("disabled", ctx_r1.disabled)("maxLength", ctx_r1.schema.maxLength || null)("placeholder", ctx_r1.ui.placeholder);
} }
function MentionWidget_textarea_4_Template(rf, ctx) { if (rf & 1) {
    const _r6 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "textarea", 6);
    ɵngcc0.ɵɵlistener("ngModelChange", function MentionWidget_textarea_4_Template_textarea_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.setValue($event); });
    ɵngcc0.ɵɵtext(1, "    ");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("disabled", ctx_r2.disabled)("nzSize", ctx_r2.ui.size)("ngModel", ctx_r2.value)("nzAutosize", ctx_r2.i.autosize);
    ɵngcc0.ɵɵattribute("id", ctx_r2.id)("disabled", ctx_r2.disabled)("maxLength", ctx_r2.schema.maxLength || null)("placeholder", ctx_r2.ui.placeholder);
} }
const _c4 = function (a0) { return { "ant-input-number__hide-step": a0 }; };
function ObjectWidget_ng_template_0_div_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 5);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r4.title);
} }
function ObjectWidget_ng_template_0_ng_container_1_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 9);
    ɵngcc0.ɵɵelement(2, "sf-item", 10);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r9 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzSpan", i_r9.grid.span)("nzOffset", i_r9.grid.offset)("nzXs", i_r9.grid.xs)("nzSm", i_r9.grid.sm)("nzMd", i_r9.grid.md)("nzLg", i_r9.grid.lg)("nzXl", i_r9.grid.xl)("nzXXl", i_r9.grid.xxl);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("formProperty", i_r9.property)("fixed-label", i_r9.spanLabelFixed);
} }
function ObjectWidget_ng_template_0_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ObjectWidget_ng_template_0_ng_container_1_ng_container_2_ng_container_1_Template, 3, 10, "ng-container", 8);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r9 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", i_r9.property.visible && i_r9.show);
} }
function ObjectWidget_ng_template_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "div", 6);
    ɵngcc0.ɵɵtemplate(2, ObjectWidget_ng_template_0_ng_container_1_ng_container_2_Template, 2, 1, "ng-container", 7);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzGutter", ctx_r5.grid.gutter);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r5.list);
} }
function ObjectWidget_ng_template_0_ng_template_2_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "sf-item", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r13 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("formProperty", i_r13.property)("fixed-label", i_r13.spanLabelFixed);
} }
function ObjectWidget_ng_template_0_ng_template_2_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ObjectWidget_ng_template_0_ng_template_2_ng_container_0_ng_container_1_Template, 2, 2, "ng-container", 8);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r13 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", i_r13.property.visible && i_r13.show);
} }
function ObjectWidget_ng_template_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, ObjectWidget_ng_template_0_ng_template_2_ng_container_0_Template, 2, 1, "ng-container", 7);
} if (rf & 2) {
    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r7.list);
} }
function ObjectWidget_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵtemplate(0, ObjectWidget_ng_template_0_div_0_Template, 2, 1, "div", 2);
    ɵngcc0.ɵɵtemplate(1, ObjectWidget_ng_template_0_ng_container_1_Template, 3, 2, "ng-container", 3);
    ɵngcc0.ɵɵtemplate(2, ObjectWidget_ng_template_0_ng_template_2_Template, 1, 1, "ng-template", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);
} if (rf & 2) {
    const noTitle_r3 = ctx.$implicit;
    const _r6 = ɵngcc0.ɵɵreference(3);
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngIf", !noTitle_r3 && ctx_r1.title);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.grid)("ngIfElse", _r6);
} }
function ObjectWidget_nz_card_2_ng_template_1_i_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 16);
} if (rf & 2) {
    const ctx_r19 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵproperty("nzType", ctx_r19.expand ? "down" : "up");
} }
function ObjectWidget_nz_card_2_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r21 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 14);
    ɵngcc0.ɵɵlistener("click", function ObjectWidget_nz_card_2_ng_template_1_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r20 = ɵngcc0.ɵɵnextContext(2); return ctx_r20.changeExpand(); });
    ɵngcc0.ɵɵtemplate(1, ObjectWidget_nz_card_2_ng_template_1_i_1_Template, 1, 1, "i", 15);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r17 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵclassProp("point", ctx_r17.showExpand);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r17.showExpand);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r17.title, " ");
} }
function ObjectWidget_nz_card_2_ng_template_3_Template(rf, ctx) { }
const _c5 = function () { return []; };
const _c6 = function () { return { $implicit: true }; };
function ObjectWidget_nz_card_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nz-card", 11);
    ɵngcc0.ɵɵtemplate(1, ObjectWidget_nz_card_2_ng_template_1_Template, 3, 4, "ng-template", null, 12, ɵngcc0.ɵɵtemplateRefExtractor);
    ɵngcc0.ɵɵtemplate(3, ObjectWidget_nz_card_2_ng_template_3_Template, 0, 0, "ng-template", 13);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r16 = ɵngcc0.ɵɵreference(2);
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    const _r0 = ɵngcc0.ɵɵreference(1);
    ɵngcc0.ɵɵclassProp("sf__object-card-fold", !ctx_r2.expand);
    ɵngcc0.ɵɵproperty("nzTitle", _r16)("nzExtra", ctx_r2.ui.cardExtra)("nzSize", ctx_r2.ui.cardSize || "small")("nzActions", ctx_r2.ui.cardActions || ɵngcc0.ɵɵpureFunction0(11, _c5))("nzBodyStyle", ctx_r2.ui.cardBodyStyle)("nzBordered", ctx_r2.ui.cardBordered || true)("nzBorderless", ctx_r2.ui.cardBorderless || false);
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction0(12, _c6));
} }
function RadioWidget_ng_container_2_label_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "label", 4);
    ɵngcc0.ɵɵelement(1, "span", 5);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const option_r3 = ctx.$implicit;
    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("nzValue", option_r3.value)("nzDisabled", ctx_r2.disabled || option_r3.disabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerHTML", option_r3.label, ɵngcc0.ɵɵsanitizeHtml);
} }
function RadioWidget_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, RadioWidget_ng_container_2_label_1_Template, 2, 3, "label", 3);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.data);
} }
function RadioWidget_ng_container_3_label_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "label", 7);
    ɵngcc0.ɵɵelement(1, "span", 5);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const option_r5 = ctx.$implicit;
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("nzValue", option_r5.value)("nzDisabled", ctx_r4.disabled || option_r5.disabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerHTML", option_r5.label, ɵngcc0.ɵɵsanitizeHtml);
} }
function RadioWidget_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, RadioWidget_ng_container_3_label_1_Template, 2, 3, "label", 6);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r1.data);
} }
function RateWidget_span_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 3);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r0.text);
} }
function SelectWidget_ng_container_2_nz_option_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nz-option", 5);
} if (rf & 2) {
    const o_r4 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("nzLabel", o_r4.label)("nzValue", o_r4.value)("nzDisabled", o_r4.disabled);
} }
function SelectWidget_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, SelectWidget_ng_container_2_nz_option_1_Template, 1, 3, "nz-option", 4);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r0.data);
} }
function SelectWidget_ng_container_3_nz_option_group_1_nz_option_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "nz-option", 5);
} if (rf & 2) {
    const o_r8 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("nzLabel", o_r8.label)("nzValue", o_r8.value)("nzDisabled", o_r8.disabled);
} }
function SelectWidget_ng_container_3_nz_option_group_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nz-option-group", 7);
    ɵngcc0.ɵɵtemplate(1, SelectWidget_ng_container_3_nz_option_group_1_nz_option_1_Template, 1, 3, "nz-option", 4);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r6 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("nzLabel", i_r6.label);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", i_r6.children);
} }
function SelectWidget_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, SelectWidget_ng_container_3_nz_option_group_1_Template, 2, 2, "nz-option-group", 6);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r1.data);
} }
function SelectWidget_nz_option_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "nz-option", 8);
    ɵngcc0.ɵɵelement(1, "i", 9);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1(" ", ctx_r2.ui.searchLoadingText, " ");
} }
function StringWidget_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    const _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "input", 3);
    ɵngcc0.ɵɵlistener("ngModelChange", function StringWidget_ng_template_1_Template_input_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.change($event); })("keyup.enter", function StringWidget_ng_template_1_Template_input_keyup_enter_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.enter($event); })("focus", function StringWidget_ng_template_1_Template_input_focus_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.focus($event); })("blur", function StringWidget_ng_template_1_Template_input_blur_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.blur($event); });
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("disabled", ctx_r1.disabled)("nzSize", ctx_r1.ui.size)("nzBorderless", ctx_r1.ui.borderless)("ngModel", ctx_r1.value);
    ɵngcc0.ɵɵattribute("id", ctx_r1.id)("disabled", ctx_r1.disabled)("maxLength", ctx_r1.schema.maxLength || null)("type", ctx_r1.ui.type || "text")("placeholder", ctx_r1.ui.placeholder)("autocomplete", ctx_r1.ui.autocomplete)("autoFocus", ctx_r1.ui.autofocus);
} }
function StringWidget_ng_container_3_ng_template_2_Template(rf, ctx) { }
function StringWidget_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "nz-input-group", 4);
    ɵngcc0.ɵɵtemplate(2, StringWidget_ng_container_3_ng_template_2_Template, 0, 0, "ng-template", 5);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    const _r0 = ɵngcc0.ɵɵreference(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("nzAddOnBefore", ctx_r2.ui.addOnBefore)("nzAddOnAfter", ctx_r2.ui.addOnAfter)("nzAddOnBeforeIcon", ctx_r2.ui.addOnBeforeIcon)("nzAddOnAfterIcon", ctx_r2.ui.addOnAfterIcon)("nzPrefix", ctx_r2.ui.prefix)("nzPrefixIcon", ctx_r2.ui.prefixIcon)("nzSuffix", ctx_r2.ui.suffix)("nzSuffixIcon", ctx_r2.ui.suffixIcon);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0);
} }
function TagWidget_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "i", 3);
} if (rf & 2) {
    const i_r3 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("nzType", i_r3.type)("nzTheme", i_r3.theme)("nzTwotoneColor", i_r3.twotoneColor)("nzRotate", i_r3.rotate)("nzIconfont", i_r3.iconfont)("nzSpin", i_r3.spin);
} }
function TagWidget_nz_tag_3_ng_container_1_ng_template_1_Template(rf, ctx) { }
const _c7 = function (a0) { return { $implicit: a0 }; };
function TagWidget_nz_tag_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, TagWidget_nz_tag_3_ng_container_1_ng_template_1_Template, 0, 0, "ng-template", 6);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r4 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵnextContext();
    const _r0 = ɵngcc0.ɵɵreference(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction1(2, _c7, i_r4.prefixIcon));
} }
function TagWidget_nz_tag_3_ng_container_4_ng_template_1_Template(rf, ctx) { }
function TagWidget_nz_tag_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, TagWidget_nz_tag_3_ng_container_4_ng_template_1_Template, 0, 0, "ng-template", 6);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const i_r4 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵnextContext();
    const _r0 = ɵngcc0.ɵɵreference(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", _r0)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction1(2, _c7, i_r4.suffixIcon));
} }
function TagWidget_nz_tag_3_Template(rf, ctx) { if (rf & 1) {
    const _r12 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "nz-tag", 4);
    ɵngcc0.ɵɵlistener("nzOnClose", function TagWidget_nz_tag_3_Template_nz_tag_nzOnClose_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11._close($event); })("nzCheckedChange", function TagWidget_nz_tag_3_Template_nz_tag_nzCheckedChange_0_listener() { const restoredCtx = ɵngcc0.ɵɵrestoreView(_r12); const i_r4 = restoredCtx.$implicit; const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.onChange(i_r4); });
    ɵngcc0.ɵɵtemplate(1, TagWidget_nz_tag_3_ng_container_1_Template, 2, 4, "ng-container", 5);
    ɵngcc0.ɵɵelementStart(2, "span");
    ɵngcc0.ɵɵtext(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(4, TagWidget_nz_tag_3_ng_container_4_Template, 2, 4, "ng-container", 5);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r4 = ctx.$implicit;
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("nzMode", ctx_r2.ui.mode || "checkable")("nzChecked", i_r4.checked);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", i_r4.prefixIcon);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate(i_r4.label);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", i_r4.suffixIcon);
} }
function UploadWidget_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelement(1, "i", 5);
    ɵngcc0.ɵɵelement(2, "div", 6);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r0.i.text, ɵngcc0.ɵɵsanitizeHtml);
} }
function UploadWidget_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "p", 7);
    ɵngcc0.ɵɵelement(2, "i", 8);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(3, "p", 6);
    ɵngcc0.ɵɵelement(4, "p", 9);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r1.i.text, ɵngcc0.ɵɵsanitizeHtml);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r1.i.hint, ɵngcc0.ɵɵsanitizeHtml);
} }
function UploadWidget_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "button", 10);
    ɵngcc0.ɵɵelement(2, "i", 11);
    ɵngcc0.ɵɵelement(3, "span", 12);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(3);
    ɵngcc0.ɵɵproperty("innerHTML", ctx_r2.i.text, ɵngcc0.ɵɵsanitizeHtml);
} }
const SF_DEFAULT_CONFIG = {
    formatMap: {
        'date-time': {
            widget: 'date',
            showTime: true,
            format: `yyyy-MM-dd'T'HH:mm:ss.SSSxxx`
        },
        date: { widget: 'date', format: 'yyyy-MM-dd' },
        'full-date': { widget: 'date', format: 'yyyy-MM-dd' },
        time: { widget: 'time', format: 'HH:mm:ss.SSSxxx' },
        'full-time': { widget: 'time' },
        week: { widget: 'date', mode: 'week', format: 'yyyy-ww' },
        month: { widget: 'date', mode: 'month', format: 'yyyy-MM' },
        uri: { widget: 'upload' },
        email: { widget: 'autocomplete', type: 'email' },
        color: { widget: 'string', type: 'color' },
        '': { widget: 'string' }
    },
    ingoreKeywords: ['type', 'enum'],
    liveValidate: true,
    autocomplete: null,
    firstVisual: false,
    onlyVisual: false,
    errors: {},
    ui: {},
    button: { submit_type: 'primary', reset_type: 'default' },
    uiDateStringFormat: 'yyyy-MM-dd HH:mm:ss',
    uiDateNumberFormat: 'T',
    uiTimeStringFormat: 'HH:mm:ss',
    uiTimeNumberFormat: 'T',
    uiEmailSuffixes: ['qq.com', '163.com', 'gmail.com', '126.com', 'aliyun.com']
};
function mergeConfig(srv) {
    return srv.merge('sf', SF_DEFAULT_CONFIG);
}

const SF_SEQ = '/';

function isBlank(o) {
    return o == null;
}
function toBool(value, defaultValue) {
    return toBoolean(value, defaultValue);
}
function di(ui, ...args) {
    if (ui.debug) {
        console.warn(...args);
    }
}
/** 根据 `$ref` 查找 `definitions` */
function findSchemaDefinition($ref, definitions) {
    const match = /^#\/definitions\/(.*)$/.exec($ref);
    if (match && match[1]) {
        // parser JSON Pointer
        const parts = match[1].split(SF_SEQ);
        let current = definitions;
        for (let part of parts) {
            part = part.replace(/~1/g, SF_SEQ).replace(/~0/g, '~');
            if (current.hasOwnProperty(part)) {
                current = current[part];
            }
            else {
                throw new Error(`Could not find a definition for ${$ref}.`);
            }
        }
        return current;
    }
    throw new Error(`Could not find a definition for ${$ref}.`);
}
/**
 * 取回Schema，并处理 `$ref` 的关系
 */
function retrieveSchema(schema, definitions = {}) {
    if (schema.hasOwnProperty('$ref')) {
        const $refSchema = findSchemaDefinition(schema.$ref, definitions);
        // remove $ref property
        const { $ref } = schema, localSchema = __rest(schema, ["$ref"]);
        return retrieveSchema(Object.assign(Object.assign({}, $refSchema), localSchema), definitions);
    }
    return schema;
}
function resolveIfSchema(_schema, _ui) {
    const fn = (schema, ui) => {
        resolveIf(schema, ui);
        Object.keys(schema.properties).forEach(key => {
            const property = schema.properties[key];
            const uiKey = `$${key}`;
            if (property.items) {
                fn(property.items, ui[uiKey].$items);
            }
            if (property.properties) {
                fn(property, ui[uiKey]);
            }
        });
    };
    fn(_schema, _ui);
}
function resolveIf(schema, ui) {
    if (!(schema.hasOwnProperty('if') && schema.hasOwnProperty('then')))
        return null;
    if (!schema.if.properties)
        throw new Error(`if: does not contain 'properties'`);
    const allKeys = Object.keys(schema.properties);
    const ifKeys = Object.keys(schema.if.properties);
    detectKey(allKeys, ifKeys);
    detectKey(allKeys, schema.then.required);
    schema.required = schema.required.concat(schema.then.required);
    const hasElse = schema.hasOwnProperty('else');
    if (hasElse) {
        detectKey(allKeys, schema.else.required);
        schema.required = schema.required.concat(schema.else.required);
    }
    const visibleIf = {};
    const visibleElse = {};
    ifKeys.forEach(key => {
        const cond = schema.if.properties[key].enum;
        visibleIf[key] = cond;
        if (hasElse)
            visibleElse[key] = (value) => !cond.includes(value);
    });
    schema.then.required.forEach(key => (ui[`$${key}`].visibleIf = visibleIf));
    if (hasElse) {
        schema.else.required.forEach(key => (ui[`$${key}`].visibleIf = visibleElse));
    }
    return schema;
}
function detectKey(keys, detectKeys) {
    detectKeys.forEach(key => {
        if (!keys.includes(key)) {
            throw new Error(`if: properties does not contain '${key}'`);
        }
    });
}
function orderProperties(properties, order) {
    if (!Array.isArray(order))
        return properties;
    const arrayToHash = (arr) => arr.reduce((prev, curr) => {
        prev[curr] = true;
        return prev;
    }, {});
    const errorPropList = (arr) => `property [${arr.join(`', '`)}]`;
    const propertyHash = arrayToHash(properties);
    const orderHash = arrayToHash(order);
    const extraneous = order.filter(prop => prop !== '*' && !propertyHash[prop]);
    if (extraneous.length) {
        throw new Error(`ui schema order list contains extraneous ${errorPropList(extraneous)}`);
    }
    const rest = properties.filter(prop => !orderHash[prop]);
    const restIndex = order.indexOf('*');
    if (restIndex === -1) {
        if (rest.length) {
            throw new Error(`ui schema order list does not contain ${errorPropList(rest)}`);
        }
        return order;
    }
    if (restIndex !== order.lastIndexOf('*')) {
        throw new Error('ui schema order list contains more than one wildcard item');
    }
    const complete = [...order];
    complete.splice(restIndex, 1, ...rest);
    return complete;
}
function getEnum(list, formData, readOnly) {
    if (isBlank(list) || !Array.isArray(list) || list.length === 0)
        return [];
    if (typeof list[0] !== 'object') {
        list = list.map((item) => {
            return { label: item, value: item };
        });
    }
    if (formData) {
        if (!Array.isArray(formData))
            formData = [formData];
        list.forEach((item) => {
            if (~formData.indexOf(item.value))
                item.checked = true;
        });
    }
    // fix disabled status
    if (readOnly) {
        list.forEach((item) => (item.disabled = true));
    }
    return list;
}
function getCopyEnum(list, formData, readOnly) {
    return getEnum(deepCopy(list || []), formData, readOnly);
}
function getData(schema, ui, formData, asyncArgs) {
    if (typeof ui.asyncData === 'function') {
        return ui.asyncData(asyncArgs).pipe(map((list) => getEnum(list, formData, schema.readOnly)));
    }
    return of(getCopyEnum(schema.enum, formData, schema.readOnly));
}
/**
 * Whether to using date-fns to format a date
 */
function isDateFns(srv) {
    if (!srv)
        return false;
    const data = srv.getDateLocale();
    // Compatible date-fns v1.x & v2.x
    return data != null && !!data.formatDistance; // (!!data.distanceInWords || !!data.formatDistance);
}

class FormProperty {
    constructor(schemaValidatorFactory, schema, ui, formData, parent, path, _options) {
        this._options = _options;
        this._errors = null;
        this._valueChanges = new BehaviorSubject({ path: null, pathValue: null, value: null });
        this._errorsChanges = new BehaviorSubject(null);
        this._visible = true;
        this._visibilityChanges = new BehaviorSubject(true);
        this._objErrors = {};
        this._value = null;
        this.schema = schema;
        this.ui = ui;
        this.schemaValidator = schemaValidatorFactory.createValidatorFn(schema, {
            ingoreKeywords: this.ui.ingoreKeywords,
            debug: ui.debug
        });
        this.formData = formData || schema.default;
        this._parent = parent;
        if (parent) {
            this._root = parent.root;
        }
        else {
            this._root = this;
        }
        this.path = path;
    }
    get valueChanges() {
        return this._valueChanges;
    }
    get errorsChanges() {
        return this._errorsChanges;
    }
    get type() {
        return this.schema.type;
    }
    get parent() {
        return this._parent;
    }
    get root() {
        return this._root;
    }
    get value() {
        return this._value;
    }
    get errors() {
        return this._errors;
    }
    get visible() {
        return this._visible;
    }
    get valid() {
        return this._errors === null || this._errors.length === 0;
    }
    get options() {
        return this._options;
    }
    /**
     * 更新值且校验数据
     */
    updateValueAndValidity(options) {
        options = Object.assign({ onlySelf: false, emitValidator: true, emitValueEvent: true, updatePath: '', updateValue: null }, options);
        this._updateValue();
        if (options.emitValueEvent) {
            options.updatePath = options.updatePath || this.path;
            options.updateValue = options.updateValue == null ? this.value : options.updateValue;
            this.valueChanges.next({ value: this.value, path: options.updatePath, pathValue: options.updateValue });
        }
        // `emitValidator` 每一次数据变更已经包含完整错误链路，后续父节点数据变更无须再触发校验
        if (options.emitValidator && this.ui.liveValidate === true) {
            this._runValidation();
        }
        if (this.parent && !options.onlySelf) {
            this.parent.updateValueAndValidity(Object.assign(Object.assign({}, options), { emitValidator: false }));
        }
    }
    /** 根据路径搜索表单属性 */
    searchProperty(path) {
        // eslint-disable-next-line @typescript-eslint/no-this-alias
        let prop = this;
        let base = null;
        let result = null;
        if (path[0] === SF_SEQ) {
            base = this.findRoot();
            result = base.getProperty(path.substr(1));
        }
        else {
            while (result === null && prop.parent !== null) {
                prop = base = prop.parent;
                result = base.getProperty(path);
            }
        }
        return result;
    }
    /** 查找根表单属性 */
    findRoot() {
        // eslint-disable-next-line @typescript-eslint/no-this-alias
        let property = this;
        while (property.parent !== null) {
            property = property.parent;
        }
        return property;
    }
    // #region process errors
    isEmptyData(value) {
        if (isBlank(value))
            return true;
        switch (this.type) {
            case 'string':
                return `${value}`.length === 0;
        }
        return false;
    }
    /**
     * @internal
     */
    _runValidation() {
        let errors;
        // The definition of some rules:
        // 1. Should not ajv validator when is empty data and required fields
        // 2. Should not ajv validator when is empty data
        const isEmpty = this.isEmptyData(this._value);
        if (isEmpty && this.ui._required) {
            errors = [{ keyword: 'required' }];
        }
        else if (isEmpty) {
            errors = [];
        }
        else {
            errors = this.schemaValidator(this._value) || [];
        }
        const customValidator = this.ui.validator;
        if (typeof customValidator === 'function') {
            const customErrors = customValidator(this.value, this, this.findRoot());
            if (customErrors instanceof Observable) {
                customErrors.subscribe(res => {
                    this.setCustomErrors(errors, res);
                    this.widget.detectChanges();
                });
                return;
            }
            this.setCustomErrors(errors, customErrors);
            return;
        }
        this._errors = errors;
        this.setErrors(this._errors);
    }
    setCustomErrors(errors, list) {
        // fix error format
        const hasCustomError = list != null && list.length > 0;
        if (hasCustomError) {
            list.forEach(err => {
                if (!err.message) {
                    throw new Error(`The custom validator must contain a 'message' attribute to viewed error text`);
                }
                err._custom = true;
            });
        }
        this._errors = this.mergeErrors(errors, list);
        this.setErrors(this._errors);
    }
    mergeErrors(errors, newErrors) {
        if (newErrors) {
            if (Array.isArray(newErrors)) {
                errors = errors.concat(...newErrors);
            }
            else {
                errors.push(newErrors);
            }
        }
        return errors;
    }
    setErrors(errors, emitFormat = true) {
        if (emitFormat && errors && !this.ui.onlyVisual) {
            const l = (this.widget && this.widget.l.error) || {};
            errors = errors.map((err) => {
                let message = err._custom === true && err.message
                    ? err.message
                    : (this.ui.errors || {})[err.keyword] || this._options.errors[err.keyword] || l[err.keyword] || ``;
                if (message && typeof message === 'function') {
                    message = message(err);
                }
                if (message) {
                    if (~message.indexOf('{')) {
                        message = message.replace(/{([\.a-zA-Z0-9]+)}/g, (_v, key) => err.params[key] || '');
                    }
                    err.message = message;
                }
                return err;
            });
        }
        this._errors = errors;
        this._errorsChanges.next(errors);
        // Should send errors to parent field
        if (this._parent) {
            this._parent.setParentAndPlatErrors(errors, this.path);
        }
    }
    setParentAndPlatErrors(errors, path) {
        this._objErrors[path] = errors;
        const platErrors = [];
        Object.keys(this._objErrors).forEach(p => {
            const property = this.searchProperty(p);
            if (property && !property.visible)
                return;
            platErrors.push(...this._objErrors[p]);
        });
        this.setErrors(platErrors, false);
    }
    // #endregion
    // #region condition
    /**
     * Set the hide or display of widget
     * 设置小部件的隐藏或显示
     */
    setVisible(visible) {
        this._visible = visible;
        this._visibilityChanges.next(visible);
        // 渲染时需要重新触发 reset
        if (visible) {
            this.resetValue(this.value, true);
        }
    }
    _bindVisibility() {
        const visibleIf = this.ui.visibleIf;
        if (typeof visibleIf === 'object' && Object.keys(visibleIf).length === 0) {
            this.setVisible(false);
        }
        else if (visibleIf !== undefined) {
            const propertiesBinding = [];
            for (const dependencyPath in visibleIf) {
                if (visibleIf.hasOwnProperty(dependencyPath)) {
                    const property = this.searchProperty(dependencyPath);
                    if (property) {
                        const valueCheck = property.valueChanges.pipe(map(res => {
                            const vi = visibleIf[dependencyPath];
                            if (typeof vi === 'function') {
                                return vi(res.value, property);
                            }
                            if (vi.indexOf('$ANY$') !== -1) {
                                return res.value.length > 0;
                            }
                            else {
                                return vi.indexOf(res.value) !== -1;
                            }
                        }));
                        const visibilityCheck = property._visibilityChanges;
                        const and = combineLatest([valueCheck, visibilityCheck]).pipe(map(results => results[0] && results[1]));
                        propertiesBinding.push(and);
                    }
                    else {
                        console.warn(`Can't find property ${dependencyPath} for visibility check of ${this.path}`);
                    }
                }
            }
            combineLatest(propertiesBinding)
                .pipe(map(values => values.indexOf(true) !== -1), distinctUntilChanged())
                .subscribe(visible => this.setVisible(visible));
        }
    }
}
class PropertyGroup extends FormProperty {
    constructor() {
        super(...arguments);
        this.properties = null;
    }
    getProperty(path) {
        const subPathIdx = path.indexOf(SF_SEQ);
        const propertyId = subPathIdx !== -1 ? path.substr(0, subPathIdx) : path;
        let property = this.properties[propertyId];
        if (property !== null && subPathIdx !== -1 && property instanceof PropertyGroup) {
            const subPath = path.substr(subPathIdx + 1);
            property = property.getProperty(subPath);
        }
        return property;
    }
    forEachChild(fn) {
        for (const propertyId in this.properties) {
            if (this.properties.hasOwnProperty(propertyId)) {
                const property = this.properties[propertyId];
                fn(property, propertyId);
            }
        }
    }
    forEachChildRecursive(fn) {
        this.forEachChild(child => {
            fn(child);
            if (child instanceof PropertyGroup) {
                child.forEachChildRecursive(fn);
            }
        });
    }
    _bindVisibility() {
        super._bindVisibility();
        this._bindVisibilityRecursive();
    }
    _bindVisibilityRecursive() {
        this.forEachChildRecursive(property => {
            property._bindVisibility();
        });
    }
    isRoot() {
        return this === this.root;
    }
}

class ObjectProperty extends PropertyGroup {
    constructor(formPropertyFactory, schemaValidatorFactory, schema, ui, formData, parent, path, options) {
        super(schemaValidatorFactory, schema, ui, formData, parent, path, options);
        this.formPropertyFactory = formPropertyFactory;
        this._propertiesId = [];
        this.createProperties();
    }
    get propertiesId() {
        return this._propertiesId;
    }
    createProperties() {
        this.properties = {};
        this._propertiesId = [];
        let orderedProperties;
        try {
            orderedProperties = orderProperties(Object.keys(this.schema.properties), this.ui.order);
        }
        catch (e) {
            console.error(`Invalid ${this.schema.title || 'root'} object field configuration:`, e);
        }
        orderedProperties.forEach(propertyId => {
            this.properties[propertyId] = this.formPropertyFactory.createProperty(this.schema.properties[propertyId], this.ui[`$${propertyId}`], (this.formData || {})[propertyId], this, propertyId);
            this._propertiesId.push(propertyId);
        });
    }
    setValue(value, onlySelf) {
        const properties = this.properties;
        for (const propertyId in value) {
            if (value.hasOwnProperty(propertyId) && properties[propertyId]) {
                properties[propertyId].setValue(value[propertyId], true);
            }
        }
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
    resetValue(value, onlySelf) {
        value = value || this.schema.default || {};
        const properties = this.properties;
        for (const propertyId in this.schema.properties) {
            if (this.schema.properties.hasOwnProperty(propertyId)) {
                properties[propertyId].resetValue(value[propertyId], true);
            }
        }
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
    _hasValue() {
        return this.value != null && !!Object.keys(this.value).length;
    }
    _updateValue() {
        const value = {};
        this.forEachChild((property, propertyId) => {
            if (property.visible && property._hasValue()) {
                value[propertyId] = property.value;
            }
        });
        this._value = value;
    }
}

class ArrayProperty extends PropertyGroup {
    constructor(formPropertyFactory, schemaValidatorFactory, schema, ui, formData, parent, path, options) {
        super(schemaValidatorFactory, schema, ui, formData, parent, path, options);
        this.formPropertyFactory = formPropertyFactory;
        this.properties = [];
    }
    getProperty(path) {
        const subPathIdx = path.indexOf(SF_SEQ);
        const pos = +(subPathIdx !== -1 ? path.substr(0, subPathIdx) : path);
        const list = this.properties;
        if (isNaN(pos) || pos >= list.length) {
            return undefined;
        }
        const subPath = path.substr(subPathIdx + 1);
        return list[pos].getProperty(subPath);
    }
    setValue(value, onlySelf) {
        this.properties = [];
        this.clearErrors();
        this.resetProperties(value);
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
    resetValue(value, onlySelf) {
        this._value = value || this.schema.default || [];
        this.setValue(this._value, onlySelf);
    }
    _hasValue() {
        return true;
    }
    _updateValue() {
        const value = [];
        this.forEachChild((property) => {
            var _a;
            if (property.visible) {
                value.push(Object.assign(Object.assign({}, (((_a = this.widget) === null || _a === void 0 ? void 0 : _a.cleanValue) ? null : property.formData)), property.value));
            }
        });
        this._value = value;
    }
    addProperty(formData) {
        const newProperty = this.formPropertyFactory.createProperty(this.schema.items, this.ui.$items, formData, this);
        this.properties.push(newProperty);
        return newProperty;
    }
    resetProperties(formDatas) {
        for (const item of formDatas) {
            const property = this.addProperty(item);
            property.resetValue(item, true);
        }
    }
    clearErrors(property) {
        (property || this)._objErrors = {};
    }
    // #region actions
    add(formData) {
        const newProperty = this.addProperty(formData);
        newProperty.resetValue(formData, false);
        return newProperty;
    }
    remove(index) {
        const list = this.properties;
        this.clearErrors();
        list.splice(index, 1);
        list.forEach((property, idx) => {
            property.path = [property.parent.path, idx].join(SF_SEQ);
            this.clearErrors(property);
            // TODO: 受限于 sf 的设计思路，对于移除数组项需要重新对每个子项进行校验，防止错误被父级合并后引起始终是错误的现象
            if (property instanceof ObjectProperty) {
                property.forEachChild(p => {
                    p.updateValueAndValidity();
                });
            }
        });
        if (list.length === 0) {
            this.updateValueAndValidity();
        }
    }
}

class AtomicProperty extends FormProperty {
    setValue(value, onlySelf) {
        this._value = value;
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
    resetValue(value, onlySelf) {
        if (value == null) {
            value = this.schema.default !== undefined ? this.schema.default : this.fallbackValue();
        }
        this._value = value;
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
        if (this.widget)
            this.widget.reset(value);
    }
    _hasValue() {
        return this.fallbackValue() !== this.value;
    }
    _updateValue() { }
}

class BooleanProperty extends AtomicProperty {
    fallbackValue() {
        return null;
    }
}

class NumberProperty extends AtomicProperty {
    fallbackValue() {
        return null;
    }
    setValue(value, onlySelf) {
        if (typeof value === 'string') {
            if (value.length) {
                value = value.indexOf('.') > -1 ? parseFloat(value) : parseInt(value, 10);
            }
            else {
                value = undefined;
            }
        }
        this._value = value;
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
}

class StringProperty extends AtomicProperty {
    fallbackValue() {
        return null;
    }
    setValue(value, onlySelf) {
        this._value = value == null ? '' : value;
        this.updateValueAndValidity({ onlySelf, emitValueEvent: true });
    }
}

class FormPropertyFactory {
    constructor(schemaValidatorFactory, cogSrv) {
        this.schemaValidatorFactory = schemaValidatorFactory;
        this.options = mergeConfig(cogSrv);
    }
    createProperty(schema, ui, formData, parent = null, propertyId) {
        let newProperty = null;
        let path = '';
        if (parent) {
            path += parent.path;
            if (parent.parent !== null) {
                path += SF_SEQ;
            }
            switch (parent.type) {
                case 'object':
                    path += propertyId;
                    break;
                case 'array':
                    path += parent.properties.length;
                    break;
                default:
                    throw new Error(`Instanciation of a FormProperty with an unknown parent type: ${parent.type}`);
            }
        }
        else {
            path = SF_SEQ;
        }
        if (schema.$ref) {
            const refSchema = retrieveSchema(schema, parent.root.schema.definitions);
            newProperty = this.createProperty(refSchema, ui, formData, parent, path);
        }
        else {
            // fix required
            if ((propertyId && parent.schema.required.indexOf(propertyId.split(SF_SEQ).pop()) !== -1) ||
                ui.showRequired === true) {
                ui._required = true;
            }
            // fix title
            if (schema.title == null) {
                schema.title = propertyId;
            }
            // fix date
            if ((schema.type === 'string' || schema.type === 'number') && !schema.format && !ui.format) {
                if (ui.widget === 'date')
                    ui._format = schema.type === 'string' ? this.options.uiDateStringFormat : this.options.uiDateNumberFormat;
                else if (ui.widget === 'time')
                    ui._format = schema.type === 'string' ? this.options.uiTimeStringFormat : this.options.uiTimeNumberFormat;
            }
            else {
                ui._format = ui.format;
            }
            switch (schema.type) {
                case 'integer':
                case 'number':
                    newProperty = new NumberProperty(this.schemaValidatorFactory, schema, ui, formData, parent, path, this.options);
                    break;
                case 'string':
                    newProperty = new StringProperty(this.schemaValidatorFactory, schema, ui, formData, parent, path, this.options);
                    break;
                case 'boolean':
                    newProperty = new BooleanProperty(this.schemaValidatorFactory, schema, ui, formData, parent, path, this.options);
                    break;
                case 'object':
                    newProperty = new ObjectProperty(this, this.schemaValidatorFactory, schema, ui, formData, parent, path, this.options);
                    break;
                case 'array':
                    newProperty = new ArrayProperty(this, this.schemaValidatorFactory, schema, ui, formData, parent, path, this.options);
                    break;
                default:
                    throw new TypeError(`Undefined type ${schema.type}`);
            }
        }
        if (newProperty instanceof PropertyGroup) {
            this.initializeRoot(newProperty);
        }
        return newProperty;
    }
    initializeRoot(rootProperty) {
        // rootProperty.init();
        rootProperty._bindVisibility();
    }
}

class TerminatorService {
    constructor() {
        this.onDestroy = new Subject();
    }
    destroy() {
        this.onDestroy.next(true);
    }
}
TerminatorService.ɵfac = function TerminatorService_Factory(t) { return new (t || TerminatorService)(); };
TerminatorService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: TerminatorService, factory: TerminatorService.ɵfac });

class SchemaValidatorFactory {
}
SchemaValidatorFactory.ɵfac = function SchemaValidatorFactory_Factory(t) { return new (t || SchemaValidatorFactory)(); };
SchemaValidatorFactory.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: SchemaValidatorFactory, factory: SchemaValidatorFactory.ɵfac });
class AjvSchemaValidatorFactory extends SchemaValidatorFactory {
    constructor(cogSrv, ngZone) {
        super();
        this.ngZone = ngZone;
        if (!(typeof document === 'object' && !!document)) {
            return;
        }
        this.options = mergeConfig(cogSrv);
        const customOptions = this.options.ajv || {};
        this.ngZone.runOutsideAngular(() => {
            this.ajv = new Ajv(Object.assign(Object.assign({ allErrors: true, loopEnum: 50 }, customOptions), { formats: Object.assign({ 'data-url': /^data:([a-z]+\/[a-z0-9-+.]+)?;name=(.*);base64,(.*)$/, color: REGEX.color, mobile: REGEX.mobile, 'id-card': REGEX.idCard }, customOptions.formats) }));
            addFormats(this.ajv);
        });
    }
    createValidatorFn(schema, extraOptions) {
        const ingoreKeywords = [
            ...this.options.ingoreKeywords,
            ...(extraOptions.ingoreKeywords || [])
        ];
        return (value) => {
            try {
                this.ngZone.runOutsideAngular(() => this.ajv.validate(schema, value));
            }
            catch (e) {
                // swallow errors thrown in ajv due to invalid schemas, these
                // still get displayed
                if (extraOptions.debug) {
                    console.warn(e);
                }
            }
            let errors = this.ajv.errors;
            if (this.options && ingoreKeywords && errors) {
                errors = errors.filter(w => ingoreKeywords.indexOf(w.keyword) === -1);
            }
            return errors;
        };
    }
}
AjvSchemaValidatorFactory.ɵfac = function AjvSchemaValidatorFactory_Factory(t) { return new (t || AjvSchemaValidatorFactory)(ɵngcc0.ɵɵinject(AlainConfigService), ɵngcc0.ɵɵinject(ɵngcc0.NgZone)); };
AjvSchemaValidatorFactory.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: AjvSchemaValidatorFactory, factory: AjvSchemaValidatorFactory.ɵfac });
AjvSchemaValidatorFactory.ctorParameters = () => [
    { type: AlainConfigService, decorators: [{ type: Inject, args: [AlainConfigService,] }] },
    { type: NgZone }
];

class WidgetRegistry {
    constructor() {
        this._widgets = {};
    }
    get widgets() {
        return this._widgets;
    }
    setDefault(widget) {
        this.defaultWidget = widget;
    }
    register(type, widget) {
        this._widgets[type] = widget;
    }
    has(type) {
        return this._widgets.hasOwnProperty(type);
    }
    getType(type) {
        if (this.has(type)) {
            return this._widgets[type];
        }
        return this.defaultWidget;
    }
}
class WidgetFactory {
    constructor(registry, resolver) {
        this.registry = registry;
        this.resolver = resolver;
    }
    createWidget(container, type) {
        if (!this.registry.has(type)) {
            console.warn(`No widget for type "${type}"`);
        }
        const componentClass = this.registry.getType(type);
        const componentFactory = this.resolver.resolveComponentFactory(componentClass);
        return container.createComponent(componentFactory);
    }
}
WidgetFactory.ɵfac = function WidgetFactory_Factory(t) { return new (t || WidgetFactory)(ɵngcc0.ɵɵinject(WidgetRegistry), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver)); };
WidgetFactory.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: WidgetFactory, factory: WidgetFactory.ɵfac });
WidgetFactory.ctorParameters = () => [
    { type: WidgetRegistry },
    { type: ComponentFactoryResolver }
];

function useFactory(schemaValidatorFactory, cogSrv) {
    return new FormPropertyFactory(schemaValidatorFactory, cogSrv);
}
class SFComponent {
    constructor(formPropertyFactory, terminator, dom, cdr, localeSrv, aclSrv, i18nSrv, cogSrv, platform) {
        this.formPropertyFactory = formPropertyFactory;
        this.terminator = terminator;
        this.dom = dom;
        this.cdr = cdr;
        this.localeSrv = localeSrv;
        this.aclSrv = aclSrv;
        this.i18nSrv = i18nSrv;
        this.platform = platform;
        this.unsubscribe$ = new Subject();
        this._renders = new Map();
        this._valid = true;
        this._inited = false;
        this.locale = {};
        this.rootProperty = null;
        // #region fields
        /** 表单布局，等同 `nzLayout`，默认：horizontal */
        this.layout = 'horizontal';
        /**
         * 按钮
         * - 值为 `null` 或 `undefined` 表示手动添加按钮，但保留容器
         * - 值为 `none` 表示手动添加按钮，且不保留容器
         * - 使用 `spanLabelFixed` 固定标签宽度时，若无 `render.class` 则默认为居中状态
         */
        this.button = {};
        /**
         * 是否实时校验，默认：`true`
         * - `true` 每一次都校验
         * - `false` 提交时校验
         */
        this.liveValidate = true;
        /** 立即显示错误视觉 */
        this.firstVisual = true;
        /** 是否只展示错误视觉不显示错误文本 */
        this.onlyVisual = false;
        this.compact = false;
        /**
         * Whether to load status，when `true` reset button is disabled status, submit button is loading status
         */
        this.loading = false;
        this.disabled = false;
        this.noColon = false;
        this.cleanValue = false;
        this.formValueChange = new EventEmitter();
        this.formChange = new EventEmitter();
        this.formSubmit = new EventEmitter();
        this.formReset = new EventEmitter();
        this.formError = new EventEmitter();
        this.options = mergeConfig(cogSrv);
        this.liveValidate = this.options.liveValidate;
        this.firstVisual = this.options.firstVisual;
        this.autocomplete = this.options.autocomplete;
        this.localeSrv.change.pipe(takeUntil(this.unsubscribe$)).subscribe(() => {
            this.locale = this.localeSrv.getData('sf');
            if (this._inited) {
                this.validator({ emitError: false, onlyRoot: false });
                this.coverButtonProperty();
                this.cdr.markForCheck();
            }
        });
        const refSchemas = [
            this.aclSrv ? this.aclSrv.change : null,
            this.i18nSrv ? this.i18nSrv.change : null
        ].filter(o => o != null);
        if (refSchemas.length > 0) {
            merge(...refSchemas)
                .pipe(filter(() => this._inited), takeUntil(this.unsubscribe$))
                .subscribe(() => this.refreshSchema());
        }
    }
    get btnGrid() {
        return this._btn.render.grid;
    }
    /** 表单模式 */
    set mode(value) {
        switch (value) {
            case 'search':
                this.layout = 'inline';
                this.firstVisual = false;
                this.liveValidate = false;
                if (this._btn) {
                    this._btn.submit = this._btn.search;
                }
                break;
            case 'edit':
                this.layout = 'horizontal';
                this.firstVisual = false;
                this.liveValidate = true;
                if (this._btn) {
                    this._btn.submit = this._btn.edit;
                }
                break;
        }
        this._mode = value;
    }
    get mode() {
        return this._mode;
    }
    // #endregion
    /**
     * Whether the form is valid
     *
     * 表单是否有效
     */
    get valid() {
        return this._valid;
    }
    /**
     * The value of the form
     *
     * 表单值
     */
    get value() {
        return this._item;
    }
    /**
     * Get form element property based on [path](https://ng-alain.com/form/qa#path)
     *
     * 根据[路径](https://ng-alain.com/form/qa#path)获取表单元素属性
     */
    getProperty(path) {
        return this.rootProperty.searchProperty(path);
    }
    /**
     * Get element value based on [path](https://ng-alain.com/form/qa#path)
     *
     * 根据[路径](https://ng-alain.com/form/qa#path)获取表单元素值
     */
    getValue(path) {
        return this.getProperty(path).value;
    }
    /**
     * Set form element new value based on [path](https://ng-alain.com/form/qa#path)
     *
     * 根据[路径](https://ng-alain.com/form/qa#path)设置某个表单元素属性值
     */
    setValue(path, value) {
        const item = this.getProperty(path);
        if (!item) {
            throw new Error(`Invalid path: ${path}`);
        }
        item.resetValue(value, false);
        return this;
    }
    onSubmit(e) {
        e.preventDefault();
        e.stopPropagation();
        if (!this.liveValidate)
            this.validator();
        if (!this.valid)
            return;
        this.formSubmit.emit(this.value);
    }
    fanyi(key) {
        return (this.i18nSrv ? this.i18nSrv.fanyi(key) : '') || key;
    }
    inheritUI(ui) {
        ['optionalHelp'].filter(key => !!this._defUi[key]).forEach(key => (ui[key] = Object.assign(Object.assign({}, this._defUi[key]), ui[key])));
    }
    coverProperty() {
        const isHorizontal = this.layout === 'horizontal';
        const _schema = deepCopy(this.schema);
        const { definitions } = _schema;
        const inFn = (schema, _parentSchema, uiSchema, parentUiSchema, uiRes) => {
            if (!Array.isArray(schema.required))
                schema.required = [];
            Object.keys(schema.properties).forEach(key => {
                const uiKey = `$${key}`;
                const property = retrieveSchema(schema.properties[key], definitions);
                const ui = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ widget: property.type }, (property.format && this.options.formatMap[property.format])), (typeof property.ui === 'string' ? { widget: property.ui } : null)), (!property.format && !property.ui && Array.isArray(property.enum) && property.enum.length > 0
                    ? { widget: 'select' }
                    : null)), this._defUi), property.ui), uiSchema[uiKey]);
                // 继承父节点布局属性
                if (isHorizontal) {
                    if (parentUiSchema.spanLabelFixed) {
                        if (!ui.spanLabelFixed) {
                            ui.spanLabelFixed = parentUiSchema.spanLabelFixed;
                        }
                    }
                    else {
                        if (!ui.spanLabel)
                            ui.spanLabel = typeof parentUiSchema.spanLabel === 'undefined' ? 5 : parentUiSchema.spanLabel;
                        if (!ui.spanControl)
                            ui.spanControl = typeof parentUiSchema.spanControl === 'undefined' ? 19 : parentUiSchema.spanControl;
                        if (!ui.offsetControl)
                            ui.offsetControl =
                                typeof parentUiSchema.offsetControl === 'undefined' ? null : parentUiSchema.offsetControl;
                    }
                }
                else {
                    ui.spanLabel = null;
                    ui.spanControl = null;
                    ui.offsetControl = null;
                }
                // 内联强制清理 `grid` 参数
                if (this.layout === 'inline') {
                    delete ui.grid;
                }
                // 非水平布局强制清理 `spanLabelFixed` 值
                if (this.layout !== 'horizontal') {
                    ui.spanLabelFixed = null;
                }
                // 当指定标签为固定宽度时无须指定 `spanLabel`，`spanControl`
                if (ui.spanLabelFixed != null && ui.spanLabelFixed > 0) {
                    ui.spanLabel = null;
                    ui.spanControl = null;
                }
                if (ui.widget === 'date' && ui.end != null) {
                    const dateEndProperty = schema.properties[ui.end];
                    if (dateEndProperty) {
                        dateEndProperty.ui = Object.assign(Object.assign({}, dateEndProperty.ui), { widget: ui.widget, hidden: true });
                    }
                    else {
                        ui.end = null;
                    }
                }
                this.inheritUI(ui);
                if (ui.optionalHelp) {
                    if (typeof ui.optionalHelp === 'string') {
                        ui.optionalHelp = {
                            text: ui.optionalHelp
                        };
                    }
                    const oh = (ui.optionalHelp = Object.assign({ text: '', icon: 'question-circle', placement: 'top', trigger: 'hover', mouseEnterDelay: 0.15, mouseLeaveDelay: 0.1 }, ui.optionalHelp));
                    if (oh.i18n) {
                        oh.text = this.fanyi(oh.i18n);
                    }
                    if (!oh.text) {
                        ui.optionalHelp = undefined;
                    }
                }
                if (ui.i18n) {
                    property.title = this.fanyi(ui.i18n);
                }
                if (ui.descriptionI18n) {
                    property.description = this.fanyi(ui.descriptionI18n);
                }
                if (property.description) {
                    ui._description = this.dom.bypassSecurityTrustHtml(property.description);
                }
                ui.hidden = typeof ui.hidden === 'boolean' ? ui.hidden : false;
                if (ui.hidden === false && ui.acl && this.aclSrv && !this.aclSrv.can(ui.acl)) {
                    ui.hidden = true;
                }
                uiRes[uiKey] = ui;
                delete property.ui;
                if (ui.hidden === true) {
                    const idx = schema.required.indexOf(key);
                    if (idx !== -1) {
                        schema.required.splice(idx, 1);
                    }
                }
                if (property.items) {
                    const uiSchemaInArr = (uiSchema[uiKey] || {}).$items || {};
                    ui.$items = Object.assign(Object.assign(Object.assign({}, property.items.ui), uiSchemaInArr[uiKey]), ui.$items);
                    inFn(property.items, property.items, uiSchemaInArr, ui.$items, ui.$items);
                }
                if (property.properties && Object.keys(property.properties).length) {
                    inFn(property, schema, uiSchema[uiKey] || {}, ui, ui);
                }
            });
        };
        if (this.ui == null)
            this.ui = {};
        this._defUi = Object.assign(Object.assign(Object.assign({ onlyVisual: this.options.onlyVisual, size: this.options.size, liveValidate: this.liveValidate, firstVisual: this.firstVisual }, this.options.ui), _schema.ui), this.ui['*']);
        if (this.onlyVisual === true) {
            this._defUi.onlyVisual = true;
        }
        // 内联强制清理 `grid` 参数
        if (this.layout === 'inline') {
            delete this._defUi.grid;
        }
        // root
        this._ui = Object.assign({}, this._defUi);
        inFn(_schema, _schema, this.ui, this.ui, this._ui);
        // cond
        resolveIfSchema(_schema, this._ui);
        this._schema = _schema;
        delete _schema.ui;
        di(this._ui, 'cover schema & ui', this._ui, _schema);
    }
    coverButtonProperty() {
        this._btn = Object.assign(Object.assign(Object.assign({ render: { size: 'default' } }, this.locale), this.options.button), this.button);
        const firstKey = Object.keys(this._ui).find(w => w.startsWith('$'));
        const btnRender = this._btn.render;
        if (this.layout === 'horizontal') {
            const btnUi = firstKey ? this._ui[firstKey] : this._defUi;
            if (!btnRender.grid) {
                btnRender.grid = {
                    offset: btnUi.spanLabel,
                    span: btnUi.spanControl
                };
            }
            // fixed label
            if (btnRender.spanLabelFixed == null) {
                btnRender.spanLabelFixed = btnUi.spanLabelFixed;
            }
            // 固定标签宽度时，若不指定样式，则默认居中
            if (!btnRender.class && typeof btnUi.spanLabelFixed === 'number' && btnUi.spanLabelFixed > 0) {
                btnRender.class = 'text-center';
            }
        }
        else {
            btnRender.grid = {};
        }
        if (this._mode) {
            this.mode = this._mode;
        }
        di(this._ui, 'button property', this._btn);
    }
    ngOnInit() {
        if (!this.platform.isBrowser) {
            return;
        }
        this.validator();
        this._inited = true;
    }
    ngOnChanges(changes) {
        if (!this.platform.isBrowser) {
            return;
        }
        if (Object.keys(changes).length === 1 && (changes.loading || changes.disabled)) {
            this.cdr.detectChanges();
            return;
        }
        this.refreshSchema();
    }
    /** @internal */
    _addTpl(path, templateRef) {
        if (!this._inited) {
            return;
        }
        if (this._renders.has(path)) {
            console.warn(`Duplicate definition "${path}" custom widget`);
            return;
        }
        this._renders.set(path, templateRef);
        this.attachCustomRender();
    }
    attachCustomRender() {
        this._renders.forEach((tpl, path) => {
            const property = this.rootProperty.searchProperty(path);
            if (property == null) {
                return;
            }
            property.ui._render = tpl;
        });
    }
    /**
     * Validator the form is valid
     *
     * 校验表单是否有效
     * - `emitError` 当表单无效时是否触发 `formError` 事件，默认：`true`
     * - `onlyRoot` 只对根进行检验，不进行向下逐个递归，根已经包含整个 Json Schema，默认：`true`
     */
    validator(options = { emitError: true, onlyRoot: true }) {
        if (!this.platform.isBrowser) {
            return false;
        }
        const fn = (property) => {
            property._runValidation();
            if (!(property instanceof PropertyGroup) || !property.properties)
                return;
            if (Array.isArray(property.properties)) {
                property.properties.forEach(p => fn(p));
            }
            else {
                Object.keys(property.properties).forEach(key => fn(property.properties[key]));
            }
        };
        if (options.onlyRoot) {
            this.rootProperty._runValidation();
        }
        else {
            fn(this.rootProperty);
        }
        const errors = this.rootProperty.errors;
        this._valid = !(errors && errors.length);
        if (options.emitError && !this._valid)
            this.formError.emit(errors);
        this.cdr.detectChanges();
        return this._valid;
    }
    /**
     * Refresh the form Schema, when specifying `newSchema` means to replace the current Schema
     *
     * 刷新 Schema，当指定 `newSchema` 表示替换当前的 Schema
     *
     * 可以针对某个表单元素进行刷新，例如：
     * ```
     * // 获取某个元素
     * const statusProperty = this.sf.getProperty('/status')!;
     * // 重置 `schema` 或 `ui` 参数
     * statusProperty.schema.enum = ['1', '2', '3'];
     * // 调用 `reset` 重置初始值
     * statusProperty.widget.reset('2');
     * ```
     */
    refreshSchema(newSchema, newUI) {
        if (!this.platform.isBrowser) {
            return this;
        }
        if (newSchema)
            this.schema = newSchema;
        if (newUI)
            this.ui = newUI;
        if (!this.schema || typeof this.schema.properties === 'undefined')
            throw new Error(`Invalid Schema`);
        if (this.schema.ui && typeof this.schema.ui === 'string')
            throw new Error(`Don't support string with root ui property`);
        this.schema.type = 'object';
        this._formData = Object.assign({}, this.formData);
        if (this._inited)
            this.terminator.destroy();
        this.cleanRootSub();
        this.coverProperty();
        this.coverButtonProperty();
        this.rootProperty = this.formPropertyFactory.createProperty(this._schema, this._ui, this.formData);
        this.attachCustomRender();
        this.cdr.detectChanges();
        this.reset();
        let isFirst = true;
        this.rootProperty.valueChanges.subscribe(res => {
            this._item = Object.assign(Object.assign({}, (this.cleanValue ? null : this.formData)), res.value);
            if (isFirst) {
                isFirst = false;
                return;
            }
            this.formChange.emit(this._item);
            this.formValueChange.emit({ value: this._item, path: res.path, pathValue: res.pathValue });
        });
        this.rootProperty.errorsChanges.subscribe(errors => {
            this._valid = !(errors && errors.length);
            this.formError.emit(errors);
            this.cdr.detectChanges();
        });
        return this;
    }
    /**
     * Reset form
     *
     * 重置表单
     *
     * @param [emit] 是否触发 `formReset` 事件，默认：`false`
     */
    reset(emit = false) {
        if (!this.platform.isBrowser) {
            return this;
        }
        this.rootProperty.resetValue(this.formData, false);
        Promise.resolve().then(() => this.cdr.detectChanges());
        if (emit) {
            this.formReset.emit(this.value);
        }
        return this;
    }
    cleanRootSub() {
        if (!this.rootProperty)
            return;
        this.rootProperty.errorsChanges.unsubscribe();
        this.rootProperty.valueChanges.unsubscribe();
    }
    ngOnDestroy() {
        this.cleanRootSub();
        this.terminator.destroy();
        const { unsubscribe$ } = this;
        unsubscribe$.next();
        unsubscribe$.complete();
    }
}
SFComponent.ɵfac = function SFComponent_Factory(t) { return new (t || SFComponent)(ɵngcc0.ɵɵdirectiveInject(FormPropertyFactory), ɵngcc0.ɵɵdirectiveInject(TerminatorService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.DelonLocaleService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.ACLService, 8), ɵngcc0.ɵɵdirectiveInject(ALAIN_I18N_TOKEN, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.AlainConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc5.Platform)); };
SFComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SFComponent, selectors: [["sf"], ["", "sf", ""]], hostVars: 16, hostBindings: function SFComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("sf", true)("sf__inline", ctx.layout === "inline")("sf__horizontal", ctx.layout === "horizontal")("sf__search", ctx.mode === "search")("sf__edit", ctx.mode === "edit")("sf__no-error", ctx.onlyVisual)("sf__no-colon", ctx.noColon)("sf__compact", ctx.compact);
    } }, inputs: { layout: "layout", button: "button", liveValidate: "liveValidate", firstVisual: "firstVisual", onlyVisual: "onlyVisual", compact: "compact", loading: "loading", disabled: "disabled", noColon: "noColon", cleanValue: "cleanValue", autocomplete: "autocomplete", mode: "mode", ui: "ui", schema: "schema", formData: "formData" }, outputs: { formValueChange: "formValueChange", formChange: "formChange", formSubmit: "formSubmit", formReset: "formReset", formError: "formError" }, exportAs: ["sf"], features: [ɵngcc0.ɵɵProvidersFeature([
            WidgetFactory,
            {
                provide: FormPropertyFactory,
                useFactory,
                deps: [SchemaValidatorFactory, AlainConfigService]
            },
            TerminatorService
        ]), ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c0, decls: 5, vars: 5, consts: [["con", ""], ["nz-form", "", 3, "nzLayout", "submit"], [3, "formProperty", 4, "ngIf"], [4, "ngIf", "ngIfElse"], [3, "formProperty"], ["class", "sf-btns", 3, "ngClass", "fixed-label", 4, "ngIf"], [1, "sf-btns", 3, "ngClass", "fixed-label"], ["nz-col", "", 1, "ant-form-item-control", 3, "nzSpan", "nzOffset", "nzXs", "nzSm", "nzMd", "nzLg", "nzXl", "nzXXl"], [1, "ant-form-item-control-input"], [1, "ant-form-item-control-input-content"], ["type", "submit", "nz-button", "", "data-type", "submit", 3, "nzType", "nzSize", "nzLoading", "disabled"], ["nz-icon", "", 3, "nzType", "nzTheme", "nzTwotoneColor", "nzIconfont", 4, "ngIf"], ["type", "button", "nz-button", "", "data-type", "reset", 3, "nzType", "nzSize", "disabled", "click", 4, "ngIf"], ["nz-icon", "", 3, "nzType", "nzTheme", "nzTwotoneColor", "nzIconfont"], ["type", "button", "nz-button", "", "data-type", "reset", 3, "nzType", "nzSize", "disabled", "click"]], template: function SFComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, SFComponent_ng_template_0_Template, 1, 0, "ng-template", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵelementStart(2, "form", 1);
        ɵngcc0.ɵɵlistener("submit", function SFComponent_Template_form_submit_2_listener($event) { return ctx.onSubmit($event); });
        ɵngcc0.ɵɵtemplate(3, SFComponent_sf_item_3_Template, 1, 1, "sf-item", 2);
        ɵngcc0.ɵɵtemplate(4, SFComponent_ng_container_4_Template, 2, 1, "ng-container", 3);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        const _r0 = ɵngcc0.ɵɵreference(1);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("nzLayout", ctx.layout);
        ɵngcc0.ɵɵattribute("autocomplete", ctx.autocomplete);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.rootProperty);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.button !== "none")("ngIfElse", _r0);
    } }, directives: function () { return [ɵngcc6.ɵNgNoValidate, ɵngcc6.NgControlStatusGroup, ɵngcc6.NgForm, ɵngcc7.NzFormDirective, ɵngcc8.NgIf, SFItemComponent, ɵngcc9.NzRowDirective, ɵngcc7.NzFormItemComponent, ɵngcc8.NgClass, SFFixedDirective, ɵngcc9.NzColDirective, ɵngcc10.NzButtonComponent, ɵngcc11.NzWaveDirective, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective]; }, encapsulation: 2, changeDetection: 0 });
SFComponent.ctorParameters = () => [
    { type: FormPropertyFactory },
    { type: TerminatorService },
    { type: DomSanitizer },
    { type: ChangeDetectorRef },
    { type: DelonLocaleService },
    { type: ACLService, decorators: [{ type: Optional }] },
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [ALAIN_I18N_TOKEN,] }] },
    { type: AlainConfigService },
    { type: Platform }
];
SFComponent.propDecorators = {
    layout: [{ type: Input }],
    schema: [{ type: Input }],
    ui: [{ type: Input }],
    formData: [{ type: Input }],
    button: [{ type: Input }],
    liveValidate: [{ type: Input }],
    autocomplete: [{ type: Input }],
    firstVisual: [{ type: Input }],
    onlyVisual: [{ type: Input }],
    compact: [{ type: Input }],
    mode: [{ type: Input }],
    loading: [{ type: Input }],
    disabled: [{ type: Input }],
    noColon: [{ type: Input }],
    cleanValue: [{ type: Input }],
    formValueChange: [{ type: Output }],
    formChange: [{ type: Output }],
    formSubmit: [{ type: Output }],
    formReset: [{ type: Output }],
    formError: [{ type: Output }]
};
__decorate([
    InputBoolean()
], SFComponent.prototype, "liveValidate", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "firstVisual", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "onlyVisual", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "compact", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "loading", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "disabled", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "noColon", void 0);
__decorate([
    InputBoolean()
], SFComponent.prototype, "cleanValue", void 0);

let nextUniqueId = 0;
class SFItemComponent {
    constructor(widgetFactory, terminator) {
        this.widgetFactory = widgetFactory;
        this.terminator = terminator;
        this.unsubscribe$ = new Subject();
        this.widget = null;
    }
    onWidgetInstanciated(widget) {
        this.widget = widget;
        const id = `_sf-${nextUniqueId++}`;
        const ui = this.formProperty.ui;
        this.widget.formProperty = this.formProperty;
        this.widget.schema = this.formProperty.schema;
        this.widget.ui = ui;
        this.widget.id = id;
        this.widget.firstVisual = ui.firstVisual;
        this.formProperty.widget = widget;
    }
    ngOnInit() {
        this.terminator.onDestroy.subscribe(() => this.ngOnDestroy());
    }
    ngOnChanges() {
        const p = this.formProperty;
        this.ref = this.widgetFactory.createWidget(this.container, (p.ui.widget || p.schema.type));
        this.onWidgetInstanciated(this.ref.instance);
    }
    ngOnDestroy() {
        const { unsubscribe$ } = this;
        unsubscribe$.next();
        unsubscribe$.complete();
        this.ref.destroy();
    }
}
SFItemComponent.ɵfac = function SFItemComponent_Factory(t) { return new (t || SFItemComponent)(ɵngcc0.ɵɵdirectiveInject(WidgetFactory), ɵngcc0.ɵɵdirectiveInject(TerminatorService)); };
SFItemComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SFItemComponent, selectors: [["sf-item"]], viewQuery: function SFItemComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c1, 7, ViewContainerRef);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.container = _t.first);
    } }, hostVars: 2, hostBindings: function SFItemComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("sf__item", true);
    } }, inputs: { formProperty: "formProperty" }, exportAs: ["sfItem"], features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 2, vars: 0, consts: [["target", ""]], template: function SFItemComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, SFItemComponent_ng_template_0_Template, 0, 0, "ng-template", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);
    } }, encapsulation: 2 });
SFItemComponent.ctorParameters = () => [
    { type: WidgetFactory },
    { type: TerminatorService }
];
SFItemComponent.propDecorators = {
    formProperty: [{ type: Input }],
    container: [{ type: ViewChild, args: ['target', { read: ViewContainerRef, static: true },] }]
};

class SFFixedDirective {
    constructor(er, render) {
        this.render = render;
        this._inited = false;
        this.el = er.nativeElement;
    }
    init() {
        if (!this._inited || this.num == null || this.num <= 0)
            return;
        const widgetEl = this.el.querySelector('.ant-row') || this.el;
        this.render.addClass(widgetEl, 'sf__fixed');
        const labelEl = widgetEl.querySelector('.ant-form-item-label');
        const controlEl = widgetEl.querySelector('.ant-form-item-control');
        const unit = `${this.num}px`;
        if (labelEl) {
            this.render.setStyle(labelEl, 'flex', `0 0 ${unit}`);
            this.render.setStyle(controlEl, 'max-width', `calc(100% - ${unit})`);
        }
        else {
            this.render.setStyle(controlEl, 'margin-left', unit);
        }
    }
    ngAfterViewInit() {
        this._inited = true;
        this.init();
    }
    ngOnChanges() {
        if (this._inited)
            this.init();
    }
}
SFFixedDirective.ɵfac = function SFFixedDirective_Factory(t) { return new (t || SFFixedDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };
SFFixedDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: SFFixedDirective, selectors: [["", "fixed-label", ""]], inputs: { num: ["fixed-label", "num"] }, features: [ɵngcc0.ɵɵNgOnChangesFeature] });
SFFixedDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
SFFixedDirective.propDecorators = {
    num: [{ type: Input, args: ['fixed-label',] }]
};
__decorate([
    InputNumber()
], SFFixedDirective.prototype, "num", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SchemaValidatorFactory, [{
        type: Injectable
    }], null, null); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AjvSchemaValidatorFactory, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.AlainConfigService, decorators: [{
                type: Inject,
                args: [AlainConfigService]
            }] }, { type: ɵngcc0.NgZone }]; }, null); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(WidgetFactory, [{
        type: Injectable
    }], function () { return [{ type: WidgetRegistry }, { type: ɵngcc0.ComponentFactoryResolver }]; }, null); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SFComponent, [{
        type: Component,
        args: [{
                selector: 'sf, [sf]',
                exportAs: 'sf',
                template: "<ng-template #con>\n  <ng-content></ng-content>\n</ng-template>\n<form nz-form [nzLayout]=\"layout\" (submit)=\"onSubmit($event)\" [attr.autocomplete]=\"autocomplete\">\n  <sf-item *ngIf=\"rootProperty\" [formProperty]=\"rootProperty\"></sf-item>\n  <ng-container *ngIf=\"button !== 'none'; else con\">\n    <nz-form-item\n      *ngIf=\"_btn.render\"\n      [ngClass]=\"_btn.render!.class!\"\n      class=\"sf-btns\"\n      [fixed-label]=\"_btn.render!.spanLabelFixed!\"\n    >\n      <div\n        nz-col\n        class=\"ant-form-item-control\"\n        [nzSpan]=\"btnGrid.span\"\n        [nzOffset]=\"btnGrid.offset\"\n        [nzXs]=\"btnGrid.xs\"\n        [nzSm]=\"btnGrid.sm\"\n        [nzMd]=\"btnGrid.md\"\n        [nzLg]=\"btnGrid.lg\"\n        [nzXl]=\"btnGrid.xl\"\n        [nzXXl]=\"btnGrid.xxl\"\n      >\n        <div class=\"ant-form-item-control-input\">\n          <div class=\"ant-form-item-control-input-content\">\n            <ng-container *ngIf=\"button; else con\">\n              <button\n                type=\"submit\"\n                nz-button\n                data-type=\"submit\"\n                [nzType]=\"_btn.submit_type!\"\n                [nzSize]=\"_btn.render!.size!\"\n                [nzLoading]=\"loading\"\n                [disabled]=\"liveValidate && !valid\"\n              >\n                <i\n                  *ngIf=\"_btn.submit_icon\"\n                  nz-icon\n                  [nzType]=\"_btn.submit_icon.type!\"\n                  [nzTheme]=\"_btn.submit_icon.theme!\"\n                  [nzTwotoneColor]=\"_btn.submit_icon.twoToneColor!\"\n                  [nzIconfont]=\"_btn.submit_icon.iconfont!\"\n                ></i>\n                {{ _btn.submit }}\n              </button>\n              <button\n                *ngIf=\"_btn.reset\"\n                type=\"button\"\n                nz-button\n                data-type=\"reset\"\n                [nzType]=\"_btn.reset_type!\"\n                [nzSize]=\"_btn.render!.size!\"\n                [disabled]=\"loading\"\n                (click)=\"reset(true)\"\n              >\n                <i\n                  *ngIf=\"_btn.reset_icon\"\n                  nz-icon\n                  [nzType]=\"_btn.reset_icon.type!\"\n                  [nzTheme]=\"_btn.reset_icon.theme!\"\n                  [nzTwotoneColor]=\"_btn.reset_icon.twoToneColor!\"\n                  [nzIconfont]=\"_btn.reset_icon.iconfont!\"\n                ></i>\n                {{ _btn.reset }}\n              </button>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </nz-form-item>\n  </ng-container>\n</form>\n",
                providers: [
                    WidgetFactory,
                    {
                        provide: FormPropertyFactory,
                        useFactory,
                        deps: [SchemaValidatorFactory, AlainConfigService]
                    },
                    TerminatorService
                ],
                host: {
                    '[class.sf]': 'true',
                    '[class.sf__inline]': `layout === 'inline'`,
                    '[class.sf__horizontal]': `layout === 'horizontal'`,
                    '[class.sf__search]': `mode === 'search'`,
                    '[class.sf__edit]': `mode === 'edit'`,
                    '[class.sf__no-error]': `onlyVisual`,
                    '[class.sf__no-colon]': `noColon`,
                    '[class.sf__compact]': `compact`
                },
                preserveWhitespaces: false,
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return [{ type: FormPropertyFactory }, { type: TerminatorService }, { type: ɵngcc2.DomSanitizer }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc3.DelonLocaleService }, { type: ɵngcc4.ACLService, decorators: [{
                type: Optional
            }] }, { type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [ALAIN_I18N_TOKEN]
            }] }, { type: ɵngcc1.AlainConfigService }, { type: ɵngcc5.Platform }]; }, { layout: [{
            type: Input
        }], button: [{
            type: Input
        }], liveValidate: [{
            type: Input
        }], firstVisual: [{
            type: Input
        }], onlyVisual: [{
            type: Input
        }], compact: [{
            type: Input
        }], loading: [{
            type: Input
        }], disabled: [{
            type: Input
        }], noColon: [{
            type: Input
        }], cleanValue: [{
            type: Input
        }], formValueChange: [{
            type: Output
        }], formChange: [{
            type: Output
        }], formSubmit: [{
            type: Output
        }], formReset: [{
            type: Output
        }], formError: [{
            type: Output
        }], autocomplete: [{
            type: Input
        }], mode: [{
            type: Input
        }], ui: [{
            type: Input
        }], schema: [{
            type: Input
        }], formData: [{
            type: Input
        }] }); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SFItemComponent, [{
        type: Component,
        args: [{
                selector: 'sf-item',
                exportAs: 'sfItem',
                host: { '[class.sf__item]': 'true' },
                template: ` <ng-template #target></ng-template> `,
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return [{ type: WidgetFactory }, { type: TerminatorService }]; }, { formProperty: [{
            type: Input
        }], container: [{
            type: ViewChild,
            args: ['target', { read: ViewContainerRef, static: true }]
        }] }); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SFFixedDirective, [{
        type: Directive,
        args: [{ selector: '[fixed-label]' }]
    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, { num: [{
            type: Input,
            args: ['fixed-label']
        }] }); })();


class SFItemWrapComponent {
    constructor() {
        this._showTitle = false;
        this.title = null;
    }
    set showTitle(val) {
        this._showTitle = !!val;
    }
    get t() {
        return this.title === null ? this.schema.title : this.title;
    }
    get oh() {
        return this.ui.optionalHelp;
    }
}
SFItemWrapComponent.ɵfac = function SFItemWrapComponent_Factory(t) { return new (t || SFItemWrapComponent)(); };
SFItemWrapComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SFItemWrapComponent, selectors: [["sf-item-wrap"]], inputs: { title: "title", showTitle: "showTitle", id: "id", schema: "schema", ui: "ui", showError: "showError", error: "error" }, ngContentSelectors: _c0, decls: 8, vars: 11, consts: [["nz-col", "", "class", "ant-form-item-label", 3, "nzSpan", 4, "ngIf"], ["nz-col", "", 1, "ant-form-item-control", 3, "nzSpan", "nzOffset"], [1, "ant-form-item-control-input"], [1, "ant-form-item-control-input-content"], ["class", "ant-form-item-explain ant-form-item-explain-error", 4, "ngIf"], ["class", "ant-form-item-extra", 3, "innerHTML", 4, "ngIf"], ["nz-col", "", 1, "ant-form-item-label", 3, "nzSpan"], [3, "ant-form-item-required", 4, "ngIf"], [1, "sf__label-text"], ["class", "sf__optional", 4, "ngIf"], [1, "sf__optional"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipColor", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType", 4, "ngIf"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipColor", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType"], [1, "ant-form-item-explain", "ant-form-item-explain-error"], [1, "ant-form-item-extra", 3, "innerHTML"]], template: function SFItemWrapComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵelementStart(0, "nz-form-item");
        ɵngcc0.ɵɵtemplate(1, SFItemWrapComponent_div_1_Template, 2, 2, "div", 0);
        ɵngcc0.ɵɵelementStart(2, "div", 1);
        ɵngcc0.ɵɵelementStart(3, "div", 2);
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵprojection(5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, SFItemWrapComponent_div_6_Template, 3, 2, "div", 4);
        ɵngcc0.ɵɵtemplate(7, SFItemWrapComponent_div_7_Template, 1, 1, "div", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵstyleProp("width", ctx.ui.width, "px");
        ɵngcc0.ɵɵclassProp("ant-form-item-has-error", ctx.showError)("ant-form-item-with-help", ctx.showError);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx._showTitle);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzSpan", ctx.ui.spanControl)("nzOffset", ctx.ui.offsetControl);
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.ui.onlyVisual && ctx.showError);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.schema.description);
    } }, directives: [ɵngcc9.NzRowDirective, ɵngcc7.NzFormItemComponent, ɵngcc8.NgIf, ɵngcc9.NzColDirective, ɵngcc14.NzTooltipDirective, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective], encapsulation: 2, data: { animation: [helpMotion] } });
SFItemWrapComponent.propDecorators = {
    id: [{ type: Input }],
    schema: [{ type: Input }],
    ui: [{ type: Input }],
    showError: [{ type: Input }],
    error: [{ type: Input }],
    showTitle: [{ type: Input }],
    title: [{ type: Input }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SFItemWrapComponent, [{
        type: Component,
        args: [{
                selector: 'sf-item-wrap',
                template: "<nz-form-item\n  [style.width.px]=\"ui.width\"\n  [class.ant-form-item-has-error]=\"showError\"\n  [class.ant-form-item-with-help]=\"showError\"\n>\n  <div nz-col *ngIf=\"_showTitle\" [nzSpan]=\"ui.spanLabel!\" class=\"ant-form-item-label\">\n    <label *ngIf=\"t\" [attr.for]=\"id\" [class.ant-form-item-required]=\"ui._required\">\n      <span class=\"sf__label-text\">{{ t }}</span>\n      <span *ngIf=\"ui.optional || oh\" class=\"sf__optional\">\n        {{ ui.optional }}\n        <i\n          *ngIf=\"oh\"\n          nz-tooltip\n          [nzTooltipTitle]=\"oh.text\"\n          [nzTooltipPlacement]=\"oh.placement\"\n          [nzTooltipTrigger]=\"oh.trigger\"\n          [nzTooltipColor]=\"oh.bgColor\"\n          [nzTooltipOverlayClassName]=\"oh.overlayClassName\"\n          [nzTooltipOverlayStyle]=\"oh.overlayStyle\"\n          [nzTooltipMouseEnterDelay]=\"oh.mouseEnterDelay\"\n          [nzTooltipMouseLeaveDelay]=\"oh.mouseLeaveDelay\"\n          nz-icon\n          [nzType]=\"oh.icon!\"\n        ></i>\n      </span>\n    </label>\n  </div>\n  <div nz-col class=\"ant-form-item-control\" [nzSpan]=\"ui.spanControl!\" [nzOffset]=\"ui.offsetControl!\">\n    <div class=\"ant-form-item-control-input\">\n      <div class=\"ant-form-item-control-input-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div *ngIf=\"!ui.onlyVisual && showError\" class=\"ant-form-item-explain ant-form-item-explain-error\">\n      <div @helpMotion>{{ error }}</div>\n    </div>\n    <div *ngIf=\"schema.description\" class=\"ant-form-item-extra\" [innerHTML]=\"ui._description\"></div>\n  </div>\n</nz-form-item>\n",
                animations: [helpMotion],
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], function () { return []; }, { title: [{
            type: Input
        }], showTitle: [{
            type: Input
        }], id: [{
            type: Input
        }], schema: [{
            type: Input
        }], ui: [{
            type: Input
        }], showError: [{
            type: Input
        }], error: [{
            type: Input
        }] }); })();

class SFTemplateDirective {
    constructor(templateRef, table) {
        this.templateRef = templateRef;
        this.table = table;
    }
    ngOnInit() {
        this.table._addTpl(this.path.startsWith(SF_SEQ) ? this.path : SF_SEQ + this.path, this.templateRef);
    }
}
SFTemplateDirective.ɵfac = function SFTemplateDirective_Factory(t) { return new (t || SFTemplateDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(SFComponent)); };
SFTemplateDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: SFTemplateDirective, selectors: [["", "sf-template", ""]], inputs: { path: ["sf-template", "path"] } });
SFTemplateDirective.ctorParameters = () => [
    { type: TemplateRef },
    { type: SFComponent }
];
SFTemplateDirective.propDecorators = {
    path: [{ type: Input, args: ['sf-template',] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SFTemplateDirective, [{
        type: Directive,
        args: [{
                selector: '[sf-template]'
            }]
    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: SFComponent }]; }, { path: [{
            type: Input,
            args: ['sf-template']
        }] }); })();

class Widget {
    constructor(cd, injector, sfItemComp, sfComp) {
        this.cd = cd;
        this.injector = injector;
        this.sfItemComp = sfItemComp;
        this.sfComp = sfComp;
        this.showError = false;
        this.id = '';
        this.firstVisual = false;
    }
    get cls() {
        return this.ui.class || '';
    }
    get disabled() {
        if (this.schema.readOnly === true || this.sfComp.disabled) {
            return true;
        }
        return false;
    }
    get l() {
        return this.formProperty.root.widget.sfComp.locale;
    }
    get oh() {
        return this.ui.optionalHelp;
    }
    get dom() {
        return this.injector.get(DomSanitizer);
    }
    get cleanValue() {
        var _a;
        return (_a = this.sfComp) === null || _a === void 0 ? void 0 : _a.cleanValue;
    }
    ngAfterViewInit() {
        this.formProperty.errorsChanges
            .pipe(takeUntil(this.sfItemComp.unsubscribe$))
            .subscribe((errors) => {
            if (errors == null)
                return;
            di(this.ui, 'errorsChanges', this.formProperty.path, errors);
            // 不显示首次校验视觉
            if (this.firstVisual) {
                this.showError = errors.length > 0;
                this.error = this.showError ? errors[0].message : '';
                this.cd.detectChanges();
            }
            this.firstVisual = true;
        });
        this.afterViewInit();
    }
    setValue(value) {
        this.formProperty.setValue(value, false);
        di(this.ui, 'valueChanges', this.formProperty.path, this.formProperty);
    }
    get value() {
        return this.formProperty.value;
    }
    detectChanges(onlySelf = false) {
        if (onlySelf) {
            this.cd.markForCheck();
        }
        else {
            this.formProperty.root.widget.cd.markForCheck();
        }
    }
}
Widget.ɵfac = function Widget_Factory(t) { return new (t || Widget)(ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(Injector), ɵngcc0.ɵɵdirectiveInject(SFItemComponent), ɵngcc0.ɵɵdirectiveInject(SFComponent)); };
Widget.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: Widget, hostVars: 2, hostBindings: function Widget_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassMap(ctx.cls);
    } } });
Widget.ctorParameters = () => [
    { type: ChangeDetectorRef, decorators: [{ type: Inject, args: [ChangeDetectorRef,] }] },
    { type: Injector, decorators: [{ type: Inject, args: [Injector,] }] },
    { type: SFItemComponent, decorators: [{ type: Inject, args: [SFItemComponent,] }] },
    { type: SFComponent, decorators: [{ type: Inject, args: [SFComponent,] }] }
];
Widget.propDecorators = {
    cls: [{ type: HostBinding, args: ['class',] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Widget, [{
        type: Directive
    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef, decorators: [{
                type: Inject,
                args: [ChangeDetectorRef]
            }] }, { type: ɵngcc0.Injector, decorators: [{
                type: Inject,
                args: [Injector]
            }] }, { type: SFItemComponent, decorators: [{
                type: Inject,
                args: [SFItemComponent]
            }] }, { type: SFComponent, decorators: [{
                type: Inject,
                args: [SFComponent]
            }] }]; }, { cls: [{
            type: HostBinding,
            args: ['class']
        }] }); })();
class ControlWidget extends Widget {
    reset(_value) { }
    afterViewInit() { }
}
ControlWidget.ɵfac = /*@__PURE__*/ function () { let ɵControlWidget_BaseFactory; return function ControlWidget_Factory(t) { return (ɵControlWidget_BaseFactory || (ɵControlWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ControlWidget)))(t || ControlWidget); }; }();
ControlWidget.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ControlWidget, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ControlWidget, [{
        type: Directive
    }], null, null); })();
class ControlUIWidget extends Widget {
    reset(_value) { }
    afterViewInit() { }
}
ControlUIWidget.ɵfac = /*@__PURE__*/ function () { let ɵControlUIWidget_BaseFactory; return function ControlUIWidget_Factory(t) { return (ɵControlUIWidget_BaseFactory || (ɵControlUIWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ControlUIWidget)))(t || ControlUIWidget); }; }();
ControlUIWidget.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ControlUIWidget, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ControlUIWidget, [{
        type: Directive
    }], null, null); })();
class ArrayLayoutWidget extends Widget {
    reset(_value) { }
    afterViewInit() { }
    ngAfterViewInit() {
        this.formProperty.errorsChanges
            .pipe(takeUntil(this.sfItemComp.unsubscribe$))
            .subscribe(() => this.cd.detectChanges());
    }
}
ArrayLayoutWidget.ɵfac = /*@__PURE__*/ function () { let ɵArrayLayoutWidget_BaseFactory; return function ArrayLayoutWidget_Factory(t) { return (ɵArrayLayoutWidget_BaseFactory || (ɵArrayLayoutWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ArrayLayoutWidget)))(t || ArrayLayoutWidget); }; }();
ArrayLayoutWidget.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ArrayLayoutWidget, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ArrayLayoutWidget, [{
        type: Directive
    }], null, null); })();
class ObjectLayoutWidget extends Widget {
    reset(_value) { }
    afterViewInit() { }
    ngAfterViewInit() {
        this.formProperty.errorsChanges
            .pipe(takeUntil(this.sfItemComp.unsubscribe$))
            .subscribe(() => this.cd.detectChanges());
    }
}
ObjectLayoutWidget.ɵfac = /*@__PURE__*/ function () { let ɵObjectLayoutWidget_BaseFactory; return function ObjectLayoutWidget_Factory(t) { return (ɵObjectLayoutWidget_BaseFactory || (ɵObjectLayoutWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ObjectLayoutWidget)))(t || ObjectLayoutWidget); }; }();
ObjectLayoutWidget.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ObjectLayoutWidget, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ObjectLayoutWidget, [{
        type: Directive
    }], null, null); })();

class ArrayWidget extends ArrayLayoutWidget {
    constructor() {
        super(...arguments);
        this.arraySpan = 8;
    }
    get addDisabled() {
        return (this.disabled ||
            (this.schema.maxItems != null && this.formProperty.properties.length >= this.schema.maxItems));
    }
    get showRemove() {
        return !this.disabled && !!this.removeTitle;
    }
    ngOnInit() {
        const { grid, addTitle, addType, removable, removeTitle } = this.ui;
        if (grid && grid.arraySpan) {
            this.arraySpan = grid.arraySpan;
        }
        this.addTitle = this.dom.bypassSecurityTrustHtml(addTitle || this.l.addText);
        this.addType = addType || 'dashed';
        this.removeTitle = removable === false ? null : removeTitle || this.l.removeText;
    }
    reValid() {
        this.formProperty.updateValueAndValidity({ onlySelf: false, emitValueEvent: false, emitValidator: true });
    }
    addItem() {
        const property = this.formProperty.add({});
        this.reValid();
        if (this.ui.add) {
            this.ui.add(property);
        }
    }
    removeItem(index) {
        this.formProperty.remove(index);
        this.reValid();
        if (this.ui.remove) {
            this.ui.remove(index);
        }
    }
}
ArrayWidget.ɵfac = /*@__PURE__*/ function () { let ɵArrayWidget_BaseFactory; return function ArrayWidget_Factory(t) { return (ɵArrayWidget_BaseFactory || (ɵArrayWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ArrayWidget)))(t || ArrayWidget); }; }();
ArrayWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ArrayWidget, selectors: [["sf-array"]], hostVars: 2, hostBindings: function ArrayWidget_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("sf__array", true);
    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 8, vars: 10, consts: [["nz-col", "", "class", "ant-form-item-label", 3, "nzSpan", 4, "ngIf"], ["nz-col", "", 1, "ant-form-item-control-wrapper", 3, "nzSpan", "nzOffset"], [1, "ant-form-item-control"], ["nz-row", "", 1, "sf__array-container"], [4, "ngFor", "ngForOf"], ["class", "ant-form-explain", 4, "ngIf"], ["class", "ant-form-extra", 3, "innerHTML", 4, "ngIf"], ["nz-col", "", 1, "ant-form-item-label", 3, "nzSpan"], [1, "sf__optional"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType", 4, "ngIf"], [1, "sf__array-add"], ["type", "button", "nz-button", "", 3, "nzType", "disabled", "innerHTML", "click"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType"], ["nz-col", "", "class", "sf__array-item", 3, "nzSpan", 4, "ngIf"], ["nz-col", "", 1, "sf__array-item", 3, "nzSpan"], [3, "formProperty"], ["class", "sf__array-remove", 3, "click", 4, "ngIf"], [1, "sf__array-remove", 3, "click"], ["nz-icon", "", "nzType", "delete"], [1, "ant-form-explain"], [1, "ant-form-extra", 3, "innerHTML"]], template: function ArrayWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "nz-form-item");
        ɵngcc0.ɵɵtemplate(1, ArrayWidget_div_1_Template, 8, 7, "div", 0);
        ɵngcc0.ɵɵelementStart(2, "div", 1);
        ɵngcc0.ɵɵelementStart(3, "div", 2);
        ɵngcc0.ɵɵelementStart(4, "div", 3);
        ɵngcc0.ɵɵtemplate(5, ArrayWidget_ng_container_5_Template, 2, 1, "ng-container", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, ArrayWidget_div_6_Template, 2, 1, "div", 5);
        ɵngcc0.ɵɵtemplate(7, ArrayWidget_div_7_Template, 1, 1, "div", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵclassProp("ant-form-item-with-help", ctx.showError);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzSpan", ctx.ui.spanControl)("nzOffset", ctx.ui.offsetControl);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵclassProp("has-error", ctx.showError);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.formProperty.properties);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.ui.onlyVisual && ctx.showError);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.schema.description);
    } }, directives: [ɵngcc9.NzRowDirective, ɵngcc7.NzFormItemComponent, ɵngcc8.NgIf, ɵngcc9.NzColDirective, ɵngcc8.NgForOf, ɵngcc10.NzButtonComponent, ɵngcc11.NzWaveDirective, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc14.NzTooltipDirective, ɵngcc13.NzIconDirective, ɵngcc15.NzCardComponent, SFItemComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ArrayWidget, [{
        type: Component,
        args: [{
                selector: 'sf-array',
                template: "<nz-form-item [class.ant-form-item-with-help]=\"showError\">\n  <div nz-col *ngIf=\"schema.title\" [nzSpan]=\"ui.spanLabel!\" class=\"ant-form-item-label\">\n    <label>\n      {{ schema.title }}\n      <span class=\"sf__optional\">\n        {{ ui.optional }}\n        <i\n          *ngIf=\"oh\"\n          nz-tooltip\n          [nzTooltipTitle]=\"oh.text\"\n          [nzTooltipPlacement]=\"oh.placement\"\n          [nzTooltipTrigger]=\"oh.trigger\"\n          [nzTooltipOverlayClassName]=\"oh.overlayClassName\"\n          [nzTooltipOverlayStyle]=\"oh.overlayStyle\"\n          [nzTooltipMouseEnterDelay]=\"oh.mouseEnterDelay\"\n          [nzTooltipMouseLeaveDelay]=\"oh.mouseLeaveDelay\"\n          nz-icon\n          [nzType]=\"oh.icon!\"\n        ></i>\n      </span>\n    </label>\n    <div class=\"sf__array-add\">\n      <button\n        type=\"button\"\n        nz-button\n        [nzType]=\"addType\"\n        [disabled]=\"addDisabled\"\n        (click)=\"addItem()\"\n        [innerHTML]=\"addTitle\"\n      ></button>\n    </div>\n  </div>\n  <div nz-col class=\"ant-form-item-control-wrapper\" [nzSpan]=\"ui.spanControl!\" [nzOffset]=\"ui.offsetControl!\">\n    <div class=\"ant-form-item-control\" [class.has-error]=\"showError\">\n      <div nz-row class=\"sf__array-container\">\n        <ng-container *ngFor=\"let i of $any(formProperty).properties; let idx = index\">\n          <div\n            nz-col\n            *ngIf=\"i.visible && !i.ui.hidden\"\n            [nzSpan]=\"arraySpan\"\n            [attr.data-index]=\"idx\"\n            class=\"sf__array-item\"\n          >\n            <nz-card>\n              <sf-item [formProperty]=\"i\"></sf-item>\n              <span *ngIf=\"showRemove\" class=\"sf__array-remove\" (click)=\"removeItem(idx)\" [attr.title]=\"removeTitle\">\n                <i nz-icon nzType=\"delete\"></i>\n              </span>\n            </nz-card>\n          </div>\n        </ng-container>\n      </div>\n      <div *ngIf=\"!ui.onlyVisual && showError\" class=\"ant-form-explain\">{{ error }}</div>\n      <div *ngIf=\"schema.description\" [innerHTML]=\"ui._description\" class=\"ant-form-extra\"></div>\n    </div>\n  </div>\n</nz-form-item>\n",
                host: { '[class.sf__array]': 'true' },
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class AutoCompleteWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.i = {};
        this.typing = '';
        this.isAsync = false;
        this.fixData = [];
    }
    updateValue(item) {
        this.typing = item.nzLabel;
        const data = item.nzValue;
        this.setValue(data.value);
        if (this.ui.change) {
            this.ui.change(item, data);
        }
    }
    _setValue(item) {
        let val = item.toString();
        if (typeof item !== 'string') {
            val = item.value;
        }
        this.setValue(val);
    }
    afterViewInit() {
        const { backfill, defaultActiveFirstOption, nzWidth, filterOption, asyncData } = this.ui;
        this.i = {
            backfill: toBool(backfill, false),
            defaultActiveFirstOption: toBool(defaultActiveFirstOption, true),
            width: nzWidth || undefined
        };
        let filterOptionValue = filterOption == null ? true : filterOption;
        if (typeof filterOptionValue === 'boolean') {
            filterOptionValue = (input, option) => option.label.toLowerCase().indexOf((input || '').toLowerCase()) > -1;
        }
        this.filterOption = filterOptionValue;
        this.isAsync = !!asyncData;
        const orgTime = +(this.ui.debounceTime || 0);
        const time = Math.max(0, this.isAsync ? Math.max(50, orgTime) : orgTime);
        this.list = this.ngModel.valueChanges.pipe(debounceTime(time), startWith(''), mergeMap(input => (this.isAsync ? asyncData(input) : this.filterData(input))), map(res => getEnum(res, null, this.schema.readOnly)));
    }
    reset(value) {
        this.typing = this.value;
        if (this.isAsync)
            return;
        switch (this.ui.type) {
            case 'email':
                this.fixData = getCopyEnum(this.schema.enum || this.formProperty.options.uiEmailSuffixes, null, this.schema.readOnly);
                break;
            default:
                this.fixData = getCopyEnum(this.schema.enum, value, this.schema.readOnly);
                break;
        }
    }
    filterData(input) {
        switch (this.ui.type) {
            case 'email':
                return this.addEmailSuffix(input);
            default:
                return of(this.fixData.filter(option => this.filterOption(input, option)));
        }
    }
    addEmailSuffix(value) {
        return of(!value || ~value.indexOf('@') ? [] : this.fixData.map(domain => `${value}@${domain.label}`));
    }
}
AutoCompleteWidget.ɵfac = /*@__PURE__*/ function () { let ɵAutoCompleteWidget_BaseFactory; return function AutoCompleteWidget_Factory(t) { return (ɵAutoCompleteWidget_BaseFactory || (ɵAutoCompleteWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(AutoCompleteWidget)))(t || AutoCompleteWidget); }; }();
AutoCompleteWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: AutoCompleteWidget, selectors: [["sf-autocomplete"]], viewQuery: function AutoCompleteWidget_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(NgModel, 5);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.ngModel = _t.first);
    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 6, vars: 20, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], ["nz-input", "", "autocomplete", "off", 3, "nzAutocomplete", "disabled", "nzSize", "ngModel", "ngModelChange"], [3, "nzBackfill", "nzDefaultActiveFirstOption", "nzWidth", "selectionChange"], ["auto", ""], [3, "nzValue", "nzLabel", 4, "ngFor", "ngForOf"], [3, "nzValue", "nzLabel"]], template: function AutoCompleteWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "input", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function AutoCompleteWidget_Template_input_ngModelChange_1_listener($event) { return ctx.typing = $event; })("ngModelChange", function AutoCompleteWidget_Template_input_ngModelChange_1_listener($event) { return ctx._setValue($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "nz-autocomplete", 2, 3);
        ɵngcc0.ɵɵlistener("selectionChange", function AutoCompleteWidget_Template_nz_autocomplete_selectionChange_2_listener($event) { return ctx.updateValue($event); });
        ɵngcc0.ɵɵtemplate(4, AutoCompleteWidget_nz_auto_option_4_Template, 2, 3, "nz-auto-option", 4);
        ɵngcc0.ɵɵpipe(5, "async");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        const _r0 = ɵngcc0.ɵɵreference(3);
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzAutocomplete", _r0)("disabled", ctx.disabled)("nzSize", ctx.ui.size)("ngModel", ctx.typing);
        ɵngcc0.ɵɵattribute("id", ctx.id)("disabled", ctx.disabled)("maxLength", ctx.schema.maxLength || null)("placeholder", ctx.ui.placeholder);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzBackfill", ctx.i.backfill)("nzDefaultActiveFirstOption", ctx.i.defaultActiveFirstOption)("nzWidth", ctx.i.width);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ɵngcc0.ɵɵpipeBind1(5, 18, ctx.list));
    } }, directives: [SFItemWrapComponent, ɵngcc16.NzInputDirective, ɵngcc17.NzAutocompleteTriggerDirective, ɵngcc6.DefaultValueAccessor, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc17.NzAutocompleteComponent, ɵngcc8.NgForOf, ɵngcc17.NzAutocompleteOptionComponent], pipes: [ɵngcc8.AsyncPipe], encapsulation: 2 });
AutoCompleteWidget.propDecorators = {
    ngModel: [{ type: ViewChild, args: [NgModel, { static: false },] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(AutoCompleteWidget, [{
        type: Component,
        args: [{
                selector: 'sf-autocomplete',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <input\n    nz-input\n    [nzAutocomplete]=\"auto\"\n    [attr.id]=\"id\"\n    [disabled]=\"disabled\"\n    [attr.disabled]=\"disabled\"\n    [nzSize]=\"ui.size!\"\n    [(ngModel)]=\"typing\"\n    (ngModelChange)=\"_setValue($event)\"\n    [attr.maxLength]=\"schema.maxLength || null\"\n    [attr.placeholder]=\"ui.placeholder\"\n    autocomplete=\"off\"\n  />\n  <nz-autocomplete\n    #auto\n    [nzBackfill]=\"i.backfill\"\n    [nzDefaultActiveFirstOption]=\"i.defaultActiveFirstOption\"\n    [nzWidth]=\"i.width\"\n    (selectionChange)=\"updateValue($event)\"\n  >\n    <nz-auto-option *ngFor=\"let i of list | async\" [nzValue]=\"i\" [nzLabel]=\"i.label\"> {{ i.label }} </nz-auto-option>\n  </nz-autocomplete>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, { ngModel: [{
            type: ViewChild,
            args: [NgModel, { static: false }]
        }] }); })();

class BooleanWidget extends ControlUIWidget {
}
BooleanWidget.ɵfac = /*@__PURE__*/ function () { let ɵBooleanWidget_BaseFactory; return function BooleanWidget_Factory(t) { return (ɵBooleanWidget_BaseFactory || (ɵBooleanWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(BooleanWidget)))(t || BooleanWidget); }; }();
BooleanWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: BooleanWidget, selectors: [["sf-boolean"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 11, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "ngModel", "nzDisabled", "nzSize", "nzCheckedChildren", "nzUnCheckedChildren", "ngModelChange"]], template: function BooleanWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-switch", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function BooleanWidget_Template_nz_switch_ngModelChange_1_listener($event) { return ctx.setValue($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngModel", ctx.value)("nzDisabled", ctx.disabled)("nzSize", ctx.ui.size)("nzCheckedChildren", ctx.ui.checkedChildren)("nzUnCheckedChildren", ctx.ui.unCheckedChildren);
    } }, directives: [SFItemWrapComponent, ɵngcc18.NzSwitchComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(BooleanWidget, [{
        type: Component,
        args: [{
                selector: 'sf-boolean',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-switch\n    [ngModel]=\"value\"\n    (ngModelChange)=\"setValue($event)\"\n    [nzDisabled]=\"disabled\"\n    [nzSize]=\"ui.size!\"\n    [nzCheckedChildren]=\"ui.checkedChildren!\"\n    [nzUnCheckedChildren]=\"ui.unCheckedChildren!\"\n  >\n  </nz-switch>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class CascaderWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.data = [];
    }
    ngOnInit() {
        const { clearText, showArrow, showInput, triggerAction, asyncData } = this.ui;
        this.clearText = clearText || '清除';
        this.showArrow = toBool(showArrow, true);
        this.showInput = toBool(showInput, true);
        this.triggerAction = triggerAction || ['click'];
        if (!!asyncData) {
            this.loadData = (node, index) => asyncData(node, index, this).then(() => this.detectChanges());
        }
    }
    reset(value) {
        getData(this.schema, {}, value).subscribe(list => {
            this.data = list;
            this.detectChanges();
        });
    }
    _visibleChange(status) {
        if (this.ui.visibleChange)
            this.ui.visibleChange(status);
    }
    _change(value) {
        this.setValue(value);
        if (this.ui.change) {
            this.ui.change(value);
        }
    }
    _selectionChange(options) {
        if (this.ui.selectionChange) {
            this.ui.selectionChange(options);
        }
    }
    _clear() {
        if (this.ui.clear)
            this.ui.clear();
    }
}
CascaderWidget.ɵfac = /*@__PURE__*/ function () { let ɵCascaderWidget_BaseFactory; return function CascaderWidget_Factory(t) { return (ɵCascaderWidget_BaseFactory || (ɵCascaderWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(CascaderWidget)))(t || CascaderWidget); }; }();
CascaderWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: CascaderWidget, selectors: [["sf-cascader"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 26, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzDisabled", "nzSize", "ngModel", "nzOptions", "nzAllowClear", "nzAutoFocus", "nzChangeOn", "nzChangeOnSelect", "nzColumnClassName", "nzExpandTrigger", "nzMenuClassName", "nzMenuStyle", "nzNotFoundContent", "nzLabelProperty", "nzValueProperty", "nzLoadData", "nzPlaceHolder", "nzShowArrow", "nzShowInput", "nzShowSearch", "ngModelChange", "nzClear", "nzVisibleChange", "nzSelectionChange"]], template: function CascaderWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-cascader", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function CascaderWidget_Template_nz_cascader_ngModelChange_1_listener($event) { return ctx._change($event); })("nzClear", function CascaderWidget_Template_nz_cascader_nzClear_1_listener() { return ctx._clear(); })("nzVisibleChange", function CascaderWidget_Template_nz_cascader_nzVisibleChange_1_listener($event) { return ctx._visibleChange($event); })("nzSelectionChange", function CascaderWidget_Template_nz_cascader_nzSelectionChange_1_listener($event) { return ctx._selectionChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzDisabled", ctx.disabled)("nzSize", ctx.ui.size)("ngModel", ctx.value)("nzOptions", ctx.data)("nzAllowClear", ctx.ui.allowClear)("nzAutoFocus", ctx.ui.autoFocus)("nzChangeOn", ctx.ui.changeOn)("nzChangeOnSelect", ctx.ui.changeOnSelect)("nzColumnClassName", ctx.ui.columnClassName)("nzExpandTrigger", ctx.ui.expandTrigger)("nzMenuClassName", ctx.ui.menuClassName)("nzMenuStyle", ctx.ui.menuStyle)("nzNotFoundContent", ctx.ui.notFoundContent)("nzLabelProperty", ctx.ui.labelProperty || "label")("nzValueProperty", ctx.ui.valueProperty || "value")("nzLoadData", ctx.loadData)("nzPlaceHolder", ctx.ui.placeholder)("nzShowArrow", ctx.showArrow)("nzShowInput", ctx.showInput)("nzShowSearch", ctx.ui.showSearch);
    } }, directives: [SFItemWrapComponent, ɵngcc19.NzCascaderComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CascaderWidget, [{
        type: Component,
        args: [{
                selector: 'sf-cascader',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-cascader\n    [nzDisabled]=\"disabled\"\n    [nzSize]=\"ui.size!\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"_change($event)\"\n    [nzOptions]=\"data\"\n    [nzAllowClear]=\"ui.allowClear\"\n    [nzAutoFocus]=\"ui.autoFocus\"\n    [nzChangeOn]=\"ui.changeOn\"\n    [nzChangeOnSelect]=\"ui.changeOnSelect\"\n    [nzColumnClassName]=\"ui.columnClassName\"\n    [nzExpandTrigger]=\"ui.expandTrigger!\"\n    [nzMenuClassName]=\"ui.menuClassName\"\n    [nzMenuStyle]=\"ui.menuStyle!\"\n    [nzNotFoundContent]=\"ui.notFoundContent\"\n    [nzLabelProperty]=\"ui.labelProperty || 'label'\"\n    [nzValueProperty]=\"ui.valueProperty || 'value'\"\n    [nzLoadData]=\"loadData\"\n    [nzPlaceHolder]=\"ui.placeholder!\"\n    [nzShowArrow]=\"showArrow\"\n    [nzShowInput]=\"showInput\"\n    [nzShowSearch]=\"ui.showSearch!\"\n    (nzClear)=\"_clear()\"\n    (nzVisibleChange)=\"_visibleChange($event)\"\n    (nzSelectionChange)=\"_selectionChange($event)\"\n  >\n  </nz-cascader>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class CheckboxWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.data = [];
        this.allChecked = false;
        this.indeterminate = false;
        this.labelTitle = ``;
        this.inited = false;
    }
    reset(value) {
        this.inited = false;
        getData(this.schema, this.ui, value).subscribe(list => {
            this.data = list;
            this.allChecked = false;
            this.indeterminate = false;
            this.labelTitle = list.length === 0 ? '' : this.schema.title;
            const { span } = this.ui;
            this.grid_span = span && span > 0 ? span : 0;
            this.updateAllChecked();
            this.inited = true;
            this.detectChanges();
        });
    }
    _setValue(value) {
        this.setValue(value);
        this.detectChanges();
        this.notifyChange(value);
    }
    notifySet() {
        const checkList = this.data.filter(w => w.checked);
        this.updateAllChecked().setValue(checkList.map(item => item.value));
        this.notifyChange(checkList);
    }
    groupInGridChange(values) {
        this.data.forEach(item => (item.checked = values.indexOf(item.value) !== -1));
        this.notifySet();
    }
    onAllChecked() {
        this.data.forEach(item => (item.checked = this.allChecked));
        this.notifySet();
    }
    updateAllChecked() {
        if (this.data.every(item => item.checked !== true)) {
            this.allChecked = false;
            this.indeterminate = false;
        }
        else if (this.data.every(item => item.checked === true)) {
            this.allChecked = true;
            this.indeterminate = false;
        }
        else {
            this.indeterminate = true;
        }
        this.detectChanges();
        return this;
    }
    notifyChange(res) {
        if (this.ui.change)
            this.ui.change(res);
    }
}
CheckboxWidget.ɵfac = /*@__PURE__*/ function () { let ɵCheckboxWidget_BaseFactory; return function CheckboxWidget_Factory(t) { return (ɵCheckboxWidget_BaseFactory || (ɵCheckboxWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(CheckboxWidget)))(t || CheckboxWidget); }; }();
CheckboxWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: CheckboxWidget, selectors: [["sf-checkbox"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 5, vars: 9, consts: [["all", ""], [3, "id", "schema", "ui", "showError", "error", "showTitle", "title"], [4, "ngIf"], ["nz-checkbox", "", "class", "sf__checkbox-all mr-sm", 3, "ngModel", "nzIndeterminate", "ngModelChange", 4, "ngIf"], ["nz-checkbox", "", 1, "sf__checkbox-all", "mr-sm", 3, "ngModel", "nzIndeterminate", "ngModelChange"], ["nz-checkbox", "", 3, "nzDisabled", "ngModel", "ngModelChange"], [1, "sf__optional"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType", 4, "ngIf"], ["nz-tooltip", "", "nz-icon", "", 3, "nzTooltipTitle", "nzTooltipPlacement", "nzTooltipTrigger", "nzTooltipOverlayClassName", "nzTooltipOverlayStyle", "nzTooltipMouseEnterDelay", "nzTooltipMouseLeaveDelay", "nzType"], [3, "ngTemplateOutlet"], [3, "ngModel", "ngModelChange"], [1, "sf__checkbox-list", 3, "nzOnChange"], ["nz-row", ""], ["nz-col", "", 3, "nzSpan", 4, "ngIf"], ["nz-col", "", 3, "nzSpan", 4, "ngFor", "ngForOf"], ["nz-col", "", 3, "nzSpan"], ["nz-checkbox", "", 3, "nzValue", "ngModel", "nzDisabled"]], template: function CheckboxWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, CheckboxWidget_ng_template_0_Template, 1, 1, "ng-template", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵelementStart(2, "sf-item-wrap", 1);
        ɵngcc0.ɵɵtemplate(3, CheckboxWidget_ng_container_3_Template, 6, 5, "ng-container", 2);
        ɵngcc0.ɵɵtemplate(4, CheckboxWidget_ng_container_4_Template, 3, 2, "ng-container", 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", true)("title", ctx.labelTitle);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.inited && ctx.data.length === 0);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.inited && ctx.data.length > 0);
    } }, directives: [SFItemWrapComponent, ɵngcc8.NgIf, ɵngcc20.NzCheckboxComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc14.NzTooltipDirective, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective, ɵngcc8.NgTemplateOutlet, ɵngcc20.NzCheckboxGroupComponent, ɵngcc20.NzCheckboxWrapperComponent, ɵngcc9.NzRowDirective, ɵngcc8.NgForOf, ɵngcc9.NzColDirective], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CheckboxWidget, [{
        type: Component,
        args: [{
                selector: 'sf-checkbox',
                template: "<ng-template #all>\n  <label\n    *ngIf=\"ui.checkAll\"\n    nz-checkbox\n    class=\"sf__checkbox-all mr-sm\"\n    [(ngModel)]=\"allChecked\"\n    (ngModelChange)=\"onAllChecked()\"\n    [nzIndeterminate]=\"indeterminate\"\n    >{{ ui.checkAllText || l.checkAllText }}</label\n  >\n</ng-template>\n<sf-item-wrap\n  [id]=\"id\"\n  [schema]=\"schema\"\n  [ui]=\"ui\"\n  [showError]=\"showError\"\n  [error]=\"error\"\n  [showTitle]=\"true\"\n  [title]=\"labelTitle\"\n>\n  <ng-container *ngIf=\"inited && data.length === 0\">\n    <label nz-checkbox [nzDisabled]=\"disabled\" [ngModel]=\"value\" (ngModelChange)=\"_setValue($event)\">\n      {{ schema.title }}\n      <span class=\"sf__optional\">\n        {{ ui.optional }}\n        <i\n          *ngIf=\"oh\"\n          nz-tooltip\n          [nzTooltipTitle]=\"oh.text\"\n          [nzTooltipPlacement]=\"oh.placement\"\n          [nzTooltipTrigger]=\"oh.trigger\"\n          [nzTooltipOverlayClassName]=\"oh.overlayClassName\"\n          [nzTooltipOverlayStyle]=\"oh.overlayStyle\"\n          [nzTooltipMouseEnterDelay]=\"oh.mouseEnterDelay\"\n          [nzTooltipMouseLeaveDelay]=\"oh.mouseLeaveDelay\"\n          nz-icon\n          [nzType]=\"oh.icon!\"\n        ></i>\n      </span>\n    </label>\n  </ng-container>\n  <ng-container *ngIf=\"inited && data.length > 0\">\n    <ng-container *ngIf=\"grid_span === 0\">\n      <ng-template [ngTemplateOutlet]=\"all\"></ng-template>\n      <nz-checkbox-group [ngModel]=\"data\" (ngModelChange)=\"notifySet()\"></nz-checkbox-group>\n    </ng-container>\n    <ng-container *ngIf=\"grid_span !== 0\">\n      <nz-checkbox-wrapper class=\"sf__checkbox-list\" (nzOnChange)=\"groupInGridChange($event)\">\n        <div nz-row>\n          <div nz-col [nzSpan]=\"grid_span\" *ngIf=\"ui.checkAll\">\n            <ng-template [ngTemplateOutlet]=\"all\"></ng-template>\n          </div>\n          <div nz-col [nzSpan]=\"grid_span\" *ngFor=\"let i of data\">\n            <label nz-checkbox [nzValue]=\"i.value\" [ngModel]=\"i.checked\" [nzDisabled]=\"i.disabled\">{{ i.label }}</label>\n          </div>\n        </div>\n      </nz-checkbox-wrapper>\n    </ng-container>\n  </ng-container>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class CustomWidget extends ControlUIWidget {
}
CustomWidget.ɵfac = /*@__PURE__*/ function () { let ɵCustomWidget_BaseFactory; return function CustomWidget_Factory(t) { return (ɵCustomWidget_BaseFactory || (ɵCustomWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(CustomWidget)))(t || CustomWidget); }; }();
CustomWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: CustomWidget, selectors: [["sf-custom"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 12, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"]], template: function CustomWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵtemplate(1, CustomWidget_ng_template_1_Template, 0, 0, "ng-template", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngTemplateOutlet", ctx.ui._render)("ngTemplateOutletContext", ɵngcc0.ɵɵpureFunction3(8, _c2, ctx, ctx.schema, ctx.ui));
    } }, directives: [SFItemWrapComponent, ɵngcc8.NgTemplateOutlet], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CustomWidget, [{
        type: Component,
        args: [{
                selector: 'sf-custom',
                template: `
    <sf-item-wrap
      [id]="id"
      [schema]="schema"
      [ui]="ui"
      [showError]="showError"
      [error]="error"
      [showTitle]="schema.title"
    >
      <ng-template
        [ngTemplateOutlet]="$any(ui)._render"
        [ngTemplateOutletContext]="{ $implicit: this, schema: schema, ui: ui }"
      ></ng-template>
    </sf-item-wrap>
  `,
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class DateWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.flatRange = false;
        this.displayValue = null;
    }
    ngOnInit() {
        const { mode, end, displayFormat, allowClear, showToday } = this.ui;
        this.mode = mode || 'date';
        this.flatRange = end != null;
        // 构建属性对象时会对默认值进行校验，因此可以直接使用 format 作为格式化属性
        this.startFormat = this.ui._format;
        if (this.flatRange) {
            this.mode = 'range';
            const endUi = this.endProperty.ui;
            this.endFormat = endUi.format ? endUi._format : this.startFormat;
        }
        if (!displayFormat) {
            switch (this.mode) {
                case 'year':
                    this.displayFormat = `yyyy`;
                    break;
                case 'month':
                    this.displayFormat = `yyyy-MM`;
                    break;
                case 'week':
                    this.displayFormat = `yyyy-ww`;
                    break;
            }
        }
        else {
            this.displayFormat = displayFormat;
        }
        this.i = {
            allowClear: toBool(allowClear, true),
            // nz-date-picker
            showToday: toBool(showToday, true)
        };
    }
    reset(value) {
        const toDateOptions = { formatString: this.startFormat, defaultValue: null };
        if (Array.isArray(value)) {
            value = value.map(v => toDate(v, toDateOptions));
        }
        else {
            value = toDate(value, toDateOptions);
        }
        if (this.flatRange) {
            const endValue = toDate(this.endProperty.formData, {
                formatString: this.endFormat || this.startFormat,
                defaultValue: null
            });
            this.displayValue = value == null || endValue == null ? [] : [value, endValue];
        }
        else {
            this.displayValue = value;
        }
        this.detectChanges();
        // TODO: Need to wait for the rendering to complete, otherwise it will be overwritten of end widget
        if (this.displayValue) {
            setTimeout(() => this._change(this.displayValue, false));
        }
    }
    _change(value, emitModelChange = true) {
        if (emitModelChange && this.ui.change) {
            this.ui.change(value);
        }
        if (value == null || (Array.isArray(value) && value.length < 2)) {
            this.setValue(null);
            this.setEnd(null);
            return;
        }
        const res = Array.isArray(value)
            ? [format(value[0], this.startFormat), format(value[1], this.endFormat || this.startFormat)]
            : format(value, this.startFormat);
        if (this.flatRange) {
            this.setValue(res[0]);
            this.setEnd(res[1]);
        }
        else {
            this.setValue(res);
        }
    }
    _openChange(status) {
        if (this.ui.onOpenChange)
            this.ui.onOpenChange(status);
    }
    _ok(value) {
        if (this.ui.onOk)
            this.ui.onOk(value);
    }
    get endProperty() {
        return this.formProperty.parent.properties[this.ui.end];
    }
    setEnd(value) {
        if (!this.flatRange)
            return;
        this.endProperty.setValue(value, true);
        this.endProperty.updateValueAndValidity();
    }
}
DateWidget.ɵfac = /*@__PURE__*/ function () { let ɵDateWidget_BaseFactory; return function DateWidget_Factory(t) { return (ɵDateWidget_BaseFactory || (ɵDateWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(DateWidget)))(t || DateWidget); }; }();
DateWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: DateWidget, selectors: [["sf-date"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 7, vars: 11, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "ngSwitch"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzRenderExtraFooter", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", 4, "ngSwitchCase"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", 4, "ngSwitchCase"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzDisabledTime", "nzRenderExtraFooter", "nzRanges", "nzShowTime", "nzMode", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", "nzOnOk", 4, "ngSwitchCase"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzDisabledTime", "nzRenderExtraFooter", "nzShowTime", "nzShowToday", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", "nzOnOk", 4, "ngSwitchDefault"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzRenderExtraFooter", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzDisabledTime", "nzRenderExtraFooter", "nzRanges", "nzShowTime", "nzMode", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", "nzOnOk"], [3, "nzId", "nzDisabled", "nzSize", "nzFormat", "ngModel", "nzAllowClear", "ngClass", "nzDisabledDate", "nzLocale", "nzPlaceHolder", "nzPopupStyle", "nzDropdownClassName", "nzDisabledTime", "nzRenderExtraFooter", "nzShowTime", "nzShowToday", "nzInputReadOnly", "nzInline", "ngModelChange", "nzOnOpenChange", "nzOnOk"]], template: function DateWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementContainerStart(1, 1);
        ɵngcc0.ɵɵtemplate(2, DateWidget_nz_year_picker_2_Template, 1, 15, "nz-year-picker", 2);
        ɵngcc0.ɵɵtemplate(3, DateWidget_nz_month_picker_3_Template, 1, 15, "nz-month-picker", 2);
        ɵngcc0.ɵɵtemplate(4, DateWidget_nz_week_picker_4_Template, 1, 14, "nz-week-picker", 3);
        ɵngcc0.ɵɵtemplate(5, DateWidget_nz_range_picker_5_Template, 1, 19, "nz-range-picker", 4);
        ɵngcc0.ɵɵtemplate(6, DateWidget_nz_date_picker_6_Template, 1, 18, "nz-date-picker", 5);
        ɵngcc0.ɵɵelementContainerEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitch", ctx.mode);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "year");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "month");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "week");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "range");
    } }, directives: [SFItemWrapComponent, ɵngcc8.NgSwitch, ɵngcc8.NgSwitchCase, ɵngcc8.NgSwitchDefault, ɵngcc21.NzDatePickerComponent, ɵngcc21.NzYearPickerComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc8.NgClass, ɵngcc21.NzMonthPickerComponent, ɵngcc21.NzWeekPickerComponent, ɵngcc21.NzRangePickerComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DateWidget, [{
        type: Component,
        args: [{
                selector: 'sf-date',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <ng-container [ngSwitch]=\"mode\">\n    <nz-year-picker\n      *ngSwitchCase=\"'year'\"\n      [nzId]=\"id\"\n      [nzDisabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzFormat]=\"displayFormat\"\n      [(ngModel)]=\"displayValue\"\n      (ngModelChange)=\"_change($event)\"\n      [nzAllowClear]=\"i.allowClear\"\n      [ngClass]=\"ui.className!\"\n      [nzDisabledDate]=\"ui.disabledDate\"\n      [nzLocale]=\"ui.locale!\"\n      [nzPlaceHolder]=\"ui.placeholder!\"\n      [nzPopupStyle]=\"ui.popupStyle!\"\n      [nzDropdownClassName]=\"ui.dropdownClassName\"\n      (nzOnOpenChange)=\"_openChange($event)\"\n      [nzRenderExtraFooter]=\"ui.renderExtraFooter\"\n      [nzInputReadOnly]=\"ui.inputReadOnly\"\n      [nzInline]=\"ui.inline!\"\n    ></nz-year-picker>\n\n    <nz-month-picker\n      *ngSwitchCase=\"'month'\"\n      [nzId]=\"id\"\n      [nzDisabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzFormat]=\"displayFormat\"\n      [(ngModel)]=\"displayValue\"\n      (ngModelChange)=\"_change($event)\"\n      [nzAllowClear]=\"i.allowClear\"\n      [ngClass]=\"ui.className!\"\n      [nzDisabledDate]=\"ui.disabledDate\"\n      [nzLocale]=\"ui.locale!\"\n      [nzPlaceHolder]=\"ui.placeholder!\"\n      [nzPopupStyle]=\"ui.popupStyle!\"\n      [nzDropdownClassName]=\"ui.dropdownClassName\"\n      (nzOnOpenChange)=\"_openChange($event)\"\n      [nzRenderExtraFooter]=\"ui.renderExtraFooter\"\n      [nzInputReadOnly]=\"ui.inputReadOnly\"\n      [nzInline]=\"ui.inline!\"\n    ></nz-month-picker>\n\n    <nz-week-picker\n      *ngSwitchCase=\"'week'\"\n      [nzId]=\"id\"\n      [nzDisabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzFormat]=\"displayFormat\"\n      [(ngModel)]=\"displayValue\"\n      (ngModelChange)=\"_change($event)\"\n      [nzAllowClear]=\"i.allowClear\"\n      [ngClass]=\"ui.className!\"\n      [nzDisabledDate]=\"ui.disabledDate\"\n      [nzLocale]=\"ui.locale!\"\n      [nzPlaceHolder]=\"ui.placeholder!\"\n      [nzPopupStyle]=\"ui.popupStyle!\"\n      [nzDropdownClassName]=\"ui.dropdownClassName\"\n      [nzInputReadOnly]=\"ui.inputReadOnly\"\n      [nzInline]=\"ui.inline!\"\n      (nzOnOpenChange)=\"_openChange($event)\"\n    ></nz-week-picker>\n\n    <nz-range-picker\n      *ngSwitchCase=\"'range'\"\n      [nzId]=\"id\"\n      [nzDisabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzFormat]=\"displayFormat\"\n      [(ngModel)]=\"displayValue\"\n      (ngModelChange)=\"_change($event)\"\n      [nzAllowClear]=\"i.allowClear\"\n      [ngClass]=\"ui.className!\"\n      [nzDisabledDate]=\"ui.disabledDate\"\n      [nzLocale]=\"ui.locale!\"\n      [nzPlaceHolder]=\"ui.placeholder!\"\n      [nzPopupStyle]=\"ui.popupStyle!\"\n      [nzDropdownClassName]=\"ui.dropdownClassName\"\n      (nzOnOpenChange)=\"_openChange($event)\"\n      [nzDisabledTime]=\"ui.disabledTime\"\n      [nzRenderExtraFooter]=\"ui.renderExtraFooter\"\n      [nzRanges]=\"ui.ranges\"\n      [nzShowTime]=\"ui.showTime\"\n      [nzMode]=\"ui.rangeMode\"\n      [nzInputReadOnly]=\"ui.inputReadOnly\"\n      [nzInline]=\"ui.inline!\"\n      (nzOnOk)=\"_ok($event)\"\n    ></nz-range-picker>\n\n    <nz-date-picker\n      *ngSwitchDefault\n      [nzId]=\"id\"\n      [nzDisabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzFormat]=\"displayFormat\"\n      [(ngModel)]=\"displayValue\"\n      (ngModelChange)=\"_change($event)\"\n      [nzAllowClear]=\"i.allowClear\"\n      [ngClass]=\"ui.className!\"\n      [nzDisabledDate]=\"ui.disabledDate\"\n      [nzLocale]=\"ui.locale!\"\n      [nzPlaceHolder]=\"ui.placeholder!\"\n      [nzPopupStyle]=\"ui.popupStyle!\"\n      [nzDropdownClassName]=\"ui.dropdownClassName\"\n      (nzOnOpenChange)=\"_openChange($event)\"\n      [nzDisabledTime]=\"ui.disabledTime\"\n      [nzRenderExtraFooter]=\"ui.renderExtraFooter\"\n      [nzShowTime]=\"ui.showTime\"\n      [nzShowToday]=\"i.showToday\"\n      [nzInputReadOnly]=\"ui.inputReadOnly\"\n      [nzInline]=\"ui.inline!\"\n      (nzOnOk)=\"_ok($event)\"\n    ></nz-date-picker>\n  </ng-container>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class MentionWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.data = [];
        this.loading = false;
    }
    ngOnInit() {
        const { valueWith, notFoundContent, placement, prefix, autosize } = this.ui;
        this.i = {
            valueWith: valueWith || (item => item.label),
            notFoundContent: notFoundContent || '无匹配结果，轻敲空格完成输入',
            placement: placement || 'bottom',
            prefix: prefix || '@',
            autosize: typeof autosize === 'undefined' ? true : this.ui.autosize
        };
        const { minimum, maximum } = this.schema;
        const min = typeof minimum !== 'undefined' ? minimum : -1;
        const max = typeof maximum !== 'undefined' ? maximum : -1;
        if (!this.ui.validator && (min !== -1 || max !== -1)) {
            this.ui.validator = (() => {
                const count = this.mentionChild.getMentions().length;
                if (min !== -1 && count < min) {
                    return [{ keyword: 'mention', message: `最少提及 ${min} 次` }];
                }
                if (max !== -1 && count > max) {
                    return [{ keyword: 'mention', message: `最多提及 ${max} 次` }];
                }
                return null;
            });
        }
    }
    reset(_value) {
        getData(this.schema, this.ui, null).subscribe(list => {
            this.data = list;
            this.detectChanges();
        });
    }
    _select(options) {
        if (this.ui.select)
            this.ui.select(options);
    }
    _search(option) {
        if (typeof this.ui.loadData !== 'function')
            return;
        this.loading = true;
        this.ui
            .loadData(option)
            .pipe(tap(() => (this.loading = false)), map(res => getEnum(res, null, this.schema.readOnly)))
            .subscribe(res => {
            this.data = res;
            this.detectChanges(true);
        });
    }
}
MentionWidget.ɵfac = /*@__PURE__*/ function () { let ɵMentionWidget_BaseFactory; return function MentionWidget_Factory(t) { return (ɵMentionWidget_BaseFactory || (ɵMentionWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(MentionWidget)))(t || MentionWidget); }; }();
MentionWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: MentionWidget, selectors: [["sf-mention"]], viewQuery: function MentionWidget_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c3, 7);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.mentionChild = _t.first);
    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 5, vars: 14, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzSuggestions", "nzValueWith", "nzLoading", "nzNotFoundContent", "nzPlacement", "nzPrefix", "nzOnSelect", "nzOnSearchChange"], ["mentions", ""], ["nzMentionTrigger", "", "nz-input", "", "autocomplete", "off", 3, "disabled", "nzSize", "ngModel", "ngModelChange", 4, "ngIf"], ["nzMentionTrigger", "", "nz-input", "", 3, "disabled", "nzSize", "ngModel", "nzAutosize", "ngModelChange", 4, "ngIf"], ["nzMentionTrigger", "", "nz-input", "", "autocomplete", "off", 3, "disabled", "nzSize", "ngModel", "ngModelChange"], ["nzMentionTrigger", "", "nz-input", "", 3, "disabled", "nzSize", "ngModel", "nzAutosize", "ngModelChange"]], template: function MentionWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-mention", 1, 2);
        ɵngcc0.ɵɵlistener("nzOnSelect", function MentionWidget_Template_nz_mention_nzOnSelect_1_listener($event) { return ctx._select($event); })("nzOnSearchChange", function MentionWidget_Template_nz_mention_nzOnSearchChange_1_listener($event) { return ctx._search($event); });
        ɵngcc0.ɵɵtemplate(3, MentionWidget_input_3_Template, 1, 7, "input", 3);
        ɵngcc0.ɵɵtemplate(4, MentionWidget_textarea_4_Template, 2, 8, "textarea", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzSuggestions", ctx.data)("nzValueWith", ctx.i.valueWith)("nzLoading", ctx.loading)("nzNotFoundContent", ctx.i.notFoundContent)("nzPlacement", ctx.i.placement)("nzPrefix", ctx.i.prefix);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.ui.inputStyle !== "textarea");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.ui.inputStyle === "textarea");
    } }, directives: [SFItemWrapComponent, ɵngcc22.NzMentionComponent, ɵngcc8.NgIf, ɵngcc22.NzMentionTriggerDirective, ɵngcc16.NzInputDirective, ɵngcc6.DefaultValueAccessor, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc16.NzAutosizeDirective], encapsulation: 2 });
MentionWidget.propDecorators = {
    mentionChild: [{ type: ViewChild, args: ['mentions', { static: true },] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MentionWidget, [{
        type: Component,
        args: [{
                selector: 'sf-mention',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-mention\n    #mentions\n    [nzSuggestions]=\"data\"\n    [nzValueWith]=\"i.valueWith\"\n    [nzLoading]=\"loading\"\n    [nzNotFoundContent]=\"i.notFoundContent\"\n    [nzPlacement]=\"i.placement\"\n    [nzPrefix]=\"i.prefix\"\n    (nzOnSelect)=\"_select($event)\"\n    (nzOnSearchChange)=\"_search($event)\"\n  >\n    <input\n      *ngIf=\"ui.inputStyle !== 'textarea'\"\n      nzMentionTrigger\n      nz-input\n      [attr.id]=\"id\"\n      [disabled]=\"disabled\"\n      [attr.disabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [ngModel]=\"value\"\n      (ngModelChange)=\"setValue($event)\"\n      [attr.maxLength]=\"schema.maxLength || null\"\n      [attr.placeholder]=\"ui.placeholder\"\n      autocomplete=\"off\"\n    />\n    <textarea\n      *ngIf=\"ui.inputStyle === 'textarea'\"\n      nzMentionTrigger\n      nz-input\n      [attr.id]=\"id\"\n      [disabled]=\"disabled\"\n      [attr.disabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [ngModel]=\"value\"\n      (ngModelChange)=\"setValue($event)\"\n      [attr.maxLength]=\"schema.maxLength || null\"\n      [attr.placeholder]=\"ui.placeholder\"\n      [nzAutosize]=\"i.autosize\"\n    >\n    </textarea>\n  </nz-mention>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, { mentionChild: [{
            type: ViewChild,
            args: ['mentions', { static: true }]
        }] }); })();

class NumberWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.formatter = value => value;
        this.parser = value => value;
    }
    ngOnInit() {
        const { minimum, exclusiveMinimum, maximum, exclusiveMaximum, multipleOf, type } = this.schema;
        if (typeof minimum !== 'undefined') {
            this.min = exclusiveMinimum ? minimum + 1 : minimum;
        }
        if (typeof maximum !== 'undefined') {
            this.max = exclusiveMaximum ? maximum - 1 : maximum;
        }
        this.step = multipleOf || 1;
        if (type === 'integer') {
            this.min = Math.trunc(this.min);
            this.max = Math.trunc(this.max);
            this.step = Math.trunc(this.step);
        }
        const ui = this.ui;
        if (ui.prefix != null) {
            ui.formatter = value => (value == null ? '' : `${ui.prefix} ${value}`);
            ui.parser = value => value.replace(`${ui.prefix} `, '');
        }
        if (ui.unit != null) {
            ui.formatter = value => (value == null ? '' : `${value} ${ui.unit}`);
            ui.parser = value => value.replace(` ${ui.unit}`, '');
        }
        if (ui.formatter)
            this.formatter = ui.formatter;
        if (ui.parser)
            this.parser = ui.parser;
    }
    _setValue(val) {
        this.setValue(this.schema.type === 'integer' ? Math.floor(val) : val);
    }
}
NumberWidget.ɵfac = /*@__PURE__*/ function () { let ɵNumberWidget_BaseFactory; return function NumberWidget_Factory(t) { return (ɵNumberWidget_BaseFactory || (ɵNumberWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NumberWidget)))(t || NumberWidget); }; }();
NumberWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: NumberWidget, selectors: [["sf-number"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 22, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzId", "ngModel", "nzDisabled", "nzSize", "nzMin", "nzMax", "nzStep", "nzFormatter", "nzParser", "nzPrecision", "nzPlaceHolder", "ngClass", "ngModelChange"]], template: function NumberWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-input-number", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function NumberWidget_Template_nz_input_number_ngModelChange_1_listener($event) { return ctx._setValue($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵstyleProp("width", ctx.ui.widgetWidth || 90, "px");
        ɵngcc0.ɵɵproperty("nzId", ctx.id)("ngModel", ctx.value)("nzDisabled", ctx.disabled)("nzSize", ctx.ui.size)("nzMin", ctx.min)("nzMax", ctx.max)("nzStep", ctx.step)("nzFormatter", ctx.formatter)("nzParser", ctx.parser)("nzPrecision", ctx.ui.precision)("nzPlaceHolder", ctx.ui.placeholder || "")("ngClass", ɵngcc0.ɵɵpureFunction1(20, _c4, ctx.ui.hideStep));
    } }, directives: [SFItemWrapComponent, ɵngcc23.NzInputNumberComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc8.NgClass], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NumberWidget, [{
        type: Component,
        args: [{
                selector: 'sf-number',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-input-number\n    [nzId]=\"id\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"_setValue($event)\"\n    [nzDisabled]=\"disabled\"\n    [nzSize]=\"ui.size!\"\n    [nzMin]=\"min\"\n    [nzMax]=\"max\"\n    [nzStep]=\"step\"\n    [nzFormatter]=\"formatter\"\n    [nzParser]=\"parser\"\n    [nzPrecision]=\"ui.precision\"\n    [nzPlaceHolder]=\"ui.placeholder || ''\"\n    [style.width.px]=\"ui.widgetWidth || 90\"\n    [ngClass]=\"{ 'ant-input-number__hide-step': ui.hideStep }\"\n  >\n  </nz-input-number>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class ObjectWidget extends ObjectLayoutWidget {
    constructor() {
        super(...arguments);
        this.type = 'default';
        this.list = [];
        this.showExpand = true;
        this.expand = true;
    }
    ngOnInit() {
        const { formProperty, ui } = this;
        const { grid, showTitle, type } = ui;
        this.showExpand = toBool(ui.showExpand, true);
        this.expand = toBool(ui.expand, true);
        this.type = type !== null && type !== void 0 ? type : 'default';
        if (this.type === 'card' ||
            (!formProperty.isRoot() && !(formProperty.parent instanceof ArrayProperty) && showTitle === true)) {
            this.title = this.schema.title;
        }
        this.grid = grid;
        const list = [];
        for (const key of formProperty.propertiesId) {
            const property = formProperty.properties[key];
            const item = {
                property,
                grid: property.ui.grid || grid || {},
                spanLabelFixed: property.ui.spanLabelFixed,
                show: property.ui.hidden === false
            };
            list.push(item);
        }
        this.list = list;
    }
    changeExpand() {
        if (!this.showExpand) {
            return;
        }
        this.expand = !this.expand;
        this.detectChanges(true);
    }
}
ObjectWidget.ɵfac = /*@__PURE__*/ function () { let ɵObjectWidget_BaseFactory; return function ObjectWidget_Factory(t) { return (ɵObjectWidget_BaseFactory || (ɵObjectWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(ObjectWidget)))(t || ObjectWidget); }; }();
ObjectWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ObjectWidget, selectors: [["sf-object"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 3, vars: 2, consts: [["default", ""], ["class", "sf__object-card", 3, "nzTitle", "nzExtra", "nzSize", "nzActions", "nzBodyStyle", "nzBordered", "nzBorderless", "sf__object-card-fold", 4, "ngIf", "ngIfElse"], ["class", "sf__title", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["noGrid", ""], [1, "sf__title"], ["nz-row", "", 3, "nzGutter"], [4, "ngFor", "ngForOf"], [4, "ngIf"], ["nz-col", "", 3, "nzSpan", "nzOffset", "nzXs", "nzSm", "nzMd", "nzLg", "nzXl", "nzXXl"], [3, "formProperty", "fixed-label"], [1, "sf__object-card", 3, "nzTitle", "nzExtra", "nzSize", "nzActions", "nzBodyStyle", "nzBordered", "nzBorderless"], ["cardTitleTpl", ""], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], [3, "click"], ["nz-icon", "", "class", "mr-xs text-xs", 3, "nzType", 4, "ngIf"], ["nz-icon", "", 1, "mr-xs", "text-xs", 3, "nzType"]], template: function ObjectWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵtemplate(0, ObjectWidget_ng_template_0_Template, 4, 3, "ng-template", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(2, ObjectWidget_nz_card_2_Template, 4, 13, "nz-card", 1);
    } if (rf & 2) {
        const _r0 = ɵngcc0.ɵɵreference(1);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", ctx.type === "card")("ngIfElse", _r0);
    } }, directives: [ɵngcc8.NgIf, ɵngcc9.NzRowDirective, ɵngcc8.NgForOf, ɵngcc9.NzColDirective, SFItemComponent, SFFixedDirective, ɵngcc15.NzCardComponent, ɵngcc8.NgTemplateOutlet, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ObjectWidget, [{
        type: Component,
        args: [{
                selector: 'sf-object',
                template: "<ng-template #default let-noTitle>\n  <div *ngIf=\"!noTitle && title\" class=\"sf__title\">{{ title }}</div>\n  <ng-container *ngIf=\"grid; else noGrid\">\n    <div nz-row [nzGutter]=\"grid.gutter\">\n      <ng-container *ngFor=\"let i of list\">\n        <ng-container *ngIf=\"i.property.visible && i.show\">\n          <div\n            nz-col\n            [nzSpan]=\"i.grid.span\"\n            [nzOffset]=\"i.grid.offset\"\n            [nzXs]=\"i.grid.xs\"\n            [nzSm]=\"i.grid.sm\"\n            [nzMd]=\"i.grid.md\"\n            [nzLg]=\"i.grid.lg\"\n            [nzXl]=\"i.grid.xl\"\n            [nzXXl]=\"i.grid.xxl\"\n          >\n            <sf-item [formProperty]=\"i.property\" [fixed-label]=\"i.spanLabelFixed\"></sf-item>\n          </div>\n        </ng-container>\n      </ng-container>\n    </div>\n  </ng-container>\n  <ng-template #noGrid>\n    <ng-container *ngFor=\"let i of list\">\n      <ng-container *ngIf=\"i.property.visible && i.show\">\n        <sf-item [formProperty]=\"i.property\" [fixed-label]=\"i.spanLabelFixed\"></sf-item>\n      </ng-container>\n    </ng-container>\n  </ng-template>\n</ng-template>\n<nz-card\n  *ngIf=\"type === 'card'; else default\"\n  [nzTitle]=\"cardTitleTpl\"\n  [nzExtra]=\"ui.cardExtra\"\n  [nzSize]=\"ui.cardSize || 'small'\"\n  [nzActions]=\"ui.cardActions || []\"\n  [nzBodyStyle]=\"ui.cardBodyStyle!\"\n  [nzBordered]=\"ui.cardBordered || true\"\n  [nzBorderless]=\"ui.cardBorderless || false\"\n  class=\"sf__object-card\"\n  [class.sf__object-card-fold]=\"!expand\"\n>\n  <ng-template #cardTitleTpl>\n    <div [class.point]=\"showExpand\" (click)=\"changeExpand()\">\n      <i *ngIf=\"showExpand\" nz-icon [nzType]=\"expand ? 'down' : 'up'\" class=\"mr-xs text-xs\"></i>\n      {{ title }}\n    </div>\n  </ng-template>\n  <ng-template [ngTemplateOutlet]=\"default\" [ngTemplateOutletContext]=\"{ $implicit: true }\"></ng-template>\n</nz-card>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class RadioWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.data = [];
    }
    reset(value) {
        this.styleType = (this.ui.styleType || 'default') === 'default';
        getData(this.schema, this.ui, value).subscribe(list => {
            this.data = list.map(i => {
                i.label = this.dom.bypassSecurityTrustHtml(i.label);
                return i;
            });
            this.detectChanges();
        });
    }
    _setValue(value) {
        this.setValue(value);
        if (this.ui.change)
            this.ui.change(value);
    }
}
RadioWidget.ɵfac = /*@__PURE__*/ function () { let ɵRadioWidget_BaseFactory; return function RadioWidget_Factory(t) { return (ɵRadioWidget_BaseFactory || (ɵRadioWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(RadioWidget)))(t || RadioWidget); }; }();
RadioWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: RadioWidget, selectors: [["sf-radio"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 4, vars: 12, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzSize", "nzName", "ngModel", "nzButtonStyle", "ngModelChange"], [4, "ngIf"], ["nz-radio", "", 3, "nzValue", "nzDisabled", 4, "ngFor", "ngForOf"], ["nz-radio", "", 3, "nzValue", "nzDisabled"], [3, "innerHTML"], ["nz-radio-button", "", 3, "nzValue", "nzDisabled", 4, "ngFor", "ngForOf"], ["nz-radio-button", "", 3, "nzValue", "nzDisabled"]], template: function RadioWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-radio-group", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function RadioWidget_Template_nz_radio_group_ngModelChange_1_listener($event) { return ctx._setValue($event); });
        ɵngcc0.ɵɵtemplate(2, RadioWidget_ng_container_2_Template, 2, 1, "ng-container", 2);
        ɵngcc0.ɵɵtemplate(3, RadioWidget_ng_container_3_Template, 2, 1, "ng-container", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzSize", ctx.ui.size)("nzName", ctx.id)("ngModel", ctx.value)("nzButtonStyle", ctx.ui.buttonStyle || "outline");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.styleType);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.styleType);
    } }, directives: [SFItemWrapComponent, ɵngcc24.NzRadioGroupComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc8.NgIf, ɵngcc8.NgForOf, ɵngcc24.NzRadioComponent, ɵngcc24.NzRadioButtonDirective], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(RadioWidget, [{
        type: Component,
        args: [{
                selector: 'sf-radio',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-radio-group\n    [nzSize]=\"ui.size!\"\n    [nzName]=\"id\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"_setValue($event)\"\n    [nzButtonStyle]=\"ui.buttonStyle || 'outline'\"\n  >\n    <ng-container *ngIf=\"styleType\">\n      <label *ngFor=\"let option of data\" nz-radio [nzValue]=\"option.value\" [nzDisabled]=\"disabled || option.disabled\">\n        <span [innerHTML]=\"option.label\"></span>\n      </label>\n    </ng-container>\n    <ng-container *ngIf=\"!styleType\">\n      <label\n        *ngFor=\"let option of data\"\n        nz-radio-button\n        [nzValue]=\"option.value\"\n        [nzDisabled]=\"disabled || option.disabled\"\n      >\n        <span [innerHTML]=\"option.label\"></span>\n      </label>\n    </ng-container>\n  </nz-radio-group>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class RateWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.hasText = false;
    }
    get text() {
        return this.ui.text.replace('{{value}}', this.formProperty.value);
    }
    ngOnInit() {
        const { schema, ui } = this;
        this.count = schema.maximum || 5;
        this.allowHalf = (schema.multipleOf || 0.5) === 0.5;
        this.allowClear = toBool(ui.allowClear, true);
        this.autoFocus = toBool(ui.autoFocus, false);
        this.hasText = !!ui.text;
    }
}
RateWidget.ɵfac = /*@__PURE__*/ function () { let ɵRateWidget_BaseFactory; return function RateWidget_Factory(t) { return (ɵRateWidget_BaseFactory || (ɵRateWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(RateWidget)))(t || RateWidget); }; }();
RateWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: RateWidget, selectors: [["sf-rate"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 3, vars: 15, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzDisabled", "ngModel", "nzAllowClear", "nzAllowHalf", "nzTooltips", "nzAutoFocus", "nzCount", "ngModelChange"], ["class", "ant-rate-text", 4, "ngIf"], [1, "ant-rate-text"]], template: function RateWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-rate", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function RateWidget_Template_nz_rate_ngModelChange_1_listener($event) { return ctx.setValue($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(2, RateWidget_span_2_Template, 2, 1, "span", 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzDisabled", ctx.disabled)("ngModel", ctx.value)("nzAllowClear", ctx.allowClear)("nzAllowHalf", ctx.allowHalf)("nzTooltips", ctx.ui.tooltips || ɵngcc0.ɵɵpureFunction0(14, _c5))("nzAutoFocus", ctx.autoFocus)("nzCount", ctx.count);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.hasText && ctx.formProperty.value);
    } }, directives: [SFItemWrapComponent, ɵngcc25.NzRateComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc8.NgIf], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(RateWidget, [{
        type: Component,
        args: [{
                selector: 'sf-rate',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-rate\n    [nzDisabled]=\"disabled\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"setValue($event)\"\n    [nzAllowClear]=\"allowClear\"\n    [nzAllowHalf]=\"allowHalf\"\n    [nzTooltips]=\"ui.tooltips || []\"\n    [nzAutoFocus]=\"autoFocus\"\n    [nzCount]=\"$any(count)\"\n  ></nz-rate>\n  <span *ngIf=\"hasText && formProperty.value\" class=\"ant-rate-text\">{{ text }}</span>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class SelectWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.search$ = new Subject();
        this.hasGroup = false;
        this.loading = false;
    }
    checkGroup(list) {
        this.hasGroup = (list || []).filter(w => w.group === true).length > 0;
    }
    ngOnInit() {
        const { autoClearSearchValue, borderless, autoFocus, dropdownMatchSelectWidth, serverSearch, maxMultipleCount, mode, showSearch, tokenSeparators, maxTagCount, compareWith, optionHeightPx, optionOverflowSize, showArrow } = this.ui;
        this.i = {
            autoClearSearchValue: toBool(autoClearSearchValue, true),
            borderless: toBool(borderless, false),
            autoFocus: toBool(autoFocus, false),
            dropdownMatchSelectWidth: toBool(dropdownMatchSelectWidth, true),
            serverSearch: toBool(serverSearch, false),
            maxMultipleCount: maxMultipleCount || Infinity,
            mode: mode || 'default',
            showSearch: toBool(showSearch, true),
            tokenSeparators: tokenSeparators || [],
            maxTagCount: maxTagCount || undefined,
            optionHeightPx: optionHeightPx || 32,
            optionOverflowSize: optionOverflowSize || 8,
            showArrow: typeof showArrow !== 'boolean' ? undefined : showArrow,
            compareWith: compareWith || ((o1, o2) => o1 === o2)
        };
        const onSearch = this.ui.onSearch;
        if (onSearch) {
            this.search$
                .pipe(takeUntil(this.sfItemComp.unsubscribe$), distinctUntilChanged(), debounceTime(this.ui.searchDebounceTime || 300), switchMap(text => onSearch(text)), catchError(() => []))
                .subscribe(list => {
                this.data = list;
                this.checkGroup(list);
                this.loading = false;
                this.detectChanges();
            });
        }
    }
    reset(value) {
        getData(this.schema, this.ui, value).subscribe(list => {
            this._value = value;
            this.data = list;
            this.checkGroup(list);
            this.detectChanges();
        });
    }
    change(values) {
        if (this.ui.change) {
            this.ui.change(values, this.getOrgData(values));
        }
        this.setValue(values == null ? undefined : values);
    }
    getOrgData(values) {
        const srv = this.injector.get(ArrayService);
        if (!Array.isArray(values)) {
            return srv.findTree(this.data, (item) => item.value === values);
        }
        return values.map(value => srv.findTree(this.data, (item) => item.value === value));
    }
    openChange(status) {
        if (this.ui.openChange) {
            this.ui.openChange(status);
        }
    }
    scrollToBottom() {
        if (this.ui.scrollToBottom) {
            this.ui.scrollToBottom();
        }
    }
    onSearch(value) {
        if (this.ui.onSearch) {
            this.loading = true;
            this.search$.next(value);
        }
    }
}
SelectWidget.ɵfac = /*@__PURE__*/ function () { let ɵSelectWidget_BaseFactory; return function SelectWidget_Factory(t) { return (ɵSelectWidget_BaseFactory || (ɵSelectWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(SelectWidget)))(t || SelectWidget); }; }();
SelectWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SelectWidget, selectors: [["sf-select"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 5, vars: 39, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzId", "nzDisabled", "ngModel", "nzSize", "nzPlaceHolder", "nzNotFoundContent", "nzDropdownClassName", "nzAllowClear", "nzDropdownStyle", "nzCustomTemplate", "nzSuffixIcon", "nzRemoveIcon", "nzClearIcon", "nzMenuItemSelectedIcon", "nzMaxTagPlaceholder", "nzDropdownRender", "nzAutoClearSearchValue", "nzBorderless", "nzAutoFocus", "nzDropdownMatchSelectWidth", "nzServerSearch", "nzMaxMultipleCount", "nzMode", "nzShowSearch", "nzShowArrow", "nzTokenSeparators", "nzMaxTagCount", "compareWith", "nzOptionHeightPx", "nzOptionOverflowSize", "ngModelChange", "nzOpenChange", "nzOnSearch", "nzScrollToBottom"], [4, "ngIf"], ["nzDisabled", "", "nzCustomContent", "", 4, "ngIf"], [3, "nzLabel", "nzValue", "nzDisabled", 4, "ngFor", "ngForOf"], [3, "nzLabel", "nzValue", "nzDisabled"], [3, "nzLabel", 4, "ngFor", "ngForOf"], [3, "nzLabel"], ["nzDisabled", "", "nzCustomContent", ""], ["nz-icon", "", "nzType", "loading"]], template: function SelectWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-select", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function SelectWidget_Template_nz_select_ngModelChange_1_listener($event) { return ctx._value = $event; })("ngModelChange", function SelectWidget_Template_nz_select_ngModelChange_1_listener($event) { return ctx.change($event); })("nzOpenChange", function SelectWidget_Template_nz_select_nzOpenChange_1_listener($event) { return ctx.openChange($event); })("nzOnSearch", function SelectWidget_Template_nz_select_nzOnSearch_1_listener($event) { return ctx.onSearch($event); })("nzScrollToBottom", function SelectWidget_Template_nz_select_nzScrollToBottom_1_listener() { return ctx.scrollToBottom(); });
        ɵngcc0.ɵɵtemplate(2, SelectWidget_ng_container_2_Template, 2, 1, "ng-container", 2);
        ɵngcc0.ɵɵtemplate(3, SelectWidget_ng_container_3_Template, 2, 1, "ng-container", 2);
        ɵngcc0.ɵɵtemplate(4, SelectWidget_nz_option_4_Template, 3, 1, "nz-option", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzId", ctx.id)("nzDisabled", ctx.disabled)("ngModel", ctx._value)("nzSize", ctx.ui.size)("nzPlaceHolder", ctx.ui.placeholder)("nzNotFoundContent", ctx.ui.notFoundContent)("nzDropdownClassName", ctx.ui.dropdownClassName)("nzAllowClear", ctx.ui.allowClear)("nzDropdownStyle", ctx.ui.dropdownStyle)("nzCustomTemplate", ctx.ui.customTemplate)("nzSuffixIcon", ctx.ui.suffixIcon)("nzRemoveIcon", ctx.ui.removeIcon)("nzClearIcon", ctx.ui.clearIcon)("nzMenuItemSelectedIcon", ctx.ui.menuItemSelectedIcon)("nzMaxTagPlaceholder", ctx.ui.maxTagPlaceholder)("nzDropdownRender", ctx.ui.dropdownRender)("nzAutoClearSearchValue", ctx.i.autoClearSearchValue)("nzBorderless", ctx.i.borderless)("nzAutoFocus", ctx.i.autoFocus)("nzDropdownMatchSelectWidth", ctx.i.dropdownMatchSelectWidth)("nzServerSearch", ctx.i.serverSearch)("nzMaxMultipleCount", ctx.i.maxMultipleCount)("nzMode", ctx.i.mode)("nzShowSearch", ctx.i.showSearch)("nzShowArrow", ctx.i.showArrow)("nzTokenSeparators", ctx.i.tokenSeparators)("nzMaxTagCount", ctx.i.maxTagCount)("compareWith", ctx.i.compareWith)("nzOptionHeightPx", ctx.i.optionHeightPx)("nzOptionOverflowSize", ctx.i.optionOverflowSize);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.loading && !ctx.hasGroup);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.loading && ctx.hasGroup);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.loading);
    } }, directives: [SFItemWrapComponent, ɵngcc26.NzSelectComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc8.NgIf, ɵngcc8.NgForOf, ɵngcc26.NzOptionComponent, ɵngcc26.NzOptionGroupComponent, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SelectWidget, [{
        type: Component,
        args: [{
                selector: 'sf-select',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-select\n    [nzId]=\"id\"\n    [nzDisabled]=\"disabled\"\n    [(ngModel)]=\"_value\"\n    (ngModelChange)=\"change($event)\"\n    [nzSize]=\"ui.size!\"\n    [nzPlaceHolder]=\"ui.placeholder!\"\n    [nzNotFoundContent]=\"ui.notFoundContent\"\n    [nzDropdownClassName]=\"ui.dropdownClassName!\"\n    [nzAllowClear]=\"ui.allowClear\"\n    [nzDropdownStyle]=\"ui.dropdownStyle!\"\n    [nzCustomTemplate]=\"ui.customTemplate!\"\n    [nzSuffixIcon]=\"ui.suffixIcon!\"\n    [nzRemoveIcon]=\"ui.removeIcon!\"\n    [nzClearIcon]=\"ui.clearIcon!\"\n    [nzMenuItemSelectedIcon]=\"ui.menuItemSelectedIcon!\"\n    [nzMaxTagPlaceholder]=\"ui.maxTagPlaceholder!\"\n    [nzDropdownRender]=\"ui.dropdownRender!\"\n    [nzAutoClearSearchValue]=\"i.autoClearSearchValue\"\n    [nzBorderless]=\"i.borderless\"\n    [nzAutoFocus]=\"i.autoFocus\"\n    [nzDropdownMatchSelectWidth]=\"i.dropdownMatchSelectWidth!\"\n    [nzServerSearch]=\"i.serverSearch\"\n    [nzMaxMultipleCount]=\"i.maxMultipleCount!\"\n    [nzMode]=\"i.mode!\"\n    [nzShowSearch]=\"i.showSearch\"\n    [nzShowArrow]=\"i.showArrow!\"\n    [nzTokenSeparators]=\"i.tokenSeparators!\"\n    [nzMaxTagCount]=\"i.maxTagCount!\"\n    [compareWith]=\"i.compareWith!\"\n    [nzOptionHeightPx]=\"i.optionHeightPx!\"\n    [nzOptionOverflowSize]=\"i.optionOverflowSize!\"\n    (nzOpenChange)=\"openChange($event)\"\n    (nzOnSearch)=\"onSearch($event)\"\n    (nzScrollToBottom)=\"scrollToBottom()\"\n  >\n    <ng-container *ngIf=\"!loading && !hasGroup\">\n      <nz-option *ngFor=\"let o of data\" [nzLabel]=\"o.label\" [nzValue]=\"o.value\" [nzDisabled]=\"o.disabled\"></nz-option>\n    </ng-container>\n    <ng-container *ngIf=\"!loading && hasGroup\">\n      <nz-option-group *ngFor=\"let i of data\" [nzLabel]=\"i.label\">\n        <nz-option\n          *ngFor=\"let o of i.children\"\n          [nzLabel]=\"o.label\"\n          [nzValue]=\"o.value\"\n          [nzDisabled]=\"o.disabled\"\n        ></nz-option>\n      </nz-option-group>\n    </ng-container>\n    <nz-option *ngIf=\"loading\" nzDisabled nzCustomContent>\n      <i nz-icon nzType=\"loading\"></i>\n      {{ ui.searchLoadingText }}\n    </nz-option>\n  </nz-select>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class SliderWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this._formatter = (value) => {
            const { formatter } = this.ui;
            if (formatter)
                return formatter(value);
            return `${value}`;
        };
    }
    ngOnInit() {
        const { minimum, maximum, multipleOf } = this.schema;
        this.min = minimum || 0;
        this.max = maximum || 100;
        this.step = multipleOf || 1;
        const { marks, included } = this.ui;
        this.marks = marks || null;
        this.included = typeof included === 'undefined' ? true : included;
    }
    _afterChange(value) {
        const { afterChange } = this.ui;
        if (afterChange)
            return afterChange(value);
    }
}
SliderWidget.ɵfac = /*@__PURE__*/ function () { let ɵSliderWidget_BaseFactory; return function SliderWidget_Factory(t) { return (ɵSliderWidget_BaseFactory || (ɵSliderWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(SliderWidget)))(t || SliderWidget); }; }();
SliderWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SliderWidget, selectors: [["sf-slider"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 17, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "ngModel", "nzDisabled", "nzRange", "nzMin", "nzMax", "nzStep", "nzMarks", "nzDots", "nzIncluded", "nzVertical", "nzTipFormatter", "ngModelChange", "nzOnAfterChange"]], template: function SliderWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-slider", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function SliderWidget_Template_nz_slider_ngModelChange_1_listener($event) { return ctx.setValue($event); })("nzOnAfterChange", function SliderWidget_Template_nz_slider_nzOnAfterChange_1_listener($event) { return ctx._afterChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngModel", ctx.value)("nzDisabled", ctx.disabled)("nzRange", ctx.ui.range)("nzMin", ctx.min)("nzMax", ctx.max)("nzStep", ctx.step)("nzMarks", ctx.marks)("nzDots", ctx.ui.dots)("nzIncluded", ctx.included)("nzVertical", ctx.ui.vertical)("nzTipFormatter", ctx._formatter);
    } }, directives: [SFItemWrapComponent, ɵngcc27.NzSliderComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SliderWidget, [{
        type: Component,
        args: [{
                selector: 'sf-slider',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-slider\n    [ngModel]=\"value\"\n    (ngModelChange)=\"setValue($event)\"\n    [nzDisabled]=\"disabled\"\n    [nzRange]=\"ui.range\"\n    [nzMin]=\"min\"\n    [nzMax]=\"max\"\n    [nzStep]=\"step\"\n    [nzMarks]=\"marks\"\n    [nzDots]=\"ui.dots\"\n    [nzIncluded]=\"included\"\n    [nzVertical]=\"ui.vertical\"\n    [nzTipFormatter]=\"_formatter\"\n    (nzOnAfterChange)=\"_afterChange($event)\"\n  >\n  </nz-slider>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class StringWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.change$ = null;
    }
    ngOnInit() {
        const { addOnAfter, addOnAfterIcon, addOnBefore, addOnBeforeIcon, prefix, prefixIcon, suffix, suffixIcon, autofocus } = this.ui;
        this.type = !!(addOnAfter ||
            addOnBefore ||
            addOnAfterIcon ||
            addOnBeforeIcon ||
            prefix ||
            prefixIcon ||
            suffix ||
            suffixIcon)
            ? 'addon'
            : '';
        if (autofocus === true) {
            setTimeout(() => {
                this.injector.get(ElementRef).nativeElement.querySelector(`#${this.id}`).focus();
            }, 20);
        }
        this.initChange();
    }
    reset(value) {
        if (!value && this.schema.format === 'color') {
            this.setValue('#000000');
        }
    }
    initChange() {
        const dueTime = this.ui.changeDebounceTime;
        const changeFn = this.ui.change;
        if (dueTime == null || dueTime <= 0 || changeFn == null)
            return;
        this.change$ = new BehaviorSubject(this.value);
        let obs = this.change$.asObservable().pipe(debounceTime(dueTime), takeUntil(this.sfItemComp.unsubscribe$));
        if (this.ui.changeMap != null) {
            obs = obs.pipe(switchMap(this.ui.changeMap));
        }
        obs.subscribe(val => changeFn(val));
    }
    change(val) {
        this.setValue(val);
        if (this.change$ != null) {
            this.change$.next(val);
            return;
        }
        if (this.ui.change)
            this.ui.change(val);
    }
    focus(e) {
        if (this.ui.focus)
            this.ui.focus(e);
    }
    blur(e) {
        if (this.ui.blur)
            this.ui.blur(e);
    }
    enter(e) {
        if (this.ui.enter)
            this.ui.enter(e);
    }
}
StringWidget.ɵfac = /*@__PURE__*/ function () { let ɵStringWidget_BaseFactory; return function StringWidget_Factory(t) { return (ɵStringWidget_BaseFactory || (ɵStringWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(StringWidget)))(t || StringWidget); }; }();
StringWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: StringWidget, selectors: [["sf-string"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 4, vars: 8, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], ["ipt", ""], [4, "ngIf", "ngIfElse"], ["nz-input", "", 3, "disabled", "nzSize", "nzBorderless", "ngModel", "ngModelChange", "keyup.enter", "focus", "blur"], [3, "nzAddOnBefore", "nzAddOnAfter", "nzAddOnBeforeIcon", "nzAddOnAfterIcon", "nzPrefix", "nzPrefixIcon", "nzSuffix", "nzSuffixIcon"], [3, "ngTemplateOutlet"]], template: function StringWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵtemplate(1, StringWidget_ng_template_1_Template, 1, 11, "ng-template", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(3, StringWidget_ng_container_3_Template, 3, 9, "ng-container", 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        const _r0 = ɵngcc0.ɵɵreference(2);
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", ctx.type === "addon")("ngIfElse", _r0);
    } }, directives: [SFItemWrapComponent, ɵngcc8.NgIf, ɵngcc16.NzInputDirective, ɵngcc6.DefaultValueAccessor, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc16.NzInputGroupComponent, ɵngcc16.NzInputGroupWhitSuffixOrPrefixDirective, ɵngcc8.NgTemplateOutlet], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(StringWidget, [{
        type: Component,
        args: [{
                selector: 'sf-string',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <ng-template #ipt>\n    <input\n      nz-input\n      [attr.id]=\"id\"\n      [disabled]=\"disabled\"\n      [attr.disabled]=\"disabled\"\n      [nzSize]=\"ui.size!\"\n      [nzBorderless]=\"ui.borderless\"\n      [ngModel]=\"value\"\n      (ngModelChange)=\"change($event)\"\n      [attr.maxLength]=\"schema.maxLength || null\"\n      [attr.type]=\"ui.type || 'text'\"\n      [attr.placeholder]=\"ui.placeholder\"\n      [attr.autocomplete]=\"ui.autocomplete\"\n      [attr.autoFocus]=\"ui.autofocus\"\n      (keyup.enter)=\"enter($event)\"\n      (focus)=\"focus($event)\"\n      (blur)=\"blur($event)\"\n    />\n  </ng-template>\n\n  <ng-container *ngIf=\"type === 'addon'; else ipt\">\n    <nz-input-group\n      [nzAddOnBefore]=\"ui.addOnBefore\"\n      [nzAddOnAfter]=\"ui.addOnAfter\"\n      [nzAddOnBeforeIcon]=\"ui.addOnBeforeIcon\"\n      [nzAddOnAfterIcon]=\"ui.addOnAfterIcon\"\n      [nzPrefix]=\"ui.prefix\"\n      [nzPrefixIcon]=\"ui.prefixIcon\"\n      [nzSuffix]=\"ui.suffix\"\n      [nzSuffixIcon]=\"ui.suffixIcon\"\n    >\n      <ng-template [ngTemplateOutlet]=\"ipt\"></ng-template>\n    </nz-input-group>\n  </ng-container>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TagWidget extends ControlUIWidget {
    reset(value) {
        getData(this.schema, this.ui, value).subscribe(list => {
            this.data = list;
            this.detectChanges();
        });
    }
    onChange(item) {
        item.checked = !item.checked;
        this.updateValue();
        if (this.ui.checkedChange) {
            this.ui.checkedChange(item.checked);
        }
    }
    _close(e) {
        if (this.ui.onClose)
            this.ui.onClose(e);
    }
    updateValue() {
        this.formProperty.setValue(this.data.filter(w => w.checked).map(i => i.value), false);
    }
}
TagWidget.ɵfac = /*@__PURE__*/ function () { let ɵTagWidget_BaseFactory; return function TagWidget_Factory(t) { return (ɵTagWidget_BaseFactory || (ɵTagWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TagWidget)))(t || TagWidget); }; }();
TagWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TagWidget, selectors: [["sf-tag"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 4, vars: 7, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], ["icon", ""], [3, "nzMode", "nzChecked", "nzOnClose", "nzCheckedChange", 4, "ngFor", "ngForOf"], ["nz-icon", "", 3, "nzType", "nzTheme", "nzTwotoneColor", "nzRotate", "nzIconfont", "nzSpin"], [3, "nzMode", "nzChecked", "nzOnClose", "nzCheckedChange"], [4, "ngIf"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"]], template: function TagWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵtemplate(1, TagWidget_ng_template_1_Template, 1, 6, "ng-template", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);
        ɵngcc0.ɵɵtemplate(3, TagWidget_nz_tag_3_Template, 5, 5, "nz-tag", 2);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.data);
    } }, directives: [SFItemWrapComponent, ɵngcc8.NgForOf, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective, ɵngcc28.NzTagComponent, ɵngcc8.NgIf, ɵngcc8.NgTemplateOutlet], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TagWidget, [{
        type: Component,
        args: [{
                selector: 'sf-tag',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <ng-template #icon let-i>\n    <i\n      nz-icon\n      [nzType]=\"i.type\"\n      [nzTheme]=\"i.theme\"\n      [nzTwotoneColor]=\"i.twotoneColor\"\n      [nzRotate]=\"i.rotate\"\n      [nzIconfont]=\"i.iconfont\"\n      [nzSpin]=\"i.spin\"\n    ></i>\n  </ng-template>\n  <nz-tag\n    *ngFor=\"let i of data\"\n    [nzMode]=\"ui.mode || 'checkable'\"\n    [nzChecked]=\"i.checked\"\n    (nzOnClose)=\"_close($event)\"\n    (nzCheckedChange)=\"onChange(i)\"\n  >\n    <ng-container *ngIf=\"i.prefixIcon\">\n      <ng-template [ngTemplateOutlet]=\"icon\" [ngTemplateOutletContext]=\"{ $implicit: i.prefixIcon }\"></ng-template>\n    </ng-container>\n    <span>{{ i.label }}</span>\n    <ng-container *ngIf=\"i.suffixIcon\">\n      <ng-template [ngTemplateOutlet]=\"icon\" [ngTemplateOutletContext]=\"{ $implicit: i.suffixIcon }\"></ng-template>\n    </ng-container>\n  </nz-tag>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TextWidget extends ControlUIWidget {
    ngOnInit() {
        this.ui._required = false;
    }
}
TextWidget.ɵfac = /*@__PURE__*/ function () { let ɵTextWidget_BaseFactory; return function TextWidget_Factory(t) { return (ɵTextWidget_BaseFactory || (ɵTextWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TextWidget)))(t || TextWidget); }; }();
TextWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TextWidget, selectors: [["sf-text"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 7, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"]], template: function TextWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵtext(1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵtextInterpolate1(" ", ctx.value || ctx.ui.defaultText || "-", "\n");
    } }, directives: [SFItemWrapComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TextWidget, [{
        type: Component,
        args: [{
                selector: 'sf-text',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  {{ value || ui.defaultText || '-' }}\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TextareaWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.autosize = true;
    }
    ngOnInit() {
        const { autosize } = this.ui;
        if (autosize != null) {
            this.autosize = autosize;
        }
    }
    change(val) {
        this.setValue(val);
        if (this.ui.change)
            this.ui.change(val);
    }
    focus(e) {
        if (this.ui.focus)
            this.ui.focus(e);
    }
    blur(e) {
        if (this.ui.blur)
            this.ui.blur(e);
    }
}
TextareaWidget.ɵfac = /*@__PURE__*/ function () { let ɵTextareaWidget_BaseFactory; return function TextareaWidget_Factory(t) { return (ɵTextareaWidget_BaseFactory || (ɵTextareaWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TextareaWidget)))(t || TextareaWidget); }; }();
TextareaWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TextareaWidget, selectors: [["sf-textarea"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 3, vars: 15, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], ["nz-input", "", 3, "disabled", "nzSize", "ngModel", "nzAutosize", "nzBorderless", "ngModelChange", "focus", "blur"]], template: function TextareaWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "textarea", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function TextareaWidget_Template_textarea_ngModelChange_1_listener($event) { return ctx.change($event); })("focus", function TextareaWidget_Template_textarea_focus_1_listener($event) { return ctx.focus($event); })("blur", function TextareaWidget_Template_textarea_blur_1_listener($event) { return ctx.blur($event); });
        ɵngcc0.ɵɵtext(2, "  ");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("disabled", ctx.disabled)("nzSize", ctx.ui.size)("ngModel", ctx.value)("nzAutosize", ctx.autosize)("nzBorderless", ctx.ui.borderless);
        ɵngcc0.ɵɵattribute("id", ctx.id)("disabled", ctx.disabled)("maxLength", ctx.schema.maxLength || null)("placeholder", ctx.ui.placeholder);
    } }, directives: [SFItemWrapComponent, ɵngcc16.NzInputDirective, ɵngcc6.DefaultValueAccessor, ɵngcc16.NzAutosizeDirective, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TextareaWidget, [{
        type: Component,
        args: [{
                selector: 'sf-textarea',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <textarea\n    nz-input\n    [attr.id]=\"id\"\n    [disabled]=\"disabled\"\n    [attr.disabled]=\"disabled\"\n    [nzSize]=\"ui.size!\"\n    [ngModel]=\"value\"\n    (ngModelChange)=\"change($event)\"\n    [attr.maxLength]=\"schema.maxLength || null\"\n    [attr.placeholder]=\"ui.placeholder\"\n    [nzAutosize]=\"autosize\"\n    [nzBorderless]=\"ui.borderless\"\n    (focus)=\"focus($event)\"\n    (blur)=\"blur($event)\"\n  >\n  </textarea>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TimeWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.displayValue = null;
    }
    ngOnInit() {
        const ui = this.ui;
        this.valueFormat = ui._format;
        const opt = {
            displayFormat: ui.displayFormat || 'HH:mm:ss',
            allowEmpty: toBool(ui.allowEmpty, true),
            clearText: ui.clearText || '清除',
            defaultOpenValue: ui.defaultOpenValue || new Date(),
            hideDisabledOptions: toBool(ui.hideDisabledOptions, false),
            use12Hours: toBool(ui.use12Hours, false),
            hourStep: ui.hourStep || 1,
            minuteStep: ui.minuteStep || 1,
            secondStep: ui.secondStep || 1
        };
        if (opt.use12Hours && !ui.displayFormat) {
            opt.displayFormat = `h:mm:ss a`;
        }
        this.i = opt;
    }
    reset(value) {
        if (value instanceof Date) {
            this.displayValue = value;
            this.detectChanges();
            return;
        }
        let v = value != null && value.toString().length ? new Date(value) : null;
        // trying restore full Date format
        if (v != null && v.toString() === 'Invalid Date') {
            if (value.toString().split(':').length <= 1) {
                value += ':00';
            }
            v = new Date(`1970-1-1 ${value}`);
        }
        this.displayValue = v;
        this.detectChanges();
    }
    _change(value) {
        if (this.ui.change) {
            this.ui.change(value);
        }
        if (value == null) {
            this.setValue(null);
            return;
        }
        if (this.ui.utcEpoch === true) {
            this.setValue(Date.UTC(1970, 0, 1, value.getHours(), value.getMinutes(), value.getSeconds()));
            return;
        }
        this.setValue(format(value, this.valueFormat));
    }
    _openChange(status) {
        if (this.ui.openChange) {
            this.ui.openChange(status);
        }
    }
}
TimeWidget.ɵfac = /*@__PURE__*/ function () { let ɵTimeWidget_BaseFactory; return function TimeWidget_Factory(t) { return (ɵTimeWidget_BaseFactory || (ɵTimeWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TimeWidget)))(t || TimeWidget); }; }();
TimeWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TimeWidget, selectors: [["sf-time"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 26, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzId", "ngModel", "nzDisabled", "nzSize", "nzFormat", "nzAllowEmpty", "nzClearText", "nzDefaultOpenValue", "nzDisabledHours", "nzDisabledMinutes", "nzDisabledSeconds", "nzHideDisabledOptions", "nzUse12Hours", "nzHourStep", "nzMinuteStep", "nzSecondStep", "nzPopupClassName", "nzPlaceHolder", "nzNowText", "nzOkText", "ngModelChange", "nzOpenChange"]], template: function TimeWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-time-picker", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function TimeWidget_Template_nz_time_picker_ngModelChange_1_listener($event) { return ctx.displayValue = $event; })("ngModelChange", function TimeWidget_Template_nz_time_picker_ngModelChange_1_listener($event) { return ctx._change($event); })("nzOpenChange", function TimeWidget_Template_nz_time_picker_nzOpenChange_1_listener($event) { return ctx._openChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzId", ctx.id)("ngModel", ctx.displayValue)("nzDisabled", ctx.disabled)("nzSize", ctx.ui.size)("nzFormat", ctx.i.displayFormat)("nzAllowEmpty", ctx.i.allowEmpty)("nzClearText", ctx.i.clearText)("nzDefaultOpenValue", ctx.i.defaultOpenValue)("nzDisabledHours", ctx.ui.disabledHours)("nzDisabledMinutes", ctx.ui.disabledMinutes)("nzDisabledSeconds", ctx.ui.disabledSeconds)("nzHideDisabledOptions", ctx.i.hideDisabledOptions)("nzUse12Hours", ctx.i.use12Hours)("nzHourStep", ctx.i.hourStep)("nzMinuteStep", ctx.i.minuteStep)("nzSecondStep", ctx.i.secondStep)("nzPopupClassName", ctx.ui.popupClassName)("nzPlaceHolder", ctx.ui.placeholder)("nzNowText", ctx.ui.nowText)("nzOkText", ctx.ui.okText);
    } }, directives: [SFItemWrapComponent, ɵngcc29.NzTimePickerComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TimeWidget, [{
        type: Component,
        args: [{
                selector: 'sf-time',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-time-picker\n    [nzId]=\"id\"\n    [(ngModel)]=\"displayValue\"\n    (ngModelChange)=\"_change($event)\"\n    [nzDisabled]=\"disabled\"\n    [nzSize]=\"$any(ui.size)\"\n    [nzFormat]=\"i.displayFormat\"\n    [nzAllowEmpty]=\"i.allowEmpty\"\n    [nzClearText]=\"i.clearText\"\n    [nzDefaultOpenValue]=\"i.defaultOpenValue\"\n    [nzDisabledHours]=\"ui.disabledHours\"\n    [nzDisabledMinutes]=\"ui.disabledMinutes\"\n    [nzDisabledSeconds]=\"ui.disabledSeconds\"\n    [nzHideDisabledOptions]=\"i.hideDisabledOptions\"\n    [nzUse12Hours]=\"i.use12Hours\"\n    [nzHourStep]=\"i.hourStep\"\n    [nzMinuteStep]=\"i.minuteStep\"\n    [nzSecondStep]=\"i.secondStep\"\n    [nzPopupClassName]=\"ui.popupClassName!\"\n    [nzPlaceHolder]=\"ui.placeholder!\"\n    [nzNowText]=\"ui.nowText!\"\n    [nzOkText]=\"ui.okText!\"\n    (nzOpenChange)=\"_openChange($event)\"\n  >\n  </nz-time-picker>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TransferWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.list = [];
        this._data = [];
        this._canMove = (arg) => {
            return this.ui.canMove ? this.ui.canMove(arg) : of(arg.list);
        };
    }
    ngOnInit() {
        const { titles, operations, itemUnit, itemsUnit } = this.ui;
        this.i = {
            titles: titles || ['', ''],
            operations: operations || ['', ''],
            itemUnit: itemUnit || '项',
            itemsUnit: itemsUnit || '项'
        };
    }
    reset(value) {
        getData(this.schema, this.ui, null).subscribe(list => {
            let formData = value;
            if (!Array.isArray(formData)) {
                formData = [formData];
            }
            list.forEach((item) => {
                if (~formData.indexOf(item.value)) {
                    item.direction = 'right';
                }
            });
            this.list = list;
            this._data = list.filter(w => w.direction === 'right');
            this.notify();
            this.detectChanges();
        });
    }
    notify() {
        this.formProperty.setValue(this._data.map(i => i.value), false);
    }
    _change(options) {
        if (options.to === 'right') {
            this._data = this._data.concat(...options.list);
        }
        else {
            this._data = this._data.filter((w) => options.list.indexOf(w) === -1);
        }
        if (this.ui.change)
            this.ui.change(options);
        this.notify();
    }
    _searchChange(options) {
        if (this.ui.searchChange)
            this.ui.searchChange(options);
        this.detectChanges();
    }
    _selectChange(options) {
        if (this.ui.selectChange)
            this.ui.selectChange(options);
        this.detectChanges();
    }
}
TransferWidget.ɵfac = /*@__PURE__*/ function () { let ɵTransferWidget_BaseFactory; return function TransferWidget_Factory(t) { return (ɵTransferWidget_BaseFactory || (ɵTransferWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TransferWidget)))(t || TransferWidget); }; }();
TransferWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TransferWidget, selectors: [["sf-transfer"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 17, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzDataSource", "nzTitles", "nzOperations", "nzListStyle", "nzItemUnit", "nzItemsUnit", "nzShowSearch", "nzFilterOption", "nzSearchPlaceholder", "nzNotFoundContent", "nzCanMove", "nzChange", "nzSearchChange", "nzSelectChange"]], template: function TransferWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-transfer", 1);
        ɵngcc0.ɵɵlistener("nzChange", function TransferWidget_Template_nz_transfer_nzChange_1_listener($event) { return ctx._change($event); })("nzSearchChange", function TransferWidget_Template_nz_transfer_nzSearchChange_1_listener($event) { return ctx._searchChange($event); })("nzSelectChange", function TransferWidget_Template_nz_transfer_nzSelectChange_1_listener($event) { return ctx._selectChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzDataSource", ctx.list)("nzTitles", ctx.i.titles)("nzOperations", ctx.i.operations)("nzListStyle", ctx.ui.listStyle)("nzItemUnit", ctx.i.itemUnit)("nzItemsUnit", ctx.i.itemsUnit)("nzShowSearch", ctx.ui.showSearch)("nzFilterOption", ctx.ui.filterOption)("nzSearchPlaceholder", ctx.ui.searchPlaceholder)("nzNotFoundContent", ctx.ui.notFoundContent)("nzCanMove", ctx._canMove);
    } }, directives: [SFItemWrapComponent, ɵngcc30.NzTransferComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TransferWidget, [{
        type: Component,
        args: [{
                selector: 'sf-transfer',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-transfer\n    [nzDataSource]=\"$any(list)\"\n    [nzTitles]=\"i.titles\"\n    [nzOperations]=\"i.operations\"\n    [nzListStyle]=\"ui.listStyle!\"\n    [nzItemUnit]=\"i.itemUnit\"\n    [nzItemsUnit]=\"i.itemsUnit\"\n    [nzShowSearch]=\"ui.showSearch\"\n    [nzFilterOption]=\"ui.filterOption\"\n    [nzSearchPlaceholder]=\"ui.searchPlaceholder\"\n    [nzNotFoundContent]=\"ui.notFoundContent\"\n    [nzCanMove]=\"_canMove\"\n    (nzChange)=\"_change($event)\"\n    (nzSearchChange)=\"_searchChange($event)\"\n    (nzSelectChange)=\"_selectChange($event)\"\n  >\n  </nz-transfer>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class TreeSelectWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.data = [];
        this.asyncData = false;
    }
    ngOnInit() {
        const { ui } = this;
        this.i = {
            allowClear: ui.allowClear,
            showSearch: toBool(ui.showSearch, false),
            dropdownMatchSelectWidth: toBool(ui.dropdownMatchSelectWidth, true),
            multiple: toBool(ui.multiple, false),
            checkable: toBool(ui.checkable, false),
            showIcon: toBool(ui.showIcon, false),
            showExpand: toBool(ui.showExpand, true),
            showLine: toBool(ui.showLine, false),
            checkStrictly: toBool(ui.checkStrictly, false),
            hideUnMatched: toBool(ui.hideUnMatched, false),
            defaultExpandAll: toBool(ui.defaultExpandAll, false),
            displayWith: ui.displayWith || ((node) => node.title)
        };
        this.asyncData = typeof ui.expandChange === 'function';
    }
    reset(value) {
        getData(this.schema, this.ui, value).subscribe(list => {
            this.data = list;
            this.detectChanges();
        });
    }
    change(value) {
        if (this.ui.change)
            this.ui.change(value);
        this.setValue(value);
    }
    expandChange(e) {
        const { ui } = this;
        if (typeof ui.expandChange !== 'function')
            return;
        ui.expandChange(e).subscribe(res => {
            e.node.clearChildren();
            e.node.addChildren(res);
            this.detectChanges();
        });
    }
}
TreeSelectWidget.ɵfac = /*@__PURE__*/ function () { let ɵTreeSelectWidget_BaseFactory; return function TreeSelectWidget_Factory(t) { return (ɵTreeSelectWidget_BaseFactory || (ɵTreeSelectWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TreeSelectWidget)))(t || TreeSelectWidget); }; }();
TreeSelectWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: TreeSelectWidget, selectors: [["sf-tree-select"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 36, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzId", "nzAllowClear", "nzPlaceHolder", "nzDropdownStyle", "nzDropdownClassName", "nzSize", "nzExpandedKeys", "nzNotFoundContent", "nzMaxTagCount", "nzMaxTagPlaceholder", "nzTreeTemplate", "nzDisabled", "nzShowSearch", "nzShowIcon", "nzDropdownMatchSelectWidth", "nzMultiple", "nzHideUnMatched", "nzCheckable", "nzShowExpand", "nzShowLine", "nzCheckStrictly", "nzAsyncData", "nzNodes", "nzDefaultExpandAll", "nzDisplayWith", "ngModel", "nzVirtualHeight", "nzVirtualItemSize", "nzVirtualMaxBufferPx", "nzVirtualMinBufferPx", "ngModelChange", "nzExpandChange"]], template: function TreeSelectWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-tree-select", 1);
        ɵngcc0.ɵɵlistener("ngModelChange", function TreeSelectWidget_Template_nz_tree_select_ngModelChange_1_listener($event) { return ctx.change($event); })("nzExpandChange", function TreeSelectWidget_Template_nz_tree_select_nzExpandChange_1_listener($event) { return ctx.expandChange($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzId", ctx.id)("nzAllowClear", ctx.i.allowClear)("nzPlaceHolder", ctx.ui.placeholder)("nzDropdownStyle", ctx.ui.dropdownStyle)("nzDropdownClassName", ctx.ui.dropdownClassName)("nzSize", ctx.ui.size)("nzExpandedKeys", ctx.ui.expandedKeys)("nzNotFoundContent", ctx.ui.notFoundContent)("nzMaxTagCount", ctx.ui.maxTagCount)("nzMaxTagPlaceholder", ctx.ui.maxTagPlaceholder || null)("nzTreeTemplate", ctx.ui.treeTemplate)("nzDisabled", ctx.disabled)("nzShowSearch", ctx.i.showSearch)("nzShowIcon", ctx.i.showIcon)("nzDropdownMatchSelectWidth", ctx.i.dropdownMatchSelectWidth)("nzMultiple", ctx.i.multiple)("nzHideUnMatched", ctx.i.hideUnMatched)("nzCheckable", ctx.i.checkable)("nzShowExpand", ctx.i.showExpand)("nzShowLine", ctx.i.showLine)("nzCheckStrictly", ctx.i.checkfStrictly)("nzAsyncData", ctx.asyncData)("nzNodes", ctx.data)("nzDefaultExpandAll", ctx.i.defaultExpandAll)("nzDisplayWith", ctx.i.displayWith)("ngModel", ctx.value)("nzVirtualHeight", ctx.ui.virtualHeight)("nzVirtualItemSize", ctx.ui.virtualItemSize || 28)("nzVirtualMaxBufferPx", ctx.ui.virtualMaxBufferPx || 500)("nzVirtualMinBufferPx", ctx.ui.virtualMinBufferPx || 28);
    } }, directives: [SFItemWrapComponent, ɵngcc31.NzTreeSelectComponent, ɵngcc6.NgControlStatus, ɵngcc6.NgModel], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TreeSelectWidget, [{
        type: Component,
        args: [{
                selector: 'sf-tree-select',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-tree-select\n    [nzId]=\"id\"\n    [nzAllowClear]=\"i.allowClear\"\n    [nzPlaceHolder]=\"ui.placeholder!\"\n    [nzDropdownStyle]=\"ui.dropdownStyle!\"\n    [nzDropdownClassName]=\"ui.dropdownClassName\"\n    [nzSize]=\"ui.size!\"\n    [nzExpandedKeys]=\"ui.expandedKeys!\"\n    [nzNotFoundContent]=\"ui.notFoundContent\"\n    [nzMaxTagCount]=\"ui.maxTagCount!\"\n    [nzMaxTagPlaceholder]=\"ui.maxTagPlaceholder || null\"\n    [nzTreeTemplate]=\"ui.treeTemplate!\"\n    [nzDisabled]=\"disabled\"\n    [nzShowSearch]=\"i.showSearch\"\n    [nzShowIcon]=\"i.showIcon\"\n    [nzDropdownMatchSelectWidth]=\"i.dropdownMatchSelectWidth\"\n    [nzMultiple]=\"i.multiple\"\n    [nzHideUnMatched]=\"i.hideUnMatched\"\n    [nzCheckable]=\"i.checkable\"\n    [nzShowExpand]=\"i.showExpand\"\n    [nzShowLine]=\"i.showLine\"\n    [nzCheckStrictly]=\"i.checkfStrictly\"\n    [nzAsyncData]=\"asyncData\"\n    [nzNodes]=\"$any(data)\"\n    [nzDefaultExpandAll]=\"i.defaultExpandAll\"\n    [nzDisplayWith]=\"i.displayWith!\"\n    [ngModel]=\"value\"\n    [nzVirtualHeight]=\"ui.virtualHeight!\"\n    [nzVirtualItemSize]=\"ui.virtualItemSize || 28\"\n    [nzVirtualMaxBufferPx]=\"ui.virtualMaxBufferPx || 500\"\n    [nzVirtualMinBufferPx]=\"ui.virtualMinBufferPx || 28\"\n    (ngModelChange)=\"change($event)\"\n    (nzExpandChange)=\"expandChange($event)\"\n  >\n  </nz-tree-select>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class UploadWidget extends ControlUIWidget {
    constructor() {
        super(...arguments);
        this.fileList = [];
        this.btnType = '';
        this.handleRemove = () => {
            this._setValue(this.fileList);
            return true;
        };
        this.handlePreview = (file) => {
            if (this.ui.preview) {
                this.ui.preview(file);
                return;
            }
            const _url = file.thumbUrl || file.url;
            if (!_url) {
                return;
            }
            this.injector.get(NzModalService).create({
                nzContent: `<img src="${_url}" class="img-fluid" />`,
                nzFooter: null
            });
        };
    }
    ngOnInit() {
        const { type, text, hint, action, accept, limit, filter, fileSize, fileType, listType, multiple, name, showUploadList, withCredentials, resReName, urlReName, beforeUpload, customRequest, directory, openFileDialogOnClick, limitFileCount } = this.ui;
        const res = {
            type: type || 'select',
            text: text || '点击上传',
            action: action || '',
            accept: accept || '',
            directory: toBool(directory, false),
            openFileDialogOnClick: toBool(openFileDialogOnClick, true),
            limit: limit == null ? 0 : +limit,
            filter: filter == null ? [] : filter,
            size: fileSize == null ? 0 : +fileSize,
            fileType: fileType || '',
            listType: listType || 'text',
            multiple: toBool(multiple, false),
            name: name || 'file',
            showUploadList: showUploadList == null ? true : showUploadList,
            withCredentials: toBool(withCredentials, false),
            resReName: (resReName || '').split('.'),
            urlReName: (urlReName || '').split('.'),
            beforeUpload: typeof beforeUpload === 'function' ? beforeUpload : null,
            customRequest: typeof customRequest === 'function' ? customRequest : null,
            limitFileCount: limitFileCount || 999
        };
        if (res.listType === 'picture-card') {
            this.btnType = 'plus';
        }
        if (res.type === 'drag') {
            res.listType = null;
            this.btnType = 'drag';
            res.text = text || `单击或拖动文件到该区域上传`;
            res.hint = hint || `支持单个或批量，严禁上传公司数据或其他安全文件`;
        }
        this.i = res;
    }
    change(args) {
        if (this.ui.change)
            this.ui.change(args);
        if (args.type !== 'success')
            return;
        this._setValue(args.fileList);
    }
    reset(value) {
        const { fileList } = this.ui;
        (fileList ? of(fileList) : Array.isArray(value) ? of(value) : getData(this.schema, this.ui, null)).subscribe(list => {
            this.fileList = list;
            this.formProperty._value = this.pureValue(list);
            this.formProperty.updateValueAndValidity({ onlySelf: false, emitValueEvent: false, emitValidator: false });
            this.detectChanges();
        });
    }
    _getValue(file) {
        return deepGet(file.response, this.i.resReName, file.response);
    }
    pureValue(fileList) {
        fileList
            .filter(file => !file.url)
            .forEach(file => {
            file.url = deepGet(file.response, this.i.urlReName);
        });
        const res = fileList.filter(w => w.status === 'done').map(file => this._getValue(file));
        return this.i.multiple === true ? res : res.pop();
    }
    _setValue(fileList) {
        this.setValue(this.pureValue(fileList));
    }
}
UploadWidget.ɵfac = /*@__PURE__*/ function () { let ɵUploadWidget_BaseFactory; return function UploadWidget_Factory(t) { return (ɵUploadWidget_BaseFactory || (ɵUploadWidget_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(UploadWidget)))(t || UploadWidget); }; }();
UploadWidget.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: UploadWidget, selectors: [["sf-upload"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 6, vars: 35, consts: [[3, "id", "schema", "ui", "showError", "error", "showTitle"], [3, "nzType", "nzFileList", "nzDisabled", "nzAction", "nzDirectory", "nzOpenFileDialogOnClick", "nzAccept", "nzLimit", "nzFilter", "nzSize", "nzFileType", "nzHeaders", "nzData", "nzListType", "nzMultiple", "nzName", "nzShowUploadList", "nzWithCredentials", "nzBeforeUpload", "nzCustomRequest", "nzRemove", "nzPreview", "nzPreviewFile", "nzDownload", "nzTransformFile", "nzShowButton", "nzFileListChange", "nzChange"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], ["nz-icon", "", "nzType", "plus"], [1, "ant-upload-text", 3, "innerHTML"], [1, "ant-upload-drag-icon"], ["nz-icon", "", "nzType", "inbox"], [1, "ant-upload-hint", 3, "innerHTML"], ["type", "button", "nz-button", ""], ["nz-icon", "", "nzType", "upload"], [3, "innerHTML"]], template: function UploadWidget_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "sf-item-wrap", 0);
        ɵngcc0.ɵɵelementStart(1, "nz-upload", 1);
        ɵngcc0.ɵɵlistener("nzFileListChange", function UploadWidget_Template_nz_upload_nzFileListChange_1_listener($event) { return ctx.fileList = $event; })("nzChange", function UploadWidget_Template_nz_upload_nzChange_1_listener($event) { return ctx.change($event); });
        ɵngcc0.ɵɵelementContainerStart(2, 2);
        ɵngcc0.ɵɵtemplate(3, UploadWidget_ng_container_3_Template, 3, 1, "ng-container", 3);
        ɵngcc0.ɵɵtemplate(4, UploadWidget_ng_container_4_Template, 5, 2, "ng-container", 3);
        ɵngcc0.ɵɵtemplate(5, UploadWidget_ng_container_5_Template, 4, 1, "ng-container", 4);
        ɵngcc0.ɵɵelementContainerEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("id", ctx.id)("schema", ctx.schema)("ui", ctx.ui)("showError", ctx.showError)("error", ctx.error)("showTitle", ctx.schema.title);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("nzType", ctx.i.type)("nzFileList", ctx.fileList)("nzDisabled", ctx.disabled)("nzAction", ctx.i.action)("nzDirectory", ctx.i.directory)("nzOpenFileDialogOnClick", ctx.i.openFileDialogOnClick)("nzAccept", ctx.i.accept)("nzLimit", ctx.i.limit)("nzFilter", ctx.i.filter)("nzSize", ctx.i.size)("nzFileType", ctx.i.fileType)("nzHeaders", ctx.ui.headers)("nzData", ctx.ui.data)("nzListType", ctx.i.listType)("nzMultiple", ctx.i.multiple)("nzName", ctx.i.name)("nzShowUploadList", ctx.i.showUploadList)("nzWithCredentials", ctx.i.withCredentials)("nzBeforeUpload", ctx.i.beforeUpload)("nzCustomRequest", ctx.i.customRequest)("nzRemove", ctx.ui.remove || ctx.handleRemove)("nzPreview", ctx.handlePreview)("nzPreviewFile", ctx.ui.previewFile)("nzDownload", ctx.ui.download)("nzTransformFile", ctx.ui.transformFile)("nzShowButton", ctx.fileList.length < ctx.i.limitFileCount);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitch", ctx.btnType);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "plus");
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngSwitchCase", "drag");
    } }, directives: [SFItemWrapComponent, ɵngcc32.NzUploadComponent, ɵngcc8.NgSwitch, ɵngcc8.NgSwitchCase, ɵngcc8.NgSwitchDefault, ɵngcc12.ɵNzTransitionPatchDirective, ɵngcc13.NzIconDirective, ɵngcc10.NzButtonComponent, ɵngcc11.NzWaveDirective], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(UploadWidget, [{
        type: Component,
        args: [{
                selector: 'sf-upload',
                template: "<sf-item-wrap [id]=\"id\" [schema]=\"schema\" [ui]=\"ui\" [showError]=\"showError\" [error]=\"error\" [showTitle]=\"schema.title\">\n  <nz-upload\n    [nzType]=\"i.type\"\n    [(nzFileList)]=\"fileList\"\n    [nzDisabled]=\"disabled\"\n    [nzAction]=\"i.action\"\n    [nzDirectory]=\"i.directory\"\n    [nzOpenFileDialogOnClick]=\"i.openFileDialogOnClick\"\n    [nzAccept]=\"i.accept\"\n    [nzLimit]=\"i.limit\"\n    [nzFilter]=\"i.filter\"\n    [nzSize]=\"i.size\"\n    [nzFileType]=\"i.fileType\"\n    [nzHeaders]=\"ui.headers\"\n    [nzData]=\"ui.data\"\n    [nzListType]=\"i.listType\"\n    [nzMultiple]=\"i.multiple\"\n    [nzName]=\"i.name\"\n    [nzShowUploadList]=\"i.showUploadList\"\n    [nzWithCredentials]=\"i.withCredentials\"\n    [nzBeforeUpload]=\"i.beforeUpload\"\n    [nzCustomRequest]=\"i.customRequest\"\n    [nzRemove]=\"ui.remove || handleRemove\"\n    [nzPreview]=\"handlePreview\"\n    [nzPreviewFile]=\"ui.previewFile\"\n    [nzDownload]=\"ui.download\"\n    [nzTransformFile]=\"ui.transformFile\"\n    (nzChange)=\"change($event)\"\n    [nzShowButton]=\"fileList.length < i.limitFileCount\"\n  >\n    <ng-container [ngSwitch]=\"btnType\">\n      <ng-container *ngSwitchCase=\"'plus'\">\n        <i nz-icon nzType=\"plus\"></i>\n        <div class=\"ant-upload-text\" [innerHTML]=\"i.text\"></div>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"'drag'\">\n        <p class=\"ant-upload-drag-icon\"><i nz-icon nzType=\"inbox\"></i></p>\n        <p class=\"ant-upload-text\" [innerHTML]=\"i.text\"></p>\n        <p class=\"ant-upload-hint\" [innerHTML]=\"i.hint\"></p>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <button type=\"button\" nz-button><i nz-icon nzType=\"upload\"></i><span [innerHTML]=\"i.text\"></span></button>\n      </ng-container>\n    </ng-container>\n  </nz-upload>\n</sf-item-wrap>\n",
                preserveWhitespaces: false,
                encapsulation: ViewEncapsulation.None
            }]
    }], null, null); })();

class NzWidgetRegistry extends WidgetRegistry {
    constructor() {
        super();
        this.register('object', ObjectWidget);
        this.register('array', ArrayWidget);
        this.register('text', TextWidget);
        this.register('string', StringWidget);
        this.register('number', NumberWidget);
        this.register('integer', NumberWidget);
        this.register('date', DateWidget);
        this.register('time', TimeWidget);
        this.register('radio', RadioWidget);
        this.register('checkbox', CheckboxWidget);
        this.register('boolean', BooleanWidget);
        this.register('textarea', TextareaWidget);
        this.register('select', SelectWidget);
        this.register('tree-select', TreeSelectWidget);
        this.register('tag', TagWidget);
        this.register('upload', UploadWidget);
        this.register('transfer', TransferWidget);
        this.register('slider', SliderWidget);
        this.register('rate', RateWidget);
        this.register('autocomplete', AutoCompleteWidget);
        this.register('cascader', CascaderWidget);
        this.register('mention', MentionWidget);
        this.register('custom', CustomWidget);
        this.setDefault(StringWidget);
    }
}

/* eslint-disable import/order */
const ZORROS = [
    NzAutocompleteModule,
    NzButtonModule,
    NzCardModule,
    NzCascaderModule,
    NzCheckboxModule,
    NzDatePickerModule,
    NzFormModule,
    NzGridModule,
    NzIconModule,
    NzInputModule,
    NzInputNumberModule,
    NzMentionModule,
    NzModalModule,
    NzRadioModule,
    NzRateModule,
    NzSelectModule,
    NzSliderModule,
    NzSwitchModule,
    NzTagModule,
    NzTimePickerModule,
    NzToolTipModule,
    NzTransferModule,
    NzTreeSelectModule,
    NzUploadModule
];
const COMPONENTS = [SFComponent, SFItemComponent, SFItemWrapComponent, SFTemplateDirective, SFFixedDirective];
const WIDGETS = [
    ObjectWidget,
    ArrayWidget,
    StringWidget,
    NumberWidget,
    DateWidget,
    TimeWidget,
    RadioWidget,
    CheckboxWidget,
    BooleanWidget,
    TextareaWidget,
    SelectWidget,
    TreeSelectWidget,
    TagWidget,
    UploadWidget,
    TransferWidget,
    SliderWidget,
    RateWidget,
    AutoCompleteWidget,
    CascaderWidget,
    MentionWidget,
    CustomWidget,
    TextWidget
];
// #endregion
class DelonFormModule {
    static forRoot() {
        return {
            ngModule: DelonFormModule,
            providers: [
                {
                    provide: SchemaValidatorFactory,
                    useClass: AjvSchemaValidatorFactory,
                    deps: [AlainConfigService, NgZone]
                },
                { provide: WidgetRegistry, useClass: NzWidgetRegistry }
            ]
        };
    }
}
DelonFormModule.ɵfac = function DelonFormModule_Factory(t) { return new (t || DelonFormModule)(); };
DelonFormModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: DelonFormModule });
DelonFormModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[CommonModule, FormsModule, DelonLocaleModule, ...ZORROS]] });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DelonFormModule, [{
        type: NgModule,
        args: [{
                imports: [CommonModule, FormsModule, DelonLocaleModule, ...ZORROS],
                declarations: [...COMPONENTS, ...WIDGETS],
                exports: COMPONENTS,
                entryComponents: WIDGETS
            }]
    }], null, null); })();
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DelonFormModule, { declarations: function () { return [SFComponent, SFItemComponent, SFItemWrapComponent, SFTemplateDirective, SFFixedDirective, ObjectWidget, ArrayWidget, StringWidget, NumberWidget, DateWidget, TimeWidget, RadioWidget, CheckboxWidget, BooleanWidget, TextareaWidget, SelectWidget, TreeSelectWidget, TagWidget, UploadWidget, TransferWidget, SliderWidget, RateWidget, AutoCompleteWidget, CascaderWidget, MentionWidget, CustomWidget, TextWidget]; }, imports: function () { return [CommonModule, FormsModule, DelonLocaleModule, NzAutocompleteModule,
        NzButtonModule,
        NzCardModule,
        NzCascaderModule,
        NzCheckboxModule,
        NzDatePickerModule,
        NzFormModule,
        NzGridModule,
        NzIconModule,
        NzInputModule,
        NzInputNumberModule,
        NzMentionModule,
        NzModalModule,
        NzRadioModule,
        NzRateModule,
        NzSelectModule,
        NzSliderModule,
        NzSwitchModule,
        NzTagModule,
        NzTimePickerModule,
        NzToolTipModule,
        NzTransferModule,
        NzTreeSelectModule,
        NzUploadModule]; }, exports: function () { return [SFComponent, SFItemComponent, SFItemWrapComponent, SFTemplateDirective, SFFixedDirective]; } }); })();

const ERRORSDEFAULT = {
    'false schema': `布尔模式出错`,
    $ref: `无法找到引用{ref}`,
    additionalItems: `不允许超过{ref}`,
    additionalProperties: `不允许有额外的属性`,
    anyOf: `数据应为 anyOf 所指定的其中一个`,
    dependencies: `应当拥有属性{property}的依赖属性{deps}`,
    enum: `应当是预设定的枚举值之一`,
    format: `格式不正确`,
    type: `类型应当是 {type}`,
    required: `必填项`,
    maxLength: `至多 {limit} 个字符`,
    minLength: `至少 {limit} 个字符以上`,
    minimum: `必须 {comparison}{limit}`,
    formatMinimum: `必须 {comparison}{limit}`,
    maximum: `必须 {comparison}{limit}`,
    formatMaximum: `必须 {comparison}{limit}`,
    maxItems: `不应多于 {limit} 个项`,
    minItems: `不应少于 {limit} 个项`,
    maxProperties: `不应多于 {limit} 个属性`,
    minProperties: `不应少于 {limit} 个属性`,
    multipleOf: `应当是 {multipleOf} 的整数倍`,
    not: `不应当匹配 "not" schema`,
    oneOf: `只能匹配一个 "oneOf" 中的 schema`,
    pattern: `数据格式不正确`,
    uniqueItems: `不应当含有重复项 (第 {j} 项与第 {i} 项是重复的)`,
    custom: `格式不正确`,
    propertyNames: `属性名 "{propertyName}" 无效`,
    patternRequired: `应当有属性匹配模式 {missingPattern}`,
    switch: `由于 {caseIndex} 失败，未通过 "switch" 校验`,
    const: `应当等于常量`,
    contains: `应当包含一个有效项`,
    formatExclusiveMaximum: `formatExclusiveMaximum 应当是布尔值`,
    formatExclusiveMinimum: `formatExclusiveMinimum 应当是布尔值`,
    if: `应当匹配模式 "{failingKeyword}"`
};

/**
 * Generated bundle index. Do not edit.
 */

export { AjvSchemaValidatorFactory, ArrayLayoutWidget, ArrayProperty, ArrayWidget, AtomicProperty, AutoCompleteWidget, BooleanProperty, BooleanWidget, CascaderWidget, CheckboxWidget, ControlUIWidget, ControlWidget, CustomWidget, DateWidget, DelonFormModule, ERRORSDEFAULT, FormProperty, FormPropertyFactory, MentionWidget, NumberProperty, NumberWidget, NzWidgetRegistry, ObjectLayoutWidget, ObjectProperty, ObjectWidget, PropertyGroup, RadioWidget, RateWidget, SFComponent, SFFixedDirective, SFItemComponent, SFItemWrapComponent, SFTemplateDirective, SF_DEFAULT_CONFIG, SchemaValidatorFactory, SelectWidget, SliderWidget, StringProperty, StringWidget, TagWidget, TextWidget, TextareaWidget, TimeWidget, TransferWidget, TreeSelectWidget, UploadWidget, Widget, WidgetFactory, WidgetRegistry, di, getCopyEnum, getData, getEnum, isBlank, isDateFns, mergeConfig, orderProperties, resolveIfSchema, retrieveSchema, toBool, useFactory, TerminatorService as ɵa };

//# sourceMappingURL=form.js.map