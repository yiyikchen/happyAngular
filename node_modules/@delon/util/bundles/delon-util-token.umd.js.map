{"version":3,"file":"delon-util-token.umd.js","sources":["../../../../packages/util/token/window.ts","../../../../packages/util/token/page-visibility.ts","../../../../packages/util/token/delon-util-token.ts"],"sourcesContent":["import { DOCUMENT } from '@angular/common';\nimport { inject, InjectionToken } from '@angular/core';\n\n/**\n * Access to global `window` object\n *\n * 访问全局 `window` 对象\n */\nexport const WINDOW = new InjectionToken<Window>('WINDOW', {\n  factory: () => {\n    const { defaultView } = inject(DOCUMENT);\n    if (!defaultView) {\n      throw new Error('Window is not available');\n    }\n    return defaultView;\n  }\n});\n","import { DOCUMENT } from '@angular/common';\nimport { inject, InjectionToken } from '@angular/core';\nimport { fromEvent, Observable } from 'rxjs';\nimport { distinctUntilChanged, map, share, startWith } from 'rxjs/operators';\n\n/**\n * Use the `visibilitychange` event to monitor whether the browser tab is visible, which is generally used when the user leaves the browser tab to temp interrupt the backend to continue sending requests\n *\n * 通过 `visibilitychange` 事件来监听浏览器选项卡是否可见，一般用于当用户离开应用时暂时中断后端持续发送请求时\n */\nexport const PAGE_VISIBILITY = new InjectionToken<Observable<boolean>>('PAGE_VISIBILITY`', {\n  factory: () => {\n    const doc = inject(DOCUMENT);\n    return fromEvent(doc, 'visibilitychange').pipe(\n      startWith(0),\n      map(() => !doc.hidden),\n      distinctUntilChanged(),\n      share()\n    );\n  }\n});\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","inject","DOCUMENT","fromEvent","startWith","map","distinctUntilChanged","share"],"mappings":";;;;;;IAGA;;;;;QAKa,MAAM,GAAG,IAAIA,mBAAc,CAAS,QAAQ,EAAE;QACzD,OAAO,EAAE;YACC,IAAA,WAAW,GAAKC,WAAM,CAACC,eAAQ,CAAC,YAArB,CAAsB;YACzC,IAAI,CAAC,WAAW,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;aAC5C;YACD,OAAO,WAAW,CAAC;SACpB;KACF;;ICXD;;;;;QAKa,eAAe,GAAG,IAAIF,mBAAc,CAAsB,kBAAkB,EAAE;QACzF,OAAO,EAAE;YACP,IAAM,GAAG,GAAGC,WAAM,CAACC,eAAQ,CAAC,CAAC;YAC7B,OAAOC,cAAS,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC,IAAI,CAC5CC,mBAAS,CAAC,CAAC,CAAC,EACZC,aAAG,CAAC,cAAM,OAAA,CAAC,GAAG,CAAC,MAAM,GAAA,CAAC,EACtBC,8BAAoB,EAAE,EACtBC,eAAK,EAAE,CACR,CAAC;SACH;KACF;;ICpBD;;;;;;;;;;;;;"}